import{r as t,j as e,a as ks}from"./react-CZZ3WKnm.js";import{a as os,c as Ws}from"./react-dom-YYZekoiX.js";import{N as $e,L as xs,B as Vs}from"./react-router-dom-CKaNRw18.js";import{S as Us,M as $s,a as ze}from"./react-pro-sidebar-BUUznrbf.js";import{d as Ks,a as gt,b as Qs,c as _t,s as Ns,I as Zs,B as j,F as hs,e as Js,f as ae,g as us,T as Ve,G as Ye,A as Ze,h as gs,i as Et,D as bs,C as Ys,j as bt,k as zt,S as Xs,P as el,M as Wt,l as tl,m as ws,O as Ds,n as Ts,o as Is,p as es,q as ts,r as ss,t as ls,u as It,v as ie,w as ns,x as Ss,y as sl,z as ll,E as nl}from"./@mui-CvQouxYr.js";import{H as al,I as ol,L as rl}from"./react-icons-_3t5PwsR.js";import{O as Ls,a as Mt,b as rs,e as dl,f as Qe}from"./react-router-h0l8ZffR.js";import{a as Ie}from"./axios-9PTFF6AP.js";import{E as mt}from"./jspdf-Y2zFYIgW.js";import"./jspdf-autotable-Cl18hM-Z.js";import"./@babel-BA4lAN6n.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-S0eZGtat.js";import"./clsx-B-dksMZM.js";import"./react-transition-group-CBfloEW_.js";import"./prop-types-5sfu-SRb.js";import"./@emotion-B15qJ9hT.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-NkKAe6Bn.js";import"./@popperjs-BTz8ABx7.js";import"./fflate-Cf-_J6lE.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))V(m);new MutationObserver(m=>{for(const F of m)if(F.type==="childList")for(const _ of F.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&V(_)}).observe(document,{childList:!0,subtree:!0});function L(m){const F={};return m.integrity&&(F.integrity=m.integrity),m.referrerPolicy&&(F.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?F.credentials="include":m.crossOrigin==="anonymous"?F.credentials="omit":F.credentials="same-origin",F}function V(m){if(m.ep)return;m.ep=!0;const F=L(m);fetch(m.href,F)}})();function il(){const[l,a]=t.useState(!1);return e.jsx(Us,{collapsed:l,className:"app",children:e.jsxs($s,{children:[e.jsx(ze,{className:"menu1",icon:e.jsx(Ks,{}),onClick:()=>a(!l),children:e.jsx("h2",{children:" RemitBae"})}),e.jsx(ze,{className:"sub_menus",children:"Business "}),e.jsx($e,{className:"navelink",to:"/admin/dashboaed",children:e.jsx(ze,{icon:e.jsx(gt,{style:{fontSize:"20px"}}),children:"Dashboard"})}),e.jsx($e,{className:"navelink",to:"/admin/stocks",children:e.jsx(ze,{icon:e.jsx(gt,{style:{fontSize:"20px"}}),children:"Stocks"})}),e.jsx($e,{className:"navelink",to:"/admin/sales",children:e.jsx(ze,{icon:e.jsx(gt,{style:{fontSize:"20px"}}),children:"Sales"})}),e.jsx($e,{className:"navelink",to:"/admin/purchase",children:e.jsx(ze,{icon:e.jsx(gt,{style:{fontSize:"20px"}}),children:"Purchase"})}),e.jsx($e,{className:"navelink",to:"/admin/quotation-generator",children:e.jsx(ze,{icon:e.jsx(gt,{style:{fontSize:"20px"}}),children:"Quotation"})}),e.jsx($e,{className:"navelink",to:"/admin/projects",children:e.jsx(ze,{icon:e.jsx(gt,{style:{fontSize:"20px"}}),children:"Projects"})}),e.jsx($e,{className:"navelink",to:"/admin/receipt",children:e.jsx(ze,{icon:e.jsx(gt,{style:{fontSize:"20px"}}),children:"Receipt"})}),e.jsx($e,{className:"navelink",to:"/admin/payment-out",children:e.jsx(ze,{icon:e.jsx(gt,{style:{fontSize:"20px"}}),children:"Payment"})}),e.jsx($e,{className:"navelink",to:"/admin/creadit-note",children:e.jsx(ze,{icon:e.jsx(gt,{style:{fontSize:"20px"}}),children:"Credit Note"})}),e.jsx($e,{className:"navelink",to:"/admin/debit-note",children:e.jsx(ze,{icon:e.jsx(gt,{style:{fontSize:"20px"}}),children:"Debit Note"})}),e.jsx($e,{className:"navelink",to:"/admin/expense",children:e.jsx(ze,{icon:e.jsx(gt,{style:{fontSize:"20px"}}),children:"Expense"})}),e.jsx($e,{className:"navelink",to:"/admin/delivery-challan",children:e.jsx(ze,{icon:e.jsx(gt,{style:{fontSize:"20px"}}),children:"Delivery Challan"})}),e.jsx(ze,{className:"sub_menus",children:"Accounts "}),e.jsx($e,{className:"navelink",to:"/admin/dash2",children:e.jsx(ze,{icon:e.jsx(Qs,{style:{fontSize:"20px"}}),children:"Dashboard"})}),e.jsx($e,{className:"navelink",to:"/admin/holidays",children:e.jsx(ze,{icon:e.jsx(_t,{style:{fontSize:"20px"}}),children:"Vouchers"})}),e.jsx($e,{className:"navelink",to:"/admin/leaderboard",children:e.jsx(ze,{icon:e.jsx(_t,{style:{fontSize:"20px"}}),children:"Reports"})}),e.jsx(ze,{className:"sub_menus",children:"Human resources "}),e.jsx($e,{className:"navelink",to:"/admin/dash3",children:e.jsx(ze,{icon:e.jsx(_t,{style:{fontSize:"20px"}}),children:"Dashboard"})}),e.jsx($e,{className:"navelink",to:"/admin/employees",children:e.jsx(ze,{icon:e.jsx(_t,{style:{fontSize:"20px"}}),children:"Employes"})}),e.jsx($e,{className:"navelink",to:"/admin/customers",children:e.jsx(ze,{icon:e.jsx(al,{style:{fontSize:"20px"}}),children:"Attendance"})}),e.jsx($e,{className:"navelink",to:"/admin/forex",children:e.jsx(ze,{icon:e.jsx(_t,{style:{fontSize:"20px"}}),children:"Salary"})}),e.jsx($e,{className:"navelink",to:"/admin/forex2",children:e.jsx(ze,{icon:e.jsx(_t,{style:{fontSize:"20px"}}),children:"Holidays"})}),e.jsx(ze,{className:"sub_menus",children:"Settings "})]})})}function cl(){return e.jsx(e.Fragment,{children:e.jsxs("div",{style:{display:"flex",height:"100vh"},children:[e.jsx(il,{}),e.jsx(Ls,{})]})})}function pl({imgSrc:l="https://images.unsplash.com/photo-1560250097-0b93528c311a?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}){return e.jsxs("div",{className:"right_side_header_componet",children:[e.jsxs("div",{className:"name_with_desigination",children:[e.jsx("h1",{children:" Hello Muhammed !"}),e.jsx("p",{children:"Administrator"})]}),e.jsxs("div",{className:"functional_icons_with_name",children:[e.jsx(ol,{size:20,className:"icon"}),e.jsx(rl,{size:20,className:"icon"}),e.jsxs("div",{className:"user_data",children:[l?e.jsx("img",{src:l,alt:"user_img",width:25,height:25}):e.jsx("h1",{className:"user_img",children:"M"}),e.jsxs("div",{className:"user_name_with_time",children:[e.jsx("p",{className:"user_name",children:" Muhammed Riyas A "}),e.jsx("p",{children:" Started at: 10:05AM 25 Oct â€˜23"})]})]})]})]})}function xl(){return e.jsxs("div",{className:"right_side_layout_components",children:[e.jsx(pl,{}),e.jsx(Ls,{})]})}const hl=Ns(Zs)(({theme:l})=>({"label + &":{marginTop:l.spacing(3)},"& .MuiInputBase-input":{position:"relative",backgroundColor:l.palette.mode==="light"?"#F3F6F9":"#1A2027",border:"none",borderRadius:"10px",borderColor:l.palette.mode==="light"?"#42c2f5":"#2D3843",fontSize:16,width:"100%",padding:"10px 12px",transition:l.transitions.create(["border-color","background-color","box-shadow"])}}));function le({handleChange:l,handleSelectChange:a,selectedValue:L,state:V,label:m,type:F,required:_=!0,intputName:X,inputOrSelect:H,options:Q,value:J,disabled:se}){return e.jsx(e.Fragment,{children:e.jsxs(j,{className:"InputComponent-container",component:"form",noValidate:!0,sx:{width:"100%",display:"grid",gridTemplateColumns:{sm:"1fr 1fr"},gap:2},children:[H!=="select"&&e.jsxs(hs,{variant:"standard",fullWidth:!0,sx:{display:"inline"},children:[m&&e.jsx(Js,{shrink:!0,htmlFor:m,children:m}),e.jsx(hl,{id:m,name:X,type:F,required:!0,value:J,onChange:l,disabled:se})]}),H==="select"&&e.jsxs("div",{className:"select-label",children:[e.jsx("label",{htmlFor:"dropdown",children:m}),e.jsx("select",{value:J,onChange:l,children:Q==null?void 0:Q.map((G,re)=>e.jsx("option",{value:G.value,label:G.label},re))})]})]})})}const xt="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M22%2012C22%2016.714%2022%2019.0711%2020.5355%2020.5355C19.0711%2022%2016.714%2022%2012%2022C7.28595%2022%204.92893%2022%203.46447%2020.5355C2%2019.0711%202%2016.714%202%2012C2%207.28595%202%204.92893%203.46447%203.46447C4.92893%202%207.28595%202%2012%202'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M2%2012.5001L3.75159%2010.9675C4.66286%2010.1702%206.03628%2010.2159%206.89249%2011.0721L11.1822%2015.3618C11.8694%2016.0491%2012.9512%2016.1428%2013.7464%2015.5839L14.0446%2015.3744C15.1888%2014.5702%2016.7369%2014.6634%2017.7765%2015.599L21%2018.5001'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M15%205.5H18.5M18.5%205.5H22M18.5%205.5V9M18.5%205.5V2'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3c/svg%3e";function ul(){const[l,a]=t.useState({name:"",email:"",mobile:"",address1:"",address2:"",pinCode:"",designation:"",department:"",reportingTo:"",dateOfBirth:"",dateOfJoin:"",qualification:"",gender:"",salary:"",password:"",bankName:"",accountNumber:"",ifsc:""}),[L,V]=t.useState(null),m=Mt(),F=Q=>{const J=Q.target.files[0];V(J)},_=Q=>{const{name:J,value:se}=Q.target;a(G=>({...G,[J]:se}))},X=Q=>{Q.preventDefault();const J=JSON.parse(localStorage.getItem("employees"))||[],se={...l,image:L},G=[...J,se];localStorage.setItem("employees",JSON.stringify(G)),window.location.reload(),a({name:"",email:"",mobile:"",address1:"",address2:"",pinCode:"",designation:"",department:"",reportingTo:"",dateOfBirth:"",dateOfJoin:"",qualification:"",gender:"",salary:"",password:"",bankName:"",accountNumber:"",ifsc:""}),V(null),console.log("Employee added:",se),console.log("All employees:",G)},H=[{handleChange:_,intputName:"name",label:"Staff Name",type:"text",value:l.name},{handleChange:_,intputName:"email",label:"Email",type:"email",value:l.email},{handleChange:_,intputName:"mobile",label:"Mobile",type:"tel",value:l.mobile},{handleChange:_,intputName:"address1",label:"Address 1",type:"text",value:l.address1},{handleChange:_,intputName:"address2",label:"Address 2",type:"text",value:l.address2},{handleChange:_,intputName:"pinCode",label:"Pin Code",type:"text",value:l.pinCode},{handleChange:_,intputName:"designation",label:"Designation",type:"text",value:l.designation},{handleChange:_,intputName:"department",label:"Department",type:"text",value:l.department},{handleChange:_,intputName:"reportingTo",label:"Reporting To",inputOrSelect:"select",options:[{value:"option1",label:"Option 1"},{value:"option2",label:"Option 2"},{value:"option3",label:"Option 3"}]},{handleChange:_,intputName:"dateOfBirth",label:"Date of Birth",type:"date",value:l.dateOfBirth},{handleChange:_,intputName:"dateOfJoin",label:"Date of Join",type:"date",value:l.dateOfJoin},{handleChange:_,intputName:"qualification",label:"Qualification",type:"text",value:l.qualification},{handleChange:_,intputName:"gender",label:"Gender",type:"text",value:l.gender},{handleChange:_,intputName:"salary",label:"Salary",type:"number",value:l.salary},{handleChange:_,intputName:"password",label:"Password",type:"password",value:l.password},{handleChange:_,intputName:"bankName",label:"Bank Name",type:"text",value:l.bankName},{handleChange:_,intputName:"accountNumber",label:"Account Number",type:"text",value:l.accountNumber},{handleChange:_,intputName:"ifsc",label:"IFSC",type:"text",value:l.ifsc}];return e.jsxs("div",{className:"add-staff-page-container",children:[e.jsxs(ae,{disableRipple:!0,sx:{mb:2,textTransform:"none",color:"var(--black-button)","&:hover":{background:"transparent"}},component:"label",onClick:()=>m(-1),children:[e.jsx(us,{}),"Back"]}),e.jsx("div",{className:"add-staff-page",children:e.jsxs("form",{onSubmit:X,children:[e.jsxs("div",{className:"header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:" Add Employees"}),e.jsx("h4",{children:" Enter the employees details to create a new employees "})]}),e.jsxs(ae,{disableRipple:!0,sx:{textTransform:"none",color:"var(--black-button)","&:hover":{background:"transparent"}},component:"label",children:[e.jsx("img",{src:xt,alt:"add img"}),e.jsx(Ve,{variant:"string",sx:{pl:1},children:"Add Photo"}),e.jsx("input",{type:"file",hidden:!0,onChange:F})]})]}),e.jsx(Ye,{container:!0,spacing:2,children:H.map((Q,J)=>e.jsx(Ye,{item:!0,xs:6,md:4,children:e.jsx(le,{handleChange:Q.handleChange,state:Q.state,label:Q.label,type:Q.type,intputName:Q.intputName,inputOrSelect:Q.inputOrSelect,options:Q.options})},J))}),e.jsx(ae,{type:"submit",variant:"contained",color:"primary",sx:{mt:"2rem",fontWeight:"bold",textTransform:"none",bgcolor:"var(--black-button)","&:hover":{background:"var(--button-hover)"}},children:"Add Employees"})]})})]})}const Le="https://teqbae-accounts-rkkzm.ondigitalocean.app",Pt=async l=>{try{return await Ie.post(`${Le}/product/create`,l)}catch(a){throw console.error(a),a.response.data}},lt=async()=>{try{const l=await Ie.get(`${Le}/product/getall`);return console.log("productGetAPI",l),l.data}catch(l){throw console.error(l),l.response.data}},gl=async l=>{try{return console.log({id:l}),await Ie.post(`${Le}/product/delete`,{id:l})}catch(a){throw console.error(a),a.response.data}},bl=async l=>{try{return await Ie.put(`${Le}/product/update`,l)}catch(a){throw console.error(a),a.response.data}},yt=async()=>{try{const l=await Ie.get(`${Le}/master/taxrate/get`);return console.log(l),l.data.responseData}catch(l){throw console.error(l),l.response.data}},Os=async l=>{try{const a=await Ie.post(`${Le}/project/create`,l);return console.log(a),a}catch(a){throw console.error(a),a.response.data}},ft=async()=>{try{return(await Ie.get(`${Le}/project/getall`)).data}catch(l){throw console.error(l),l.response.data}},js=async()=>{try{const l=await Ie.get(`${Le}/master/country/list`);return console.log(l),l.data.responseData}catch(l){throw console.error(l),l.response.data}},Ps=async()=>{try{const l=await Ie.get(`${Le}/master/worktype/list`);return console.log(l),l.data.responseData}catch(l){throw console.error(l),l.response.data}},ms=async()=>{try{return(await Ie.get(`${Le}/project/getclient`)).data}catch(l){throw console.error(l),l.response.data}},jl=async l=>{try{const a=await Ie.post(`${Le}/voucher/sales/add`,l);return console.log(a),a}catch(a){throw console.error(a),a.response.data}},Rt=async()=>{try{return(await Ie.get(`${Le}/party/getall`)).data}catch(l){throw console.error(l),l.response.data}},ml=async l=>{try{const a=await Ie.post(`${Le}/voucher/purchase/add`,l);return console.log(a),a}catch(a){throw console.error(a),a.response.data}},yl=async l=>{try{const a=await Ie.post(`${Le}/party/create`,l);return console.log(a),a}catch(a){throw console.error(a),a.response.data}},fl=async l=>{try{const a=await Ie.post(`${Le}/project/getbyid`,l);return console.log(a),a}catch(a){throw console.error(a),a.response.data}},Rs=async l=>{try{console.log(l);const a=await Ie.post(`${Le}/voucher/payment/add`,l);return console.log(a),a}catch(a){throw console.error(a),a.response.data}},Tt=async()=>{try{return(await Ie.get(`${Le}/master/unit/get`)).data}catch(l){throw console.error(l),l.response.data}},Bs=async l=>{try{console.log(l);const a=await Ie.post(`${Le}/voucher/payment/getall`,l);return console.log(a),a}catch(a){throw console.error(a),a.response.data}},Vt=async()=>{try{return(await Ie.get(`${Le}/product/category/getall`)).data}catch(l){throw console.error(l),l.response.data}},Fs=async l=>{try{const a=await Ie.post(`${Le}/product/ismaster/create`,l);return console.log(a),a}catch(a){throw console.error(a),a.response.data}},vl=async l=>{try{const a=await Ie.post(`${Le}/quotation/create`,l);return console.log(a),a}catch(a){throw console.error(a),a.response.data}},Cl=async l=>{try{const a=await Ie.post(`${Le}/quotation/get`,l);return console.log(a),a}catch(a){throw console.error(a),a.response.data}},Sl=async()=>{try{return(await Ie.get(`${Le}/voucher/expenses/item/getall`)).data}catch(l){throw console.error(l),l.response.data}},Al=async l=>{try{const a=await Ie.post(`${Le}/voucher/expenses/item/add`,l);return console.log(a),a}catch(a){throw console.error(a),a.response.data}},kl=async l=>{try{const a=await Ie.post(`${Le}/voucher/expenses/add`,l);return console.log(a),a}catch(a){throw console.error(a),a.response.data}},Nl=async l=>{try{const a=await Ie.post(`${Le}/project/category/create`,l);return console.log(a),a}catch(a){throw console.error(a),a.response.data}},As=async()=>{try{const l=await Ie.get(`${Le}/project/category/getall`);return console.log(l),l}catch(l){throw console.error(l),l.response.data}},wl=async l=>{try{const a=await Ie.post(`${Le}/voucher/creditnote/add`,l);return console.log(a),a}catch(a){throw console.error(a),a.response.data}},Dl=async l=>{try{const a=await Ie.post(`${Le}/voucher/debitnote/add`,l);return console.log(a),a}catch(a){throw console.error(a),a.response.data}},Tl=async l=>{try{console.log(l);const a=await Ie.post(`${Le}/voucher/delivery-challan/add`,l);return console.log(a),a}catch(a){throw console.error(a),a.response.data}},_s=async()=>{try{const l=await Ie.get(`${Le}/master/state/list`);return console.log(l),l}catch(l){throw console.error(l),l.response.data}};function Il(){const l=Mt(),[a,L]=t.useState({name:"",email:"",mobile:"",address1:"",address2:"",pinCode:"",worktype:"",country:"",project:""}),[V,m]=t.useState(null),[F,_]=t.useState(!0),[X,H]=t.useState({}),[Q,J]=t.useState([]),[se,G]=t.useState([]),[re,d]=t.useState(null),[v,g]=t.useState(null);t.useEffect(()=>{js().then(p=>{const D=p.map(te=>({value:te.id,label:te.name}));J(D)}).catch(p=>{console.log(p)}),Ps().then(p=>{console.log("work type:",p);const D=p.map(te=>({value:te.id,label:te.name}));console.log(D),G(D)}).catch(p=>{console.log(p)})},[]);const E=p=>{const D=p.target.files[0];m(D)},M=p=>{const{name:D,value:te}=p.target;console.log(D,te),L(xe=>({...xe,[D]:te}))},C=[{handleChange:M,intputName:"project",label:"Project Name",type:"text",value:a.project},{handleChange:M,intputName:"name",label:"Client Name",type:"text",value:a.name},{handleChange:M,intputName:"email",label:"Email",type:"email",value:a.email},{handleChange:M,intputName:"mobile",label:"Mobile",type:"tel",value:a.mobile},{handleChange:M,intputName:"address1",label:"Address 1",type:"text",value:a.address1},{handleChange:M,intputName:"address2",label:"Address 2",type:"text",value:a.address2},{handleChange:M,intputName:"pinCode",label:"Pin Code",type:"text",value:a.pinCode}],T=()=>{const p=new FormData;p.append("name",a.project),p.append("client_name",a.name),p.append("work_type",re),p.append("phonenumber",a.mobile),p.append("email",a.email),p.append("address1",a.address1),p.append("address2",a.address2),p.append("country",v),p.append("postal_code",a.pinCode),p.append("has_plan_given",F);for(let D of p.entries())console.log(D[0]+": "+D[1]);Os(p).then(D=>{console.log(D)}).catch(D=>{console.log(D)}),L({name:"",email:"",mobile:"",address1:"",address2:"",pinCode:"",worktype:"",country:"",project:""}),m(null),_(!0),H({})};return e.jsxs("div",{className:"add-client-page-container",children:[e.jsxs(ae,{disableRipple:!0,sx:{mb:2,textTransform:"none",color:"var(--black-button)","&:hover":{background:"transparent"}},component:"label",onClick:()=>l(-1),children:[e.jsx(us,{}),"Back"]}),e.jsxs("div",{className:"add-client-page",children:[e.jsx("h2",{children:"Add Project"}),e.jsxs(Ye,{container:!0,spacing:2,children:[C.map((p,D)=>e.jsxs(Ye,{item:!0,xs:6,md:4,children:[e.jsx(le,{handleChange:M,label:p.label,intputName:p.intputName,type:p.type,inputOrSelect:p.inputOrSelect,required:p.required,hidden:p.hidden,value:p.value}),X[p==null?void 0:p.intputName]&&e.jsx("span",{className:"error-message-in-input-fiels",children:X[p.intputName]})]},D)),e.jsxs(Ye,{xs:6,md:4,sx:{pt:"16px",pl:"16px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsx("p",{className:"input-name",children:"Work Type"}),e.jsx(Ze,{sx:{display:"inline-block","& input":{width:"100%",border:"none",bgcolor:"var(--inputbg-color)",color:p=>p.palette.getContrastText(p.palette.background.paper)}},id:"custom-input-demo",options:se,onChange:(p,D)=>d(D.value),componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:p=>e.jsx("div",{ref:p.InputProps.ref,children:e.jsx("input",{type:"text",...p.inputProps,style:{height:"42px",borderRadius:10,width:"99%",paddingLeft:"10px"}})})})]}),e.jsxs(Ye,{xs:6,md:4,sx:{pt:"16px",pl:"16px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsx("p",{className:"input-name",children:"Country"}),e.jsx(Ze,{sx:{display:"inline-block","& input":{width:"100%",border:"none",bgcolor:"var(--inputbg-color)",color:p=>p.palette.getContrastText(p.palette.background.paper)}},id:"custom-input-demo",options:Q,onChange:(p,D)=>g(D.value),componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:p=>e.jsx("div",{ref:p.InputProps.ref,children:e.jsx("input",{type:"text",...p.inputProps,style:{height:"42px",borderRadius:10,width:"99%",paddingLeft:"10px"}})})})]}),e.jsx(Ye,{item:!0,xs:6,md:6,children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"start"},children:[e.jsxs("div",{children:[e.jsx("h5",{children:" Has plan given?"}),e.jsxs(gs,{value:F?"true":"false",exclusive:!0,onChange:(p,D)=>_(D==="true"),"aria-label":"text alignment",children:[e.jsx(Et,{value:"true","aria-label":"left aligned",sx:{fontSize:"12px",borderRadius:"35px",width:"90px",height:"35px",textAlign:"center",marginTop:"5px",marginLeft:"10px","&.Mui-selected, &.Mui-selected:hover":{color:"white",backgroundColor:"#8cdb7e"}},children:e.jsx("p",{children:"yes"})}),e.jsx(Et,{value:"false","aria-label":"centered",sx:{fontSize:"12px",borderRadius:"35px",width:"90px",height:"35px",textAlign:"center",marginTop:"5px",marginLeft:"10px","&.Mui-selected, &.Mui-selected:hover":{color:"white",backgroundColor:"#8cdb7e"}},children:e.jsx("p",{children:"no"})})]})]}),F&&e.jsxs(ae,{disableRipple:!0,sx:{mt:2,color:"var(--black-button)",textTransform:"none","&:hover":{background:"transparent"}},component:"label",children:[e.jsx("img",{src:xt,alt:"add ing"}),e.jsx(Ve,{variant:"string",sx:{pl:1},children:"Add Photo"}),e.jsx("input",{type:"file",hidden:!0,onChange:E})]})]})})]}),e.jsx(ae,{type:"submit",variant:"contained",sx:{mt:"2rem",fontWeight:"bold",textTransform:"none",bgcolor:"var(--black-button)","&:hover":{background:"var(--button-hover)"}},onClick:T,children:"Add Project"})]})]})}const Ll="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12%202.75C11.0215%202.75%2010.1871%203.37503%209.87787%204.24993C9.73983%204.64047%209.31134%204.84517%208.9208%204.70713C8.53026%204.56909%208.32557%204.1406%208.46361%203.75007C8.97804%202.29459%2010.3661%201.25%2012%201.25C13.634%201.25%2015.022%202.29459%2015.5365%203.75007C15.6745%204.1406%2015.4698%204.56909%2015.0793%204.70713C14.6887%204.84517%2014.2602%204.64047%2014.1222%204.24993C13.813%203.37503%2012.9785%202.75%2012%202.75Z'%20fill='%23F70000'/%3e%3cpath%20d='M2.75%206C2.75%205.58579%203.08579%205.25%203.5%205.25H20.5001C20.9143%205.25%2021.2501%205.58579%2021.2501%206C21.2501%206.41421%2020.9143%206.75%2020.5001%206.75H3.5C3.08579%206.75%202.75%206.41421%202.75%206Z'%20fill='%23F70000'/%3e%3cpath%20d='M5.91508%208.45011C5.88753%208.03681%205.53015%207.72411%205.11686%207.75166C4.70356%207.77921%204.39085%208.13659%204.41841%208.54989L4.88186%2015.5016C4.96735%2016.7844%205.03641%2017.8205%205.19838%2018.6336C5.36678%2019.4789%205.6532%2020.185%206.2448%2020.7384C6.83639%2021.2919%207.55994%2021.5307%208.41459%2021.6425C9.23663%2021.75%2010.2751%2021.75%2011.5607%2021.75H12.4395C13.7251%2021.75%2014.7635%2021.75%2015.5856%2021.6425C16.4402%2021.5307%2017.1638%2021.2919%2017.7554%2020.7384C18.347%2020.185%2018.6334%2019.4789%2018.8018%2018.6336C18.9637%2017.8205%2019.0328%2016.7844%2019.1183%2015.5016L19.5818%208.54989C19.6093%208.13659%2019.2966%207.77921%2018.8833%207.75166C18.47%207.72411%2018.1126%208.03681%2018.0851%208.45011L17.6251%2015.3492C17.5353%2016.6971%2017.4712%2017.6349%2017.3307%2018.3405C17.1943%2019.025%2017.004%2019.3873%2016.7306%2019.6431C16.4572%2019.8988%2016.083%2020.0647%2015.391%2020.1552C14.6776%2020.2485%2013.7376%2020.25%2012.3868%2020.25H11.6134C10.2626%2020.25%209.32255%2020.2485%208.60915%2020.1552C7.91715%2020.0647%207.54299%2019.8988%207.26957%2019.6431C6.99616%2019.3873%206.80583%2019.025%206.66948%2018.3405C6.52891%2017.6349%206.46488%2016.6971%206.37503%2015.3492L5.91508%208.45011Z'%20fill='%23F70000'/%3e%3cpath%20d='M9.42546%2010.2537C9.83762%2010.2125%2010.2051%2010.5132%2010.2464%2010.9254L10.7464%2015.9254C10.7876%2016.3375%2010.4869%2016.7051%2010.0747%2016.7463C9.66256%2016.7875%209.29502%2016.4868%209.25381%2016.0746L8.75381%2011.0746C8.71259%2010.6625%209.0133%2010.2949%209.42546%2010.2537Z'%20fill='%23F70000'/%3e%3cpath%20d='M15.2464%2011.0746C15.2876%2010.6625%2014.9869%2010.2949%2014.5747%2010.2537C14.1626%2010.2125%2013.795%2010.5132%2013.7538%2010.9254L13.2538%2015.9254C13.2126%2016.3375%2013.5133%2016.7051%2013.9255%2016.7463C14.3376%2016.7875%2014.7051%2016.4868%2014.7464%2016.0746L15.2464%2011.0746Z'%20fill='%23F70000'/%3e%3c/svg%3e";function Ht({heading:l,qty:a,unit:L,rate:V,handleDelete:m,handleUpdate:F,image:_}){const X={heading:l,qty:a,unit:L,rate:V};return e.jsxs(j,{component:"section",sx:{pl:1,py:2,display:"flex",flexDirection:"row",bgcolor:"var(--product-card)",width:250,borderRadius:"15px",cursor:"default"},onClick:()=>{F(X)},children:[e.jsx(j,{sx:{display:"flex",justifyContent:"space-around",alignItems:"center",width:"20%"},children:_?e.jsx("img",{src:`https://drive.google.com/thumbnail?id=${_}&sz=w30`,alt:""}):e.jsx("img",{src:xt,alt:"add"})}),e.jsxs(j,{sx:{height:"auto",width:"100%"},children:[e.jsxs(j,{sx:{display:"flex",justifyContent:"between",gap:5,alignItems:"center",px:2,pb:2},children:[e.jsx(j,{sx:{width:"100%"},children:e.jsxs("p",{children:[l," "]})}),e.jsx("img",{src:Ll,alt:"Delete",onClick:m})]}),e.jsxs(j,{sx:{display:"flex",alignItems:"flex-start"},children:[e.jsxs(j,{sx:{px:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(Ve,{sx:{color:"var(--text-muted)",fontSize:14},children:"Qty"}),e.jsx(Ve,{children:a})]}),e.jsxs(j,{sx:{px:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(Ve,{sx:{color:"var(--text-muted)",fontSize:14},children:"Unit"}),e.jsx(Ve,{children:L})]}),e.jsxs(j,{sx:{px:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(Ve,{sx:{color:"var(--text-muted)",fontSize:14},children:"Rate"}),e.jsx(Ve,{children:V})]})]})]})]})}const Ol="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.25%207C5.25%207.41421%205.58579%207.75%206%207.75H18C18.4142%207.75%2018.75%207.41421%2018.75%207C18.75%206.58579%2018.4142%206.25%2018%206.25H6C5.58579%206.25%205.25%206.58579%205.25%207Z'%20fill='%231C274C'/%3e%3cpath%20d='M9.25%2017C9.25%2017.4142%208.91421%2017.75%208.5%2017.75C8.08579%2017.75%207.75%2017.4142%207.75%2017V12.0715L6.57617%2013.4801C6.31099%2013.7983%205.83807%2013.8413%205.51986%2013.5762C5.20165%2013.311%205.15866%2012.8381%205.42383%2012.5199L7.92383%209.51986C8.06633%209.34887%208.27742%209.25%208.5%209.25C8.72259%209.25%208.93367%209.34887%209.07617%209.51986L11.5762%2012.5199C11.8413%2012.8381%2011.7983%2013.311%2011.4801%2013.5762C11.1619%2013.8413%2010.689%2013.7983%2010.4238%2013.4801L9.25%2012.0715V17Z'%20fill='%231C274C'/%3e%3cpath%20d='M16.25%2017C16.25%2017.4142%2015.9142%2017.75%2015.5%2017.75C15.0858%2017.75%2014.75%2017.4142%2014.75%2017V12.0715L13.5762%2013.4801C13.311%2013.7983%2012.8381%2013.8413%2012.5199%2013.5762C12.2017%2013.311%2012.1587%2012.8381%2012.4238%2012.5199L14.9238%209.51986C15.0663%209.34887%2015.2774%209.25%2015.5%209.25C15.7226%209.25%2015.9337%209.34887%2016.0762%209.51986L18.5762%2012.5199C18.8413%2012.8381%2018.7983%2013.311%2018.4801%2013.5762C18.1619%2013.8413%2017.689%2013.7983%2017.4238%2013.4801L16.25%2012.0715V17Z'%20fill='%231C274C'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.9426%201.25C9.63423%201.24999%207.82519%201.24998%206.4137%201.43975C4.96897%201.63399%203.82895%202.03933%202.93414%202.93414C2.03933%203.82895%201.63399%204.96897%201.43975%206.41371C1.24998%207.82519%201.24999%209.63423%201.25%2011.9426V12.0574C1.24999%2014.3658%201.24998%2016.1748%201.43975%2017.5863C1.63399%2019.031%202.03933%2020.1711%202.93414%2021.0659C3.82895%2021.9607%204.96897%2022.366%206.4137%2022.5603C7.82519%2022.75%209.63423%2022.75%2011.9426%2022.75H12.0574C14.3658%2022.75%2016.1748%2022.75%2017.5863%2022.5603C19.031%2022.366%2020.1711%2021.9607%2021.0659%2021.0659C21.9607%2020.1711%2022.366%2019.031%2022.5603%2017.5863C22.75%2016.1748%2022.75%2014.3658%2022.75%2012.0574V11.9426C22.75%209.63423%2022.75%207.82519%2022.5603%206.41371C22.366%204.96897%2021.9607%203.82895%2021.0659%202.93414C20.1711%202.03933%2019.031%201.63399%2017.5863%201.43975C16.1748%201.24998%2014.3658%201.24999%2012.0574%201.25H11.9426ZM3.9948%203.9948C4.56445%203.42514%205.33517%203.09825%206.61358%202.92637C7.91356%202.75159%209.62177%202.75%2012%202.75C14.3782%202.75%2016.0864%202.75159%2017.3864%202.92637C18.6648%203.09825%2019.4355%203.42514%2020.0052%203.9948C20.5749%204.56445%2020.9018%205.33517%2021.0736%206.61358C21.2484%207.91356%2021.25%209.62178%2021.25%2012C21.25%2014.3782%2021.2484%2016.0864%2021.0736%2017.3864C20.9018%2018.6648%2020.5749%2019.4355%2020.0052%2020.0052C19.4355%2020.5749%2018.6648%2020.9018%2017.3864%2021.0736C16.0864%2021.2484%2014.3782%2021.25%2012%2021.25C9.62177%2021.25%207.91356%2021.2484%206.61358%2021.0736C5.33517%2020.9018%204.56445%2020.5749%203.9948%2020.0052C3.42514%2019.4355%203.09825%2018.6648%202.92637%2017.3864C2.75159%2016.0864%202.75%2014.3782%202.75%2012C2.75%209.62178%202.75159%207.91356%202.92637%206.61358C3.09825%205.33517%203.42514%204.56445%203.9948%203.9948Z'%20fill='%231C274C'/%3e%3c/svg%3e";function qt({handleSubmit:l,arrOfInputs:a,toggleDrawer:L,state:V,ProductFormData:m,updateData:F,handleImageChange:_,handleAdd:X,handleSelectChange:H,updatetrue:Q,handleUpdateData:J,imagePreview:se,setImagePreview:G,setImg:re}){const d=v=>e.jsxs(j,{sx:{width:700,mx:5,my:3},role:"presentation",onClick:L(v,!0),onKeyDown:L(v,!0),children:[e.jsxs(j,{sx:{my:3},children:[e.jsx("h2",{children:" Product / Material "}),e.jsx("h4",{children:" Manage Products to the inventory "})]}),e.jsxs("form",{onSubmit:l,children:[e.jsxs(Ye,{container:!0,spacing:2,children:[a==null?void 0:a.map((g,E)=>(console.log("input.options",g.options),e.jsx(Ye,{item:!0,xs:6,md:6,children:e.jsx(le,{handleChange:g.handleChange,handleSelectChange:H,selectedValue:g.value,label:g.label,intputName:g.intputName,type:g.type,inputOrSelect:g.inputOrSelect,options:g.options,value:g.value,disabled:g.disabled})},E))),se?e.jsx(Ys,{onDelete:()=>{G(null),re(null)},avatar:e.jsx("img",{src:se,width:100,height:100}),style:{marginTop:"15px",marginLeft:"10px"},size:"medium"}):e.jsxs(ae,{disableRipple:!0,sx:{mt:5,ml:2,color:"var(--black-button)",textTransform:"none","&:hover":{background:"transparent"}},component:"label",children:[e.jsx("img",{src:xt,alt:"add ing"}),e.jsx(Ve,{variant:"string",sx:{pl:1},children:"Upload product image"}),e.jsx("input",{type:"file",hidden:!0,onChange:_})]})]}),Q?e.jsx(ae,{type:"submit",variant:"contained",color:"primary",sx:{mt:"2rem",fontWeight:"bold",textTransform:"none",bgcolor:"var(--black-button)"},onClick:J,children:"Update Product"}):e.jsx(ae,{type:"submit",variant:"contained",color:"primary",sx:{mt:"2rem",fontWeight:"bold",textTransform:"none",bgcolor:"var(--black-button)"},onClick:X,children:"Add Product"}),e.jsxs(ae,{disableRipple:!0,sx:{mt:4,mx:2,textTransform:"none",color:"var(--black-button)","&:hover":{background:"transparent"}},component:"label",children:[e.jsx("img",{src:Ol,alt:"bulkUpload"}),e.jsxs(Ve,{variant:"string",sx:{paddingLeft:1},children:[" ","Bulk Upload"]}),e.jsx("input",{type:"file",hidden:!0,onChange:_})]})]})]});return console.log(F),e.jsx(bs,{sx:{"& .MuiDrawer-root":{position:"absolute"},"& .MuiPaper-root":{position:"absolute"}},anchor:"right",open:V.right,onClose:L("right",!1),className:"drawer-component",children:d("right")})}const as="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12.75%209C12.75%208.58579%2012.4142%208.25%2012%208.25C11.5858%208.25%2011.25%208.58579%2011.25%209L11.25%2011.25H9C8.58579%2011.25%208.25%2011.5858%208.25%2012C8.25%2012.4142%208.58579%2012.75%209%2012.75H11.25V15C11.25%2015.4142%2011.5858%2015.75%2012%2015.75C12.4142%2015.75%2012.75%2015.4142%2012.75%2015L12.75%2012.75H15C15.4142%2012.75%2015.75%2012.4142%2015.75%2012C15.75%2011.5858%2015.4142%2011.25%2015%2011.25H12.75V9Z'%20fill='%231C274C'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M12.0574%201.25H11.9426C9.63424%201.24999%207.82519%201.24998%206.41371%201.43975C4.96897%201.63399%203.82895%202.03933%202.93414%202.93414C2.03933%203.82895%201.63399%204.96897%201.43975%206.41371C1.24998%207.82519%201.24999%209.63422%201.25%2011.9426V12.0574C1.24999%2014.3658%201.24998%2016.1748%201.43975%2017.5863C1.63399%2019.031%202.03933%2020.1711%202.93414%2021.0659C3.82895%2021.9607%204.96897%2022.366%206.41371%2022.5603C7.82519%2022.75%209.63423%2022.75%2011.9426%2022.75H12.0574C14.3658%2022.75%2016.1748%2022.75%2017.5863%2022.5603C19.031%2022.366%2020.1711%2021.9607%2021.0659%2021.0659C21.9607%2020.1711%2022.366%2019.031%2022.5603%2017.5863C22.75%2016.1748%2022.75%2014.3658%2022.75%2012.0574V11.9426C22.75%209.63423%2022.75%207.82519%2022.5603%206.41371C22.366%204.96897%2021.9607%203.82895%2021.0659%202.93414C20.1711%202.03933%2019.031%201.63399%2017.5863%201.43975C16.1748%201.24998%2014.3658%201.24999%2012.0574%201.25ZM3.9948%203.9948C4.56445%203.42514%205.33517%203.09825%206.61358%202.92637C7.91356%202.75159%209.62177%202.75%2012%202.75C14.3782%202.75%2016.0864%202.75159%2017.3864%202.92637C18.6648%203.09825%2019.4355%203.42514%2020.0052%203.9948C20.5749%204.56445%2020.9018%205.33517%2021.0736%206.61358C21.2484%207.91356%2021.25%209.62177%2021.25%2012C21.25%2014.3782%2021.2484%2016.0864%2021.0736%2017.3864C20.9018%2018.6648%2020.5749%2019.4355%2020.0052%2020.0052C19.4355%2020.5749%2018.6648%2020.9018%2017.3864%2021.0736C16.0864%2021.2484%2014.3782%2021.25%2012%2021.25C9.62177%2021.25%207.91356%2021.2484%206.61358%2021.0736C5.33517%2020.9018%204.56445%2020.5749%203.9948%2020.0052C3.42514%2019.4355%203.09825%2018.6648%202.92637%2017.3864C2.75159%2016.0864%202.75%2014.3782%202.75%2012C2.75%209.62177%202.75159%207.91356%202.92637%206.61358C3.09825%205.33517%203.42514%204.56445%203.9948%203.9948Z'%20fill='%231C274C'/%3e%3c/svg%3e";function Pl(){var Re;const[l,a]=t.useState([]),[L,V]=t.useState(""),[m,F]=t.useState([]),[_,X]=t.useState(!1),[H,Q]=t.useState([]),[J,se]=t.useState([]),[G,re]=t.useState(!1),[d,v]=t.useState(null),g=()=>{Tt().then(k=>{console.log("units:",k);const c=k==null?void 0:k.responseData.map(O=>({value:O.id,label:O.name}));c.unshift({value:0,label:"None"}),console.log(c),Q(c)}).catch(k=>{console.log(k)})},E=()=>{ft().then(k=>{console.log("projects:",k);const c=k==null?void 0:k.responseData.map(O=>({value:O.id,label:`${O.name} ( ${O.client_name} )`}));c.unshift({value:0,label:"None"}),console.log(c),se(c)}).catch(k=>{console.log(k)})},M=()=>{re(!0),lt().then(k=>{console.log("productGetAPI:",k.responseData.length),re(!1),a(k.responseData)}).catch(k=>{console.log("err",k),re(!1)})},C=()=>{yt().then(k=>{console.log("tax:",k);const c=k.map(O=>({value:O.percentage,label:O.name?`${O.name} ${O.percentage}`:"none",taxlabel:O.percentage,id:O.id}));console.log(c),F(c)}).catch(k=>{console.log(k)})};t.useEffect(()=>{E(),g(),g(),M(),C()},[]);const[T,p]=t.useState({name:"",qty:"",unit:"",hsn:"",rate:0}),[D,te]=t.useState(""),[xe,Ne]=t.useState(""),[he,ke]=t.useState({value:"0%",label:"IGST@ 0%",taxlabel:"0%",id:3}),[de,Oe]=t.useState({name:"",quantity:"",rate:0,hsn:""}),[ge,S]=t.useState(null),y=k=>{te(k.target.value),console.log(k.target.value)},ne=k=>{Ne(k.target.value),console.log(k.target.value)},be=k=>{console.log(k.target.value);const c=m.find(O=>O.taxlabel==k.target.value);console.log(c),ke(c)},we=k=>{const c=k.target.files[0];if(c){const O=new FileReader;O.onloadend=()=>{v(O.result)},O.readAsDataURL(c)}S(c)},ue=k=>{const{name:c,value:O}=k.target;Oe(ve=>({...ve,[c]:O}))},Ge=k=>{k.preventDefault(),console.log(D),console.log(ge),console.log(de)},De=k=>{V(k.target.value)},We=()=>{},Ee=(k,c)=>{console.log(c)},Me=[{handleChange:ue,intputName:"name",label:"Material Name",type:"text",value:(T==null?void 0:T.name)||de.name},{handleChange:ue,intputName:"rate",label:"Rate",type:"number",value:T.rate||de.rate},{handleChange:ue,intputName:"quantity",label:"Quantity",type:"number",value:T.qty||de.quantity},{handleChange:be,intputName:"taxrate",label:"Tax Rate",value:(he==null?void 0:he.value)||"",inputOrSelect:"select",options:m},{intputName:"taxvalue",label:" Tax Value",value:parseFloat(de.rate||0)*parseFloat(de.quantity||0)*(parseFloat((Re=he.value)==null?void 0:Re.replace("%",""))||0)/100,disabled:"disabled"},{handleChange:ue,intputName:"hsn",label:"HSN",type:"text",value:de.hsn},{handleChange:y,intputName:"unit",label:"Unit",value:D,inputOrSelect:"select",options:H},{handleChange:ne,intputName:"project",label:"Projects",value:xe,inputOrSelect:"select",options:J}],[Pe,qe]=t.useState({right:!1}),z=(k,c)=>O=>{console.log(O),console.log("Toggle Drawer:",k,c),!(O&&O.type==="keydown"&&(O.key==="Tab"||O.key==="Shift"))&&qe({...Pe,[k]:c})},A=k=>{console.log("Updating data:",k),X(!0),p(k),z("right",!0)(),alert("update")},h=()=>{alert("update");const k={name:T.name,hsn:T.hsn,rate:parseInt(T.rate),quantity:parseInt(T.qty),unit:D,taxvalue:he==null?void 0:he.label};bl(k).then(c=>{console.log(c),X(!1),M()}).catch(c=>{console.log(c)})},N=(k,c)=>{k.stopPropagation();try{gl(c).then(O=>{O.status==200&&(M(),console.log("deleted"))})}catch(O){console.error("Error deleting item:",O)}},W=()=>{const k=new FormData;k.append("name",de.name),k.append("hsn",de.hsn),k.append("rate",parseInt(de.rate)),k.append("quantity",parseInt(de.quantity)),k.append("unit",D),k.append("projectid",parseInt(xe)),k.append("is_master_product",!1),k.append("tax_rate",he.id),k.append("image",ge),Pt(k).then(c=>{c.status===200&&(Oe(O=>({...O,name:"",qate:"",quantity:"",rate:"",taxvalue:"",hsn:""})),te(""),ke({value:"0%",label:"IGST@ 0%",taxlabel:"0%",id:3}),Ne({}),setCategoryValue({}),alert("Product added successfully"),M())}).catch(c=>{console.log(c),alert("Problem in adding product",D)})};return e.jsxs("div",{className:"manage-prodect-page",children:[e.jsxs("div",{className:"product-add-text",children:[e.jsxs("div",{children:[e.jsx("h2",{children:" Stocks "}),e.jsx("h4",{children:" Manage Products to the inventory "})]}),e.jsxs(j,{sx:{display:"flex",flexDirection:"column"},children:[e.jsxs(ae,{disableRipple:!0,sx:{textTransform:"none","&:hover":{background:"transparent"}},onClick:()=>{z("right",!0)(),p("")},children:[e.jsx("img",{src:as,alt:"AddSquare"}),e.jsxs(Ve,{variant:"string",sx:{color:"black",fontWeight:"700 ",paddingLeft:1},children:[" ","Add stock"]})]}),e.jsxs(xs,{to:"/admin/stock-journal",style:{display:"flex",textDecoration:"none",fontSize:"14px",marginLeft:"9px",marginTop:"10px",fontWeight:500},children:[e.jsx("img",{src:as,alt:"AddSquare"}),e.jsxs(Ve,{variant:"string",sx:{color:"black",fontWeight:"700 ",paddingLeft:1,paddingTop:"2px"},children:[" ","Stock Journal"]})]})]})]}),e.jsxs(j,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(le,{handleChange:De,label:"Product Search",intputName:"product-search",type:"text"}),e.jsx(ae,{variant:"contained",sx:{height:40,marginTop:3,marginLeft:2,textTransform:"none",bgcolor:"var(--black-button)"},onClick:We,children:"Search"})]}),e.jsxs(j,{sx:{mt:4,pb:2,py:2,bgcolor:"var(--bgwhite)",borderRadius:5,msScrollRails:"none",gap:1},children:[e.jsx(j,{sx:{overflowY:"auto",width:"100%",display:"flex",flexWrap:"wrap"},children:G?e.jsx(j,{sx:{my:2,mx:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(bt,{color:"inherit"})}):l==0?e.jsxs(j,{sx:{my:2,mx:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(zt,{sx:{mx:"auto"},style:{fontSize:"40px"}}),e.jsx("p",{style:{textAlign:"center"},children:"No products available"})]}):l==null?void 0:l.map((k,c)=>(console.log("index",k),e.jsx(j,{sx:{px:"10px",py:1},children:e.jsx(Ht,{handleUpdate:A,handleDelete:O=>N(O,k.id),heading:k.name,image:k.Image,qty:k.quantity,unit:k.unit,rate:k.rate,amount:k.amount})},c)))}),e.jsx(j,{sx:{mt:2,display:"flex",justifyContent:"center"},children:e.jsx(Xs,{spacing:2,children:e.jsx(el,{count:30,variant:"outlined",shape:"rounded",onChange:Ee})})})]}),e.jsx(qt,{handleSubmit:Ge,handleSelectChange:y,selectedValue:D,arrOfInputs:Me,toggleDrawer:z,state:Pe,ProductFormData:de,handleImageChange:we,handleAdd:W,updatetrue:_,handleUpdateData:h,imagePreview:d,setImagePreview:v,setImg:S})]})}function Es({name:l,employeeDesigination:a,employeeMobile:L,clientLocation:V,product:m,id:F}){const _=Mt();return e.jsxs(j,{onClick:()=>_("/admin/project-data",{state:F}),sx:{bgcolor:"var(--product-card)",p:2,borderRadius:5,display:"flex",flexDirection:"row",alignItems:"center",gap:2},children:[e.jsx(j,{children:e.jsx("img",{src:xt,alt:"user-img",width:40})}),e.jsxs(j,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx("p",{style:{fontWeight:"bold"},children:l}),e.jsx("p",{children:a||m}),e.jsx("p",{children:L||V})]})]})}function Rl(){const[l,a]=t.useState([]),[L,V]=t.useState(!1);return t.useEffect(()=>{V(!0),ft().then(m=>{V(!1),console.log("data.responseData",m.responseData),a(m.responseData)}).catch(m=>{console.log(m),V(!1)})},[]),e.jsxs("div",{className:"client-page-section",children:[e.jsx("div",{className:"link-div",children:e.jsxs(xs,{to:"/admin/projects/add-projects",className:"link-to-manage-products",children:[e.jsx("img",{src:as,alt:"AddSquare"}),"Add Project"]})}),e.jsxs("div",{className:"client-inner-section",children:[e.jsx("h2",{children:" Project "}),e.jsx(j,{sx:{display:"flex",flexWrap:"wrap",gap:3,justifyContent:"flex-start"},children:L?e.jsx(j,{sx:{my:2,mx:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(bt,{color:"inherit"})}):l===null?e.jsxs(j,{sx:{my:2,mx:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(zt,{sx:{mx:"auto"},style:{fontSize:"40px"}}),e.jsx("p",{style:{textAlign:"center"},children:"No projects available"})]}):l==null?void 0:l.map((m,F)=>e.jsx(Es,{name:m.name,clientLocation:m.address1,product:m.product,id:m.id},F))})]})]})}function Bl(){const[l,a]=t.useState([]);return t.useEffect(()=>{const L=JSON.parse(localStorage.getItem("employees"))||[];a(L)},[]),e.jsxs("div",{className:"employes-page-section",children:[e.jsx("div",{className:"link-div",children:e.jsxs(xs,{to:"/admin/employees/add-employes",className:"link-to-manage-products",children:["   ",e.jsx("img",{src:as,alt:"AddSquare"}),"Add Employees"]})}),e.jsxs("div",{className:"employes-inner-section",children:[e.jsx("h2",{children:" Employees "}),e.jsx(j,{sx:{display:"flex",flexWrap:"wrap",gap:3,justifyContent:"flex-start"},children:l.map((L,V)=>e.jsx(Es,{name:L.name,employeeDesigination:L.designation,employeeMobile:L.mobile},V))})]})]})}function Fl({arrOfInputs:l,toggleDrawer:a,projectFormData:L,handleImageChange:V,handleAdd:m,setToggle:F,toggle:_,state:X}){const[H,Q]=t.useState([]),[J,se]=t.useState(null),[G,re]=t.useState([]),[d,v]=t.useState(null),[g,E]=t.useState(!0);t.useEffect(()=>{js().then(T=>{const p=T.map(D=>({value:D.id,label:D.name}));re(p)}).catch(T=>{console.log(T)}),Ps().then(T=>{console.log("work type:",T);const p=T.map(D=>({value:D.id,label:D.name}));console.log(p),Q(p)}).catch(T=>{console.log(T)})},[]);const M=()=>{console.log("first");const T=new FormData;T.append("name",L.project),T.append("client_name",L.name),T.append("work_type",J),T.append("phonenumber",L.mobile),T.append("email",L.email),T.append("address1",L.address1),T.append("address2",L.address2),T.append("country",d),T.append("postal_code",L.pinCode),T.append("has_plan_given",g),Os(T).then(p=>{console.log(p)}).catch(p=>{console.log(p)})},C=T=>e.jsxs(j,{sx:{width:700,mx:5,my:3},role:"presentation",onClick:a(T,!0),onKeyDown:a(T,!0),children:[e.jsx(j,{sx:{my:3},children:e.jsx("h2",{children:" Create project "})}),e.jsxs(Ye,{container:!0,spacing:2,children:[l==null?void 0:l.map((p,D)=>e.jsx(Ye,{item:!0,xs:6,md:6,children:e.jsx(le,{handleChange:p.handleChange,selectedValue:p.value,label:p.label,intputName:p.intputName,type:p.type,inputOrSelect:p.inputOrSelect,options:p.options,value:p.value,disabled:p.disabled})},D)),e.jsxs(Ye,{xs:6,md:6,sx:{pt:"16px",pl:"16px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsx("p",{className:"input-name",children:"Work Type"}),e.jsx(Ze,{sx:{display:"inline-block","& input":{width:"100%",border:"none",bgcolor:"var(--inputbg-color)",color:p=>p.palette.getContrastText(p.palette.background.paper)}},id:"custom-input-demo",options:H,onChange:(p,D)=>se(D.value),componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:p=>e.jsx("div",{ref:p.InputProps.ref,children:e.jsx("input",{type:"text",...p.inputProps,style:{height:"42px",borderRadius:10,width:"99%",paddingLeft:"10px"}})})})]}),e.jsxs(Ye,{xs:6,md:6,sx:{pt:"16px",pl:"16px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsx("p",{className:"input-name",children:"Country"}),e.jsx(Ze,{sx:{display:"inline-block","& input":{width:"100%",border:"none",bgcolor:"var(--inputbg-color)",color:p=>p.palette.getContrastText(p.palette.background.paper)}},id:"custom-input-demo",options:G,onChange:(p,D)=>v(D.value),componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:p=>e.jsx("div",{ref:p.InputProps.ref,children:e.jsx("input",{type:"text",...p.inputProps,style:{height:"42px",borderRadius:10,width:"99%",paddingLeft:"10px"}})})})]}),e.jsx(Ye,{item:!0,xs:6,md:12,children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"start"},children:[e.jsxs("div",{children:[e.jsx("h5",{children:" Has plan given?"}),e.jsxs(gs,{value:_?"true":"false",exclusive:!0,onChange:(p,D)=>E(D==="true"),"aria-label":"text alignment",children:[e.jsx(Et,{value:"true","aria-label":"left aligned",sx:{fontSize:"12px",borderRadius:"35px",width:"90px",height:"35px",textAlign:"center",marginTop:"5px",marginLeft:"10px","&.Mui-selected, &.Mui-selected:hover":{color:"white",backgroundColor:"#8cdb7e"}},children:e.jsx("p",{children:"yes"})}),e.jsx(Et,{value:"false","aria-label":"centered",sx:{fontSize:"12px",borderRadius:"35px",width:"90px",height:"35px",textAlign:"center",marginTop:"5px",marginLeft:"10px","&.Mui-selected, &.Mui-selected:hover":{color:"white",backgroundColor:"#8cdb7e"}},children:e.jsx("p",{children:"no"})})]})]}),_&&e.jsxs(ae,{disableRipple:!0,sx:{mt:2,color:"var(--black-button)",textTransform:"none","&:hover":{background:"transparent"}},component:"label",children:[e.jsx("img",{src:xt,alt:"add ing"}),e.jsx(Ve,{variant:"string",sx:{pl:1},children:"Add Photo"}),e.jsx("input",{type:"file",hidden:!0,onChange:V})]})]})}),e.jsx(ae,{type:"submit",variant:"contained",color:"primary",sx:{mt:1,fontWeight:"bold",textTransform:"none",bgcolor:"var(--black-button)","&:hover":{background:"var(--button-hover)"}},onClick:M,children:"Add project"})]})]});return e.jsx(bs,{sx:{"& .MuiDrawer-root":{position:"absolute"},"& .MuiPaper-root":{position:"absolute"}},anchor:"right",open:X.right,onClose:a("right",!1),className:"drawer-component",children:C("right")})}function _l({toggleDrawer:l,state:a}){Mt();const[L,V]=t.useState([]),[m,F]=t.useState([]),[_,X]=t.useState(),[H,Q]=t.useState("None");t.useState(null);const[J,se]=t.useState(0),[G,re]=t.useState(0),[d,v]=t.useState([]),[g,E]=t.useState({productname:"",unit:"",amount:"",hsn:""}),[M,C]=t.useState(0),[T,p]=t.useState([]),[D,te]=t.useState([]),[xe,Ne]=t.useState(""),[he,ke]=t.useState(null),de=z=>{const A=z.target.files[0];ke(A)},Oe=()=>{yt().then(z=>{console.log("tax:",z);const A=z.map(h=>({value:h.id,label:h.name?`${h.name} ${h.percentage}`:"none",taxlabel:h.percentage,id:h.id}));console.log(A),te(A)}).catch(z=>{console.log(z)})},ge=()=>{lt().then(z=>{console.log("getProductsData:",z);const A=z.responseData.map(h=>({value:h.id,label:h.name,rate:h.rate,unit:h.unit}));console.log(A),V(A)}).catch(z=>{console.log(z)})},S=()=>{ft().then(z=>{console.log("getProjectData:",z);const A=z.responseData.map(h=>({value:h.id,label:` ${h.name} (${h.client_name})`}));console.log(A),F(A)}).catch(z=>{console.log(z)})},y=()=>{Tt().then(z=>{console.log("units:",z);const A=z==null?void 0:z.responseData.map(h=>({value:h.id,label:h.name}));A.unshift({value:0,label:"None"}),console.log(A),p(A)}).catch(z=>{console.log(z)})};t.useEffect(()=>{y(),S(),ge(),Oe()},[]);const ne=z=>{console.log(z.target.value),Ne(z.target.value)},be=[{intputName:"quantity",label:"Quantity",type:"number",value:G},{intputName:"amount",label:"Amount",type:"number",value:J,disabled:"disabled"}],we=[{intputName:"productname",label:" Product Name",type:"text",value:g.productname},{handleChange:ne,intputName:"unit",label:"Unit",inputOrSelect:"select",options:T},{intputName:"tax",label:"Tax",type:"number",inputOrSelect:"select",options:D},{intputName:"hsn",label:"HSN",type:"text"},{intputName:"amount",label:"  Amount",type:"text",value:g.amount}],ue=z=>{z.stopPropagation(),alert("You clicked delete!")},Ge=z=>{console.log("handleRightInputChange",z.target);const{name:A,value:h}=z.target;A?E(N=>({...N,[A]:h})):C(z.target.value)},De=(z,A)=>{console.log("newValue",A.value),Q(A)},We=(z,A)=>{console.log(A),X(A)},Ee=z=>{console.log(z.target.value),re(z.target.value);const A=H.rate*z.target.value;se(A),console.log(A)},Me=()=>{const z={productData:H,qty:G,totalAmout:(H==null?void 0:H.rate)*G};v(A=>[...A,z]),re(0),Q("None"),se(0)},Pe=async()=>{try{const z=d.map(W=>({quantity:parseInt(W.qty),unit:W.productData.unit,product_id:W.productData.value})),A={product:{project_id:_==null?void 0:_.value,hsn:g.hsn,rate:parseFloat(g.amount),tax_rate:{id:M},tax_id:M,is_master_product:!0,name:g.productname,unit_id:xe},materials_used:z},h=new FormData;h.append("project_id",A.product.project_id),h.append("hsn",A.product.hsn),h.append("rate",A.product.rate),h.append("tax_rate",JSON.stringify(A.product.tax_rate)),h.append("tax_id",A.product.tax_id),h.append("is_master_product",A.product.is_master_product),h.append("name",A.product.name),h.append("unit_id",A.product.unit_id),h.append("materials_used",JSON.stringify(A.materials_used)),h.append("image",he);const N=await Fs(h);console.log("stockJournalCreateAPI",N),E({productname:"",unit:"",amount:"",hsn:""}),v([]),Q("None"),X("None"),C(0)}catch(z){console.error("Error creating product:",z)}},qe=z=>e.jsx(j,{sx:{width:800,mx:5,my:3},role:"presentation",onClick:l(z,!0),onKeyDown:l(z,!0),children:e.jsxs(j,{className:"stockjournl-page",children:[e.jsx("h2",{children:" Stock Journal"}),e.jsx("h4",{children:" Enter the product details to create a new product "}),e.jsxs(j,{sx:{display:"flex",gap:2},children:[e.jsxs(j,{className:"input-box",sx:{width:"30% !important"},children:[e.jsxs(j,{sx:{width:"100%"},children:[e.jsx("p",{className:"product-name",children:"product"}),e.jsx(Ze,{sx:{display:"inline-block","& input":{width:"100%",border:"none",bgcolor:"var(--inputbg-color)",color:A=>A.palette.getContrastText(A.palette.background.paper)}},id:"custom-input-demo",options:L,value:H,onChange:De,componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:A=>e.jsx("div",{ref:A.InputProps.ref,children:e.jsx("input",{type:"text",...A.inputProps,style:{height:"10xp"}})})})]}),be.map((A,h)=>e.jsx(Ye,{item:!0,xs:6,md:4,children:e.jsx(le,{handleChange:Ee,state:A.state,label:A.label,type:A.type,intputName:A.intputName,inputOrSelect:A.inputOrSelect,options:A.options,value:A.value,disabled:A.disabled})},h)),e.jsx(ae,{type:"submit",variant:"contained",color:"primary",sx:{mt:"2rem",fontWeight:"bold",textTransform:"none",bgcolor:"var(--black-button)","&:hover":{background:"var(--button-hover)"}},onClick:Me,children:"Add Product"})]}),e.jsxs(j,{className:"input-box",children:[e.jsxs(j,{sx:{display:"flex",gap:5},children:[e.jsxs(j,{sx:{width:"100%"},children:[e.jsx("p",{className:"product-name",children:"Project"}),e.jsx(Ze,{sx:{display:"inline-block","& input":{width:"100%",border:"none",bgcolor:"var(--inputbg-color)",color:A=>A.palette.getContrastText(A.palette.background.paper)}},id:"custom-input-demo",options:m,value:_,onChange:We,componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:A=>e.jsx("div",{ref:A.InputProps.ref,children:e.jsx("input",{type:"text",...A.inputProps,style:{height:"10xp"}})})}),we.map((A,h)=>e.jsx(le,{handleChange:A.handleChange||Ge,state:A.state,label:A.label,type:A.type,intputName:A.intputName,inputOrSelect:A.inputOrSelect,options:A.options},h))]}),e.jsxs(ae,{className:"image-add-box",disableRipple:!0,sx:{bgcolor:"var(--inputbg-color)",mt:3,ml:2,color:"var(--black-button)",textTransform:"none"},component:"label",children:[e.jsx("img",{src:xt,alt:"add ing"}),e.jsx(Ve,{variant:"string",sx:{pl:1},children:"Upload product image"}),e.jsx("input",{type:"file",hidden:!0,onChange:de})]})]}),e.jsxs(ae,{type:"submit",variant:"contained",color:"primary",sx:{mt:"2rem",fontWeight:"bold",textTransform:"none",bgcolor:"var(--black-button)","&:hover":{background:"var(--button-hover)"}},onClick:Pe,children:[" ","Create"]})]})]}),e.jsx("p",{className:"added-item",children:" Added Items"}),e.jsx(j,{sx:{mt:1,pb:2,py:2,bgcolor:"var(--bgwhite)",borderRadius:5,msScrollRails:"none",gap:1},children:e.jsx(j,{sx:{maxHeight:260,overflowY:"auto",width:"100%",display:"flex",flexWrap:"wrap"},children:d.length===0?e.jsxs(j,{sx:{my:2,mx:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(zt,{sx:{mx:"auto"},style:{fontSize:"40px"}}),e.jsx("p",{style:{textAlign:"center"},children:"No products available"})]}):d.map((A,h)=>(console.log("arr data",A.productData),e.jsx(j,{item:!0,sx:{px:"10px",py:1},children:e.jsx(Ht,{handleDelete:ue,heading:A.productData.label,image:A.img,qty:A.qty,unit:A.productData.unit,rate:A.totalAmout,amount:A.amount})},h)))})})]})});return e.jsx(bs,{sx:{"& .MuiDrawer-root":{position:"absolute"},"& .MuiPaper-root":{position:"absolute"}},anchor:"right",open:a.right,onClose:l("right",!1),className:"drawer-component",children:qe("right")})}const El={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"0px solid #000",borderRadius:"10px",boxShadow:24,p:4};function Ml(){var ys,fs,vs;const l=t.useRef();t.useRef().current,l.current;const[L,V]=t.useState([]),[m,F]=t.useState([]),[_,X]=t.useState([]),[H,Q]=t.useState(""),[J,se]=t.useState(""),[G,re]=t.useState([""]),[d,v]=t.useState([""]),[g,E]=t.useState({}),[M,C]=t.useState({}),[T,p]=t.useState({quantity:"",amount:"",description:"",hardware:"",installation:"",accessories:""}),[D,te]=t.useState({quoteamount:"",completiontime:"",startdate:""}),[xe,Ne]=t.useState({}),[he,ke]=t.useState(1),[de,Oe]=t.useState([]),[ge,S]=t.useState(),[y,ne]=t.useState(),[be,we]=t.useState(!1),[ue,Ge]=t.useState({name:"",email:"",mobile:"",address1:"",address2:"",pinCode:"",worktype:"",country:"",project:""}),[De,We]=t.useState(!0),[Ee,Me]=t.useState(!0),[Pe,qe]=t.useState({right:!1}),[z,A]=t.useState({right:!1}),[h,N]=t.useState([]),[W,Re]=t.useState({name:"",quantity:"",rate:0,hsn:""}),[k,c]=t.useState([]),[O,ve]=t.useState([]),[je,Ce]=t.useState([]),[Fe,Be]=t.useState({}),[Y,Xe]=t.useState(""),[fe,et]=t.useState(""),[ht,P]=t.useState(""),[Z,pe]=t.useState(null),[ee,me]=t.useState([]),He=()=>{yt().then(n=>{console.log("tax:",n);const i=n.map(f=>({value:f.percentage,label:f.name?`${f.name} ${f.percentage}`:"none",taxlabel:f.percentage,id:f.id}));console.log(i),me(i)}).catch(n=>{console.log(n)})},Ke=()=>{As().then(n=>{var f,Ae;console.log("category:",(f=n.data)==null?void 0:f.responseData);const i=(Ae=n.data)==null?void 0:Ae.responseData.map(Ft=>({value:Ft.id,label:`${Ft.name}`}));i.unshift({value:0,label:"None"},{value:-2,label:"Add"}),console.log("categoryOptions",i),c(i)}).catch(n=>{console.log(n),c({value:0,label:"None"},{value:-2,label:"Add"})})},tt=()=>{Tt().then(n=>{console.log("units:",n);const i=n==null?void 0:n.responseData.map(f=>({value:f.id,label:f.name}));i.unshift({value:0,label:"None"}),console.log("unitsdData",i),Ce(i)}).catch(n=>{console.log(n)})};t.useEffect(()=>{He(),Ke(),tt()},[]);const _e=n=>{const{name:i,value:f}=n.target;console.log("name,value",i,f),Ge(Ae=>({...Ae,[i]:f}))},st=(n,i)=>f=>{console.log(f),console.log("Toggle Drawer:",n,i),!(f&&f.type==="keydown"&&(f.key==="Tab"||f.key==="Shift"))&&qe({...Pe,[n]:i})},Je=(n,i)=>f=>{console.log(f),console.log("Toggle Drawer:",n,i),!(f&&f.type==="keydown"&&(f.key==="Tab"||f.key==="Shift"))&&A({...z,[n]:i})},ut=n=>{const i=m.find(f=>f.value==n.target.value);console.log("event.target",n.target.value,i),i.value==-2?(console.log("event.target",n.target.value.value,i.value),console.log(i.value==-2),Je("right",!0)()):Ne({selectedOptionObject:i})},jt=[{handleChange:_e,intputName:"project",label:"Project Name",type:"text",value:ue.project},{handleChange:_e,intputName:"name",label:"Client Name",type:"text",value:ue.name},{handleChange:_e,intputName:"email",label:"Email",type:"email",value:ue.email},{handleChange:_e,intputName:"mobile",label:"Mobile",type:"tel",value:ue.mobile},{handleChange:_e,intputName:"address1",label:"Address 1",type:"text",value:ue.address1},{handleChange:_e,intputName:"address2",label:"Address 2",type:"text",value:ue.address2},{handleChange:_e,intputName:"pinCode",label:"Pin Code",type:"text",value:ue.pinCode}],b=()=>{alert("add")},K=n=>{const i=n.target.files[0];se(i)},w=()=>we(!1),ye=()=>{ms().then(n=>{console.log("clientData:",n);const i=n.responseData.map(f=>({value:f.id,label:f.name,project:f.project_name}));i.unshift({value:-2,label:"Add"}),i.unshift({value:-1,label:"None"}),console.log(i),V(i)}).catch(n=>{console.log("err",n)}),V([{value:-1,label:"None"},{value:-2,label:"Add"}])},Te=()=>{ft().then(n=>{console.log("getProjectData:",n);const i=n.responseData.map(f=>({value:f.id,label:f.name}));i.unshift({value:-2,label:"Add"}),i.unshift({value:-1,label:"None"}),console.log(i),ve(i)}).catch(n=>{console.log(n)})},nt=()=>{lt().then(n=>{console.log("productGetAPI:",n);const i=n.responseData.map(f=>({value:f.id,label:f.name,unit:f.unit,amount:f.rate,image:f.image,unit_id:f.unit_id}));i.unshift({value:-1,label:"None"}),i.unshift({value:-2,label:"Add"}),console.log("productsData",n.responseData),F(i)}).catch(n=>{console.log(n)}),F([{value:-1,label:"None"},{value:-2,label:"Add"}])},rt=()=>{As().then(n=>{console.log("CatogarytGetAPI:",n);const i=n.responseData.map(f=>({value:f.id,label:f.name,unit_id:f.unit_id}));i.unshift({value:-1,label:"None"}),i.unshift({value:-2,label:"Add"}),console.log("productsData",n.responseData),F(i)}).catch(n=>{console.log(n)}),F([{value:-1,label:"None"},{value:-2,label:"Add"}])},dt=()=>{lt().then(n=>{console.log("productGetAPI:",n);const i=n.responseData.filter(Ae=>Ae.is_master_product===!1),f=i.map(Ae=>({value:Ae.id,label:Ae.name,unit:Ae.unit,amount:Ae.rate,image:Ae.image,unit_id:Ae.unit_id,is_master_product:Ae.is_master_product}));f.unshift({value:-1,label:"None"}),f.unshift({value:-2,label:"Add"}),console.log("productsData",i),X(f)}).catch(n=>{console.log(n)}),X([{value:-1,label:"None"},{value:-2,label:"Add"}])};t.useEffect(()=>{rt(),dt(),nt(),Te(),ye()},[]);const it=n=>{const{name:i,value:f}=n.target;console.log("name, value",i,f),p({...T,[i]:f})},at=()=>{var i,f,Ae;console.log("firsttest");const n={...T,accessorieslist:de,product:`${(i=M.selectedOptionObject)==null?void 0:i.value}`,productname:(f=M.selectedOptionObject)==null?void 0:f.label,productunit:(Ae=M.selectedOptionObject)==null?void 0:Ae.unit,category:`${ge==null?void 0:ge.value}`};console.log("handleAddData",M),N([...h,n])},ct=n=>{const{name:i,value:f}=n.target;console.log("first",i,f),te(Ae=>({...Ae,[i]:f}))},Nt=(n,i)=>{console.log(n);const f=[...G];f[n]="â€¢ "+i,re(f),console.log(f)},vt=n=>{console.log("e.target",n.target.value==="-2"),n.target.value==="-2"&&st("right",!0)();const i=L.find(f=>f.value==n.target.value);console.log("event.target",n.target.value,i),E({selectedOptionObject:i})},Ct=(n,i)=>{console.log(n);const f=[...d];f[n]="â€¢ "+i,v(f),console.log(f)},s=()=>{re([...G,""])},u=()=>{v([...d,""])};t.useEffect(()=>{console.log(G)},[G]);const x=n=>{console.log("e.target.files",n.target.files);const i=n.target.files,f=Array.from(i);pe(f)},R=async()=>{var n,i;if(console.log("selectedAccessoryselectedOptionObject",xe.selectedOptionObject),((n=xe.selectedOptionObject)==null?void 0:n.value)!==""){const f={accessories:`${(i=xe.selectedOptionObject)==null?void 0:i.value}`,name:xe.selectedOptionObject.label,quantity:he,price:`${xe.selectedOptionObject.amount}`,unit:xe.selectedOptionObject.unit,image:xe.selectedOptionObject.image,unit_id:xe.selectedOptionObject.unit_id};console.log("accessory",[...de,f]),Oe([...de,f]),Ne(),ke(1)}},ce=n=>{const i=m.find(f=>f.value==n.target.value);i.value==-2?(console.log("event.target",n.target.value.value,i.value),console.log(i.value==-2),Je("right",!0)()):C({selectedOptionObject:i})},o=n=>{if(n.target.value==-2)we(!0),S({});else{w();const i=k.find(f=>f.value==n.target.value);S(i)}},I=n=>{ne(n.target.value)},q=()=>{var i,f;const n={project_id:(i=g==null?void 0:g.selectedOptionObject)==null?void 0:i.value,name:y};(f=g==null?void 0:g.selectedOptionObject)!=null&&f.value?Nl(n).then(Ae=>{console.log(Ae)}).catch(Ae=>{console.log(Ae)}):alert("Client not Selected")},U=[{handleChange:o,intputName:"AreaOfWorkCategory",label:"Area Of Work / Category",inputOrSelect:"select",options:k},{intputName:"productname",label:" Product Name",inputOrSelect:"select",options:m},{intputName:"amount",label:" Amount",type:"number"},{intputName:"description",label:"Description",type:"text"},{intputName:"hardware",label:" Hardware",type:"number"},{intputName:"installation",label:" Installation",type:"number"},{intputName:"accessories",label:" Accessories",type:"number"},{handleChange:ut,intputName:" accessorieslist",label:" Accessories list",inputOrSelect:"select",value:xe,options:_}],Se=[{handleChange:vt,intputName:"clientname",label:"Client Name",inputOrSelect:"select",options:L},{intputName:"projectdetails",label:"Project Details",value:(ys=g==null?void 0:g.selectedOptionObject)==null?void 0:ys.project,disabled:"disabled"},{handleChange:ct,intputName:"quoteamount",label:" Quote amount",type:"text"},{handleChange:ct,intputName:"completiontime",label:"Completion Time",type:"date"},{handleChange:ct,intputName:"startdate",label:"Start date",type:"date"}],ot=n=>{n.stopPropagation(),alert("You clicked delete!")},St=os(e.jsxs("div",{className:"quatationgenerator",id:"quatationgenerator",style:{fontSize:"13px",fontFamily:"'Roboto'",fontWeight:400,textAlign:"justify"},children:[e.jsx("img",{src:"https://res.cloudinary.com/dczou8g32/image/upload/v1714668042/DEV/jw8j76cgw2ogtokyoisi.png",alt:"logo",style:{marginLeft:"20px",height:"90px",paddingBottom:"50px"}}),e.jsxs("div",{style:{marginLeft:"50px"},children:[e.jsx("p",{style:{paddingBottom:"5px"},children:"To,"}),e.jsx("p",{children:(fs=g==null?void 0:g.selectedOptionObject)==null?void 0:fs.label})]}),e.jsxs("div",{style:{width:"510px",paddingBottom:"50px"},children:[e.jsx("p",{style:{textAlign:"end",paddingBottom:"5px"},children:"QUOTATION NO: QT / 24-25/020"}),e.jsxs("p",{style:{textAlign:"end"},children:["Date: ",new Date().toLocaleDateString()," "]})]}),e.jsxs("div",{style:{marginLeft:"50px",width:"500px",paddingBottom:"200px"},children:[e.jsxs("p",{style:{paddingBottom:"5px",lineHeight:"22px",textAlign:"justify",fontFamily:"'Roboto'",fontWeight:400},children:[" ","We thank you for giving us an opportunity to quote for the mentioned subject. With reference to your enquiry, please find."]}),e.jsx("p",{style:{paddingBottom:"5px"},children:"Sir,"}),e.jsx("p",{style:{paddingBottom:"5px",lineHeight:"22px",fontFamily:"'Roboto'",fontWeight:400},children:"Biltree was founded on the principle of providing quality work with an emphasis on cost- effectiveness and the highest quality work for its prospective clients in the quickest way possible. Our strength is in achieving recognition for our ability to analyze the client's requirements in collaboration with architects and consultants, as well as developing an understanding of architectural and interior concepts. We specialize in providing solutionsâ€™ that blend aesthetically with interiors and exteriors, without sacrificing any functional attributes. As a company, our goal is to ensure customer satisfaction with the quality of our aesthetic. We also intend to achieve fluency from design to design and installation. We will maintain our loyalty and plough to build good and fair relationships with our clients, founded on trust and loyalty."})]}),e.jsxs("div",{style:{marginLeft:"50px",width:"500px",textAlign:"center"},children:[e.jsxs("h5",{style:{paddingBottom:"10px"},children:["BILTREE -1ST FLOOR MANGHAT ARCADE, KALOOR KADAVANTRA ROAD, KADAVANTRA -20"," "]}),e.jsx("h5",{children:"PHONE: +91 9447519770 "})]})]})),At=async()=>{const n=document.querySelector("#ALLPRODUCTtable");document.querySelector("#exclusion-terms-and-condition");const i=new mt("p","pt","a4",!0);i.addFileToVFS("OPTITimes-Roman.otf","../../assets/Fonts/OPTITimes-Roman.otf"),i.addFont("OPTITimes-Roman.otf","OPTITimesRomanfont","normal"),i.setFont("OPTITimesRomanfont"),i.html(St,{callback:async()=>{if(i.addPage(),i.addImage("https://res.cloudinary.com/dczou8g32/image/upload/v1714668042/DEV/jw8j76cgw2ogtokyoisi.png",30,30,100,60),i.autoTable({html:n,startY:100,useCss:!0,theme:"grid",headStyles:{fillColor:"yellow",textColor:"black",lineWidth:2,lineColor:"black"},columnStyles:{0:{cellWidth:100},1:{cellWidth:335},2:{cellWidth:80}},styles:{lineWidth:1,lineColor:"black",cellPadding:5,fontFamily:"Inter",fontSize:10},didDrawCell:async function(pt){var Zt,Jt,Yt,Xt;if(console.log("didDrawCell",(Zt=pt==null?void 0:pt.cell)==null?void 0:Zt.raw),pt.column.index===2&&pt.cell.section==="body"){var is=pt.cell.raw;console.log("didDrawCell2",is.getElementsByTagName("td"));var Kt=35,Qt=(Xt=(Yt=(Jt=pt==null?void 0:pt.cell.raw.parentElement)==null?void 0:Jt.getElementsByTagName("td")[2])==null?void 0:Yt.getElementsByTagName("img")[0])==null?void 0:Xt.src;console.log("img.src",Qt),i.addImage(Qt,pt.cell.x+5,pt.cell.y+5,Kt,Kt)}}}),Z){const pt=Z.map(Gt=>URL.createObjectURL(Gt));i.addPage();const is=async Gt=>{const cs=await(await fetch(Gt)).blob(),ps=new FileReader;return new Promise(zs=>{ps.onloadend=()=>{zs(ps.result)},ps.readAsDataURL(cs)})},Kt=575,Qt=820,Zt=10,Jt=10,Yt=0,Xt=0;for(const[Gt,Cs]of pt.entries()){const cs=await is(Cs);i.addImage(cs,"png",Yt+Zt,Xt+Jt,Kt,Qt),Gt!==pt.length-1&&i.addPage()}}console.log("inputsExclusion",d[0]!=="",d.length),(d[0]!==""||G[0]!=="")&&i.addPage(),(d[0]!==""||G[0]!=="")&&i.addImage("https://res.cloudinary.com/dczou8g32/image/upload/v1714668042/DEV/jw8j76cgw2ogtokyoisi.png",30,0,100,50);const Ae=555,Ft=40,$t=Ae-2*Ft;i.setFont("Inter"),i.setFontSize(15),d[0]!==""&&i.text("EXCLUSIONS ",Ft,80,{maxWidth:$t,lineHeightFactor:1.5}),i.setFontSize(12),console.log("inputsExclusion",d.length);const qs=d.join(`
`);i.text(`${qs}`,50,100,{maxWidth:$t,lineHeightFactor:1.5,align:"left"}),i.setFontSize(15),console.log("TERMS AND CONDITIONS",G[0]=="",G.length),G[0]!==""&&i.text("TERMS AND CONDITIONS",Ft,d.length*(d.length<5?25:20)+95,{maxWidth:$t,lineHeightFactor:1.5}),i.setFontSize(12);const Gs=G.join(`
`);i.text(`${Gs}`,50,d.length*(d.length<5?25:20)+115,{maxWidth:$t,lineHeightFactor:1.5,align:"left"}),i.setFont("Inter","bold"),i.setFontSize(10),i.text("BILTREE - 1ST FLOOR MANGHAT ARCADE , KALOOR KADAVANTRA ROAD , KADAVANTRA - 20",65,660,{maxWidth:"1000",lineHeightFactor:1.5,align:"left"}),i.text("PHONE : + 91 9447519770",245,700,{maxWidth:"1000",lineHeightFactor:1.5,align:"left"});const Hs=i.output("bloburl");window.open(Hs,"_blank")}})},r=()=>{var f;console.log(h);const n={id:(f=g==null?void 0:g.selectedOptionObject)==null?void 0:f.value,client:g==null?void 0:g.selectedOptionObject.project,quote_amount:D.quoteamount,completation_time:D.completiontime,start_date:D.startdate,terms_and_conditions:G,product_info:h,exclusion:d,image:Z[0],approved:!1};console.log("quotationData",h);const i=new FormData;i.append("id",n.id),i.append("client",n.client),i.append("quote_amount",n.quote_amount),i.append("completation_time",n.completation_time),i.append("start_date",n.start_date),i.append("terms_and_conditions",JSON.stringify(n.terms_and_conditions)),i.append("product_info",JSON.stringify(n.product_info)),i.append("exclusion",JSON.stringify(n.exclusion)),i.append("image",n.image),i.append("approved",n.approved),vl(i).then(Ae=>{console.log(Ae)}).catch(Ae=>{console.log(Ae)})},B=h.reduce((n,i)=>{const f=parseInt(i.amount||0)+parseInt(i.hardware||0)+parseInt(i.installation||0)+parseInt(i.accessories||0);return n+f},0),$=n=>{Xe(n.target.value),console.log(n.target.value)},oe=n=>{const{name:i,value:f}=n.target;Re(Ae=>({...Ae,[i]:f}))},Ue=n=>{const i=n.target.files[0];Q(i)},kt=n=>{console.log(n.target.value);const i=ee.find(f=>f.taxlabel==n.target.value);console.log(i),Be(i)},Lt=n=>{Xe(n.target.value),console.log(n.target.value)},Ot=n=>{et(n.target.value),console.log(n.target.value)},wt=n=>{P(n.target.value),console.log(n.target.value)},Bt=()=>{const n=new FormData;n.append("name",W==null?void 0:W.name),n.append("hsn",W==null?void 0:W.hsn),n.append("rate",parseInt(W.rate)),n.append("quantity",parseInt(W.quantity)),n.append("unit",Y),n.append("projectid",parseInt(fe)),n.append("is_product",De),n.append("category_id",ht),n.append("tax_rate",Fe.id),n.append("image",H),Pt(n).then(i=>{i.status===200&&(Re({name:"",qate:"",quantity:"",rate:"",taxvalue:"",hsn:""}),Xe(""),Be(""),alert("Product added successfully"))}).catch(i=>{console.log(i),alert("Problem in adding product")})},Ut=[{handleChange:oe,intputName:"name",label:" Product Name",type:"text"},{handleChange:oe,intputName:"rate",label:"Rate",type:"number"},{handleChange:oe,intputName:"quantity",label:"Quantity",type:"number"},{handleChange:kt,intputName:"taxrate",label:"Tax Rate",inputOrSelect:"select",options:ee},{intputName:"taxvalue",label:" Tax Value",value:parseFloat(W.rate||0)*parseFloat(W.quantity||0)*(parseFloat((vs=Fe.value)==null?void 0:vs.replace("%",""))||0)/100,disabled:"disabled"},{handleChange:oe,intputName:"hsn",label:"HSN",type:"text"},{handleChange:Lt,intputName:"unit",label:"Unit",inputOrSelect:"select",options:je},{handleChange:Ot,intputName:"project",label:"Projects",inputOrSelect:"select",options:O},{handleChange:wt,intputName:"categery",label:"Categerys",inputOrSelect:"select",options:k}];return e.jsxs(j,{className:"quotation-generator-page",children:[e.jsx("h2",{children:" Quotation Generator"}),e.jsx("h4",{children:" Enter the product details to create a new quotation "}),e.jsxs(j,{sx:{display:"flex",gap:2},children:[e.jsxs(j,{className:"input-box",children:[e.jsxs(j,{sx:{display:"flex",gap:2},children:[e.jsx(j,{sx:{width:"100%"},children:Se.slice(0,3).map((n,i)=>e.jsx(le,{handleChange:n.handleChange,state:n.state,label:n.label,type:n.type,intputName:n.intputName,inputOrSelect:n.inputOrSelect,options:n.options,disabled:n.disabled,value:n.value},i))}),e.jsxs(j,{sx:{width:"100%"},children:[Se.slice(3).map((n,i)=>e.jsx(le,{handleChange:n.handleChange,state:n.state,label:n.label,type:n.type,intputName:n.intputName,inputOrSelect:n.inputOrSelect,options:n.options},i)),e.jsxs(ae,{disableRipple:!0,sx:{mt:3,textTransform:"none",color:"var(--black-button)","&:hover":{background:"transparent"}},component:"label",children:[e.jsx("img",{src:xt,alt:"add img"}),e.jsx(Ve,{variant:"string",sx:{pl:1},children:"Add plan"}),e.jsx("input",{type:"file",multiple:!0,hidden:!0,onChange:x})]})]})]}),e.jsxs(j,{sx:{},children:[e.jsx(Ve,{className:"Terms-label",variant:"string",sx:{pl:1},children:"Exclusion"}),e.jsxs(j,{sx:{display:"flex",gap:1,alignItems:"end"},children:[e.jsx(j,{sx:{my:1,display:"flex",flexDirection:"column",gap:1,width:"100%"},children:d.map((n,i)=>e.jsx(le,{handleChange:f=>Ct(i,f.target.value),label:n.label,type:n.type,intputName:n.intputName},i))}),e.jsx(ae,{variant:"contained",color:"primary",sx:{height:"45px",my:1,fontWeight:"bold",textTransform:"none",bgcolor:"var(--black-button)","&:hover":{background:"var(--button-hover)"}},onClick:u,children:"Add"})]})]}),e.jsxs(j,{children:[e.jsx(Ve,{className:"Terms-label",variant:"string",sx:{pl:1},children:"Add Terms and Conditions"}),e.jsxs(j,{sx:{display:"flex",gap:1,alignItems:"end"},children:[e.jsx(j,{sx:{my:1,display:"flex",flexDirection:"column",gap:1,width:"100%"},children:G.map((n,i)=>e.jsx(le,{handleChange:f=>Nt(i,f.target.value),label:n.label,type:n.type,intputName:n.intputName},i))}),e.jsx(ae,{variant:"contained",color:"primary",sx:{height:"45px",my:1,fontWeight:"bold",textTransform:"none",bgcolor:"var(--black-button)","&:hover":{background:"var(--button-hover)"}},onClick:s,children:"Add"})]})]}),e.jsx(j,{sx:{display:"flex"}}),e.jsx(j,{sx:{display:"flex",justifyContent:"flex-start",fontWeight:"700"},children:e.jsx("p",{style:{cursor:"pointer"},onClick:At,children:"Preview"})})]}),e.jsxs(j,{className:"input-box",sx:{gap:2},children:[e.jsx(j,{sx:{display:"flex",gap:2},children:U.slice(0,1).map((n,i)=>e.jsx(le,{handleChange:n.handleChange,label:n.label,type:"text",value:n.value,intputName:n.intputName,inputOrSelect:n.inputOrSelect,options:n.options},i))}),e.jsxs(j,{sx:{display:"flex",gap:2},children:[U.slice(1,2).map((n,i)=>e.jsx(le,{handleChange:ce,label:n.label,type:n.type,inputName:n.inputName,inputOrSelect:n.inputOrSelect,options:n.options},i)),U.slice(2,3).map((n,i)=>e.jsx(le,{handleChange:f=>it(f,n.intputName),label:n.label,type:n.type,value:T[n.intputName],intputName:n.intputName,inputOrSelect:n.inputOrSelect,options:n.options},i))]}),e.jsx(j,{sx:{display:"flex",gap:2},children:U.slice(3,4).map((n,i)=>e.jsx(le,{handleChange:f=>it(f,n.intputName),label:n.label,type:n.type,value:T[n.intputName],intputName:n.intputName,inputOrSelect:n.inputOrSelect,options:n.options},i))}),e.jsx(j,{sx:{display:"flex",gap:2},children:U.slice(4,7).map((n,i)=>e.jsx(le,{handleChange:f=>it(f,n.intputName),label:n.label,type:n.type,value:T[n.intputName],intputName:n.intputName,inputOrSelect:n.inputOrSelect,options:n.options},i))}),e.jsxs(j,{sx:{display:"flex",alignItems:"center",gap:2},children:[U.slice(7,9).map((n,i)=>{var f;return console.log(n),e.jsx(le,{handleChange:n.handleChange,label:n.label,type:n.type,value:(f=n==null?void 0:n.selectedOptionObject)==null?void 0:f.value,intputName:n.intputName,inputOrSelect:n.inputOrSelect,options:n.options},i)}),e.jsx(ae,{type:"submit",variant:"contained",color:"primary",sx:{mt:3,fontWeight:"bold",textTransform:"none",bgcolor:"var(--black-button)","&:hover":{background:"var(--button-hover)"}},onClick:()=>{R()},children:"Add"})]}),e.jsx(j,{sx:{display:"flex",justifyContent:"space-between"},children:e.jsx(ae,{type:"submit",variant:"contained",color:"primary",sx:{mt:1,fontWeight:"bold",textTransform:"none",bgcolor:"var(--black-button)","&:hover":{background:"var(--button-hover)"}},onClick:at,children:"Add Product"})})]}),e.jsx(j,{sx:{pb:2,py:2,bgcolor:"var(--bgwhite)",borderRadius:5,msScrollRails:"none",gap:1,display:"flex",flexFlow:"row wrap"},children:e.jsx(j,{sx:{height:"57vh",overflowY:"auto",width:"100%",flexGrow:1},children:h.map((n,i)=>(console.log("firstproduct",n),e.jsxs("div",{children:[e.jsx(Ye,{md:4,item:!0,sx:{mx:"auto",px:"10px",py:1},children:e.jsx(Ht,{handleDelete:ot,heading:n.productname,image:n.img,qty:n.quantity,unit:n.productunit,rate:n.amount,amount:n.amount})}),n.accessorieslist.map((f,Ae)=>e.jsx(Ye,{md:4,item:!0,sx:{mx:"auto",px:"10px",py:1},children:e.jsx(Ht,{handleDelete:ot,heading:f.name,image:f.img,qty:f.quantity,unit:f.unit,rate:f.price,amount:f.amount})},`${i}-${Ae}`))]},i)))})})]}),e.jsx(j,{sx:{width:"100%",display:"flex",justifyContent:"end"},children:e.jsx(ae,{type:"submit",variant:"contained",color:"primary",sx:{mt:"2rem",fontWeight:"bold",textTransform:"none",bgcolor:"var(--black-button)","&:hover":{background:"var(--button-hover)"}},onClick:r,children:"Create"})}),e.jsxs("div",{children:[e.jsx(Fl,{setToggle:We,toggle:De,handleAdd:b,handleImageChange:K,arrOfInputs:jt,projectFormData:ue,state:Pe,toggleDrawer:st}),e.jsx(_l,{handleSelectChange:$,arrOfInputs:Ut,toggleDrawer:Je,state:z,ProductFormData:W,handleImageChange:Ue,handleAdd:Bt,setToggle:Me,toggle:Ee})]}),e.jsxs("table",{className:"offscreen",id:"ALLPRODUCTtable",style:{backgroundColor:"white"},children:[e.jsx("thead",{}),e.jsxs("tbody",{children:[h.map((n,i)=>e.jsxs(ks.Fragment,{children:[e.jsxs("tr",{style:{textAlign:"center",backgroundColor:"#FFFF00"},children:[e.jsx("th",{style:{width:"100px",paddingBottom:"5px",paddingTop:"5px"},children:"AREA OF WORK"}),e.jsx("th",{style:{paddingBottom:"5px",paddingTop:"5px"},children:"SPECIFICATION"}),e.jsx("th",{style:{paddingBottom:"5px",paddingTop:"5px"},children:"AMOUNT"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{textAlign:"center"},rowspan:"4",children:n.productname}),e.jsx("td",{style:{paddingLeft:"5px",paddingRight:"5px",paddingBottom:"5px",paddingTop:"5px"},children:n.description}),e.jsx("td",{style:{paddingLeft:"5px",paddingRight:"5px",paddingBottom:"5px",paddingTop:"5px"},children:n.amount})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"5px",paddingRight:"5px",paddingBottom:"5px",paddingTop:"5px"},children:"hardware"}),e.jsx("td",{style:{paddingLeft:"5px",paddingRight:"5px",paddingBottom:"5px",paddingTop:"5px"},children:n.hardware})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"5px",paddingRight:"5px",paddingBottom:"5px",paddingTop:"5px"},children:"installation"}),e.jsx("td",{style:{paddingLeft:"5px",paddingRight:"5px",paddingBottom:"5px",paddingTop:"5px"},children:n.installation})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"5px",paddingRight:"5px",paddingBottom:"5px",paddingTop:"5px"},children:"accessories"}),e.jsx("td",{style:{paddingLeft:"5px",paddingRight:"5px",paddingBottom:"5px",paddingTop:"5px"},children:n.accessories})]}),e.jsxs("tr",{children:[e.jsxs("td",{style:{backgroundColor:"#00B050",paddingBottom:"5px",paddingTop:"5px",paddingRight:"5px",fontWeight:"800",textAlign:"right "},colspan:"2",children:[" ","TOTAL"," "]}),e.jsx("th",{style:{backgroundColor:"#00B050",paddingBottom:"5px",paddingTop:"5px",paddingRight:"5px",fontWeight:"800",textAlign:"right "},children:parseInt(n.amount||0)+parseInt(n.hardware||0)+parseInt(n.installation||0)+parseInt(n.accessories||0)})]}),e.jsx("tr",{children:e.jsx("td",{colSpan:"12",children:" "})}),n.accessorieslist[0]&&e.jsxs(e.Fragment,{children:[e.jsx("tr",{children:e.jsxs("td",{style:{backgroundColor:"#00B0F0",paddingBottom:"5px",paddingTop:"5px",fontWeight:"800",textAlign:"center "},colSpan:"12",children:[" ","ACCESSORIES LIST OF ",n.productname.toUpperCase()," "]})}),e.jsxs("tr",{style:{backgroundColor:"#FFFF00"},children:[e.jsxs("td",{style:{paddingBottom:"5px",paddingTop:"5px",fontWeight:"800",textAlign:"center "},children:[" ","SL NO"," "]}),e.jsxs("td",{style:{paddingBottom:"5px",paddingTop:"5px",fontWeight:"800",textAlign:"center "},children:["SPECIFICATION"," "]}),e.jsxs("td",{style:{paddingBottom:"5px",paddingTop:"5px",fontWeight:"800",textAlign:"center "},children:[" ","IMAGE"," "]})]})]}),n.accessorieslist.map((f,Ae)=>(console.log("accessory",f),e.jsxs("tr",{children:[e.jsx("td",{style:{paddingBottom:"5px",paddingTop:"5px",textAlign:"center"},children:i+1}),e.jsx("td",{style:{paddingLeft:"5px",paddingRight:"5px",paddingBottom:"5px",paddingTop:"5px"},children:f.name}),e.jsxs("td",{style:{paddingLeft:"30px",paddingRight:"10px",paddingBottom:"20px",paddingTop:"20px",display:"flex",justifyContent:"center"},children:[" ",e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/en/thumb/4/41/Flag_of_India.svg/255px-Flag_of_India.svg.png",alt:"image",width:50,height:50})," "]})]},`${i}-${Ae}`)))]},i)),e.jsxs("tr",{children:[e.jsxs("td",{style:{backgroundColor:"#FF0000",paddingBottom:"5px",paddingTop:"5px",paddingRight:"10px",fontWeight:"800",textAlign:"right ",color:"white",border:"1px solid black"},colspan:"2",children:[" ","GRAND TOTAL"," "]}),e.jsx("th",{style:{backgroundColor:"#FF0000",paddingBottom:"5px",paddingTop:"5px",paddingRight:"10px",fontWeight:"800",textAlign:"right ",color:"white",border:"1px solid black"},children:B})]})]})]}),e.jsx("div",{children:e.jsxs("table",{id:"tablethree",style:{backgroundColor:"white",display:"none"},children:[e.jsx("thead",{style:{backgroundColor:"yellow"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{border:"2px solid"},children:"Area of Work"}),e.jsx("th",{style:{border:"2px solid"},children:"Specification"}),e.jsx("th",{style:{border:"2px solid"},children:"Amount"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{rowspan:"2",style:{padding:"10px"},children:"Field 1"}),e.jsxs("td",{style:{padding:"10px"},children:[" ","typesetting industry. ever since the 1500s"]}),e.jsx("td",{style:{padding:"10px"},children:" 123,222.00"})]}),e.jsxs("tr",{children:[e.jsxs("td",{style:{padding:"10px"},children:[" ","typesetting industry. ever since the 1500s"]}),e.jsx("td",{style:{padding:"10px"},children:" 123,222.00"})]}),e.jsx("tr",{}),e.jsxs("tr",{children:[e.jsx("td",{rowspan:"2",style:{padding:"10px"},children:"Field 2"}),e.jsxs("td",{style:{padding:"10px"},children:[" ","typesetting industry. ever since the 1500s"]}),e.jsx("td",{style:{padding:"10px"},children:" 123,222.00"})]}),e.jsxs("tr",{children:[e.jsxs("td",{style:{padding:"10px"},children:[" ","typesetting industry. ever since the 1500s"]}),e.jsx("td",{style:{padding:"10px"},children:" 123,222.00"})]}),e.jsxs("tr",{children:[e.jsx("td",{rowspan:"2",style:{padding:"10px"},children:"Field 3"}),e.jsxs("td",{style:{padding:"10px"},children:[" ","typesetting industry. ever since the 1500s"]}),e.jsx("td",{style:{padding:"10px"},children:" 123,222.00"})]}),e.jsxs("tr",{children:[e.jsxs("td",{style:{padding:"10px"},children:[" ","typesetting industry. ever since the 1500s"]}),e.jsx("td",{style:{padding:"10px"},children:" 123,222.00"})]}),e.jsxs("tr",{style:{backgroundColor:"green"},children:[e.jsx("td",{colspan:"2",style:{textAlign:"end"},children:"TOTAL"}),e.jsx("td",{style:{textAlign:"center"},children:"321"})]}),e.jsxs("tr",{style:{backgroundColor:"red"},children:[e.jsx("td",{colspan:"2",style:{textAlign:"end"},children:"GRAND TOTAL"}),e.jsx("td",{style:{textAlign:"center"},children:"321"})]})]})]})}),e.jsx("div",{children:e.jsx(Wt,{open:be,onClose:w,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(j,{sx:El,children:[e.jsx(j,{sx:{display:"flex",justifyContent:"center",mb:4},children:e.jsx("h4",{children:" Add Area Of Work / Category"})}),e.jsxs(j,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",my:1,gap:1},children:[e.jsx(le,{label:"Area Of Work / Category",intputName:"AreaOfWorkCategory",type:"text",value:y,handleChange:I}),e.jsx(ae,{type:"submit",variant:"contained",color:"primary",sx:{mt:3,fontWeight:"bold",textTransform:"none",bgcolor:"var(--black-button)","&:hover":{background:"var(--button-hover)"}},onClick:q,children:"Add"})]})]})})})]})}function ql(){const l=Mt(),[a,L]=t.useState([]),[V,m]=t.useState([]),[F,_]=t.useState(),[X,H]=t.useState("None");t.useState(null);const[Q,J]=t.useState(0),[se,G]=t.useState(0),[re,d]=t.useState([]),[v,g]=t.useState({productname:"",unit:"",amount:"",hsn:""}),[E,M]=t.useState(0),[C,T]=t.useState([]),[p,D]=t.useState([]),[te,xe]=t.useState(""),[Ne,he]=t.useState(null),[ke,de]=t.useState(null),[Oe,ge]=t.useState(!0),S=h=>{const N=h.target.files[0];if(N){const W=new FileReader;W.onloadend=()=>{de(W.result)},W.readAsDataURL(N)}he(N)},y=()=>{yt().then(h=>{console.log("tax:",h);const N=h.map(W=>({value:W.id,label:W.name?`${W.name} ${W.percentage}`:"none",taxlabel:W.percentage,id:W.id}));console.log(N),D(N)}).catch(h=>{console.log(h)})},ne=()=>{lt().then(h=>{console.log("getProductsData:",h);const N=h.responseData.map(W=>({value:W.id,label:W.name,rate:W.rate,unit:W.unit}));console.log(N),L(N)}).catch(h=>{console.log(h)})},be=()=>{ft().then(h=>{console.log("getProjectData:",h);const N=h.responseData.map(W=>({value:W.id,label:` ${W.name} (${W.client_name})`}));console.log(N),m(N)}).catch(h=>{console.log(h)})},we=()=>{Tt().then(h=>{console.log("units:",h);const N=h==null?void 0:h.responseData.map(W=>({value:W.id,label:W.name}));N.unshift({value:0,label:"None"}),console.log(N),T(N)}).catch(h=>{console.log(h)})};t.useEffect(()=>{we(),be(),ne(),y()},[]);const ue=h=>{console.log(h.target.value),xe(h.target.value)},Ge=[{intputName:"quantity",label:"Quantity",type:"number",value:se},{intputName:"amount",label:"Amount",type:"number",value:Q,disabled:"disabled"}],De=[{intputName:"productname",label:" Product Name",type:"text",value:v.productname},{handleChange:ue,intputName:"unit",label:"Unit",inputOrSelect:"select",options:C},{intputName:"tax",label:"Tax",type:"number",inputOrSelect:"select",options:p},{intputName:"hsn",label:"HSN",type:"text"},{intputName:"amount",label:"  Amount",type:"text",value:v.amount}],We=h=>{const N=re.filter((W,Re)=>Re!==h);d(N)},Ee=h=>{console.log("handleRightInputChange",h.target);const{name:N,value:W}=h.target;N?g(Re=>({...Re,[N]:W})):M(h.target.value)},Me=(h,N)=>{console.log("newValue",N.value),H(N)},Pe=(h,N)=>{console.log(N),_(N)},qe=h=>{console.log(h.target.value),G(h.target.value);const N=X.rate*h.target.value;J(N),console.log(N)},z=()=>{const h={productData:X,qty:se,totalAmout:(X==null?void 0:X.rate)*se};d(N=>[...N,h]),G(0),H("None"),J(0)},A=async()=>{ge(!1);try{const h=re.map(k=>({quantity:parseInt(k.qty),unit:k.productData.unit,product_id:k.productData.value})),N={product:{project_id:F==null?void 0:F.value,hsn:v.hsn,rate:parseFloat(v.amount),tax_rate:{id:E},tax_id:E,is_master_product:!0,name:v.productname,unit_id:te},materials_used:h},W=new FormData;W.append("project_id",N.product.project_id),W.append("hsn",N.product.hsn),W.append("rate",N.product.rate),W.append("tax_rate",JSON.stringify(N.product.tax_rate)),W.append("tax_id",N.product.tax_id),W.append("is_master_product",N.product.is_master_product),W.append("name",N.product.name),W.append("unit_id",N.product.unit_id),W.append("materials_used",JSON.stringify(N.materials_used)),W.append("image",Ne);const Re=await Fs(W);console.log("stockJournalCreateAPI",Re),alert("Stock journal created"),ge(!0),g({productname:"",unit:"",amount:"",hsn:""}),d([]),H("None"),_("None"),M(0)}catch(h){console.error("Error creating product:",h),alert("Problem in stock journal created"),ge(!0)}};return e.jsxs(j,{className:"stockjournl-page",children:[e.jsx("h2",{children:" Stock Journal"}),e.jsx("h4",{children:" Enter the product details to create a new product "}),e.jsxs(ae,{disableRipple:!0,sx:{mb:2,textTransform:"none",color:"var(--black-button)","&:hover":{background:"transparent"}},component:"label",onClick:()=>l(-1),children:[e.jsx(us,{}),"Back"]}),e.jsxs(j,{sx:{display:"flex",gap:2},children:[e.jsxs(j,{className:"input-box",children:[e.jsxs(j,{sx:{width:"100%"},children:[e.jsx("p",{className:"product-name",children:"product"}),e.jsx(Ze,{sx:{display:"inline-block","& input":{width:"100%",border:"none",bgcolor:"var(--inputbg-color)",color:h=>h.palette.getContrastText(h.palette.background.paper)}},id:"custom-input-demo",options:a,value:X,onChange:Me,componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:h=>e.jsx("div",{ref:h.InputProps.ref,children:e.jsx("input",{type:"text",...h.inputProps,style:{height:"10xp"}})})})]}),Ge.map((h,N)=>e.jsx(Ye,{item:!0,xs:6,md:4,children:e.jsx(le,{handleChange:qe,state:h.state,label:h.label,type:h.type,intputName:h.intputName,inputOrSelect:h.inputOrSelect,options:h.options,value:h.value,disabled:h.disabled})},N)),e.jsx(ae,{type:"submit",variant:"contained",color:"primary",sx:{mt:"2rem",fontWeight:"bold",textTransform:"none",bgcolor:"var(--black-button)","&:hover":{background:"var(--button-hover)"}},onClick:z,children:"Add Product"})]}),e.jsxs(j,{className:"input-box",children:[e.jsxs(j,{sx:{display:"flex",gap:5},children:[e.jsxs(j,{sx:{width:"100%"},children:[e.jsx("p",{className:"product-name",children:"Project"}),e.jsx(Ze,{sx:{display:"inline-block","& input":{width:"100%",border:"none",bgcolor:"var(--inputbg-color)",color:h=>h.palette.getContrastText(h.palette.background.paper)}},id:"custom-input-demo",options:V,value:F,onChange:Pe,componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:h=>e.jsx("div",{ref:h.InputProps.ref,children:e.jsx("input",{type:"text",...h.inputProps,style:{height:"10xp"}})})}),De.map((h,N)=>e.jsx(le,{handleChange:h.handleChange||Ee,state:h.state,label:h.label,type:h.type,intputName:h.intputName,inputOrSelect:h.inputOrSelect,options:h.options},N))]}),ke?e.jsxs("div",{style:{bgcolor:"var(--inputbg-color)",display:"flex",justifyContent:"center",flexDirection:"column-reverse",alignItems:"center",gap:"10px"},children:[e.jsx(tl,{onClick:()=>{de(null),he(null)},style:{color:"red"}}),e.jsx("img",{src:ke,width:250})]}):e.jsxs(ae,{className:"image-add-box",disableRipple:!0,sx:{bgcolor:"var(--inputbg-color)",mt:3,ml:2,color:"var(--black-button)",textTransform:"none"},component:"label",children:[e.jsx("img",{src:xt,alt:"add ing"}),e.jsx(Ve,{variant:"string",sx:{pl:1},children:"Upload product image"}),e.jsx("input",{type:"file",hidden:!0,onChange:S})]})]}),e.jsx(ae,{type:"submit",variant:"contained",color:"primary",sx:{mt:"2rem",fontWeight:"bold",textTransform:"none",bgcolor:"var(--black-button)","&:hover":{background:"var(--button-hover)"},"&:disabled":{bgcolor:"var(--black-button)",color:"white"}},onClick:A,disabled:!Oe,children:Oe?"Create":e.jsx(bt,{style:{color:"white",marginBottom:"5px",marginTop:"5px"},size:25})})]})]}),e.jsx("p",{className:"added-item",children:" Added Items"}),e.jsx(j,{sx:{mt:1,pb:2,py:2,bgcolor:"var(--bgwhite)",borderRadius:5,msScrollRails:"none",gap:1},children:e.jsx(j,{sx:{maxHeight:260,overflowY:"auto",width:"100%",display:"flex",flexWrap:"wrap"},children:re.length===0?e.jsxs(j,{sx:{my:2,mx:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(zt,{sx:{mx:"auto"},style:{fontSize:"40px"}}),e.jsx("p",{style:{textAlign:"center"},children:"No products available"})]}):re.map((h,N)=>(console.log("arr data",h.productData),e.jsx(j,{item:!0,sx:{px:"10px",py:1},children:e.jsx(Ht,{handleDelete:()=>We(N),heading:h.productData.label,image:h.img,qty:h.qty,unit:h.productData.unit,rate:h.totalAmout,amount:h.amount})},N)))})})]})}function ds({selectedProductData:l,totalValues:a,setTotalValues:L,setRows:V,rows:m}){const[F,_]=t.useState({}),[X,H]=t.useState([]),Q=()=>{yt().then(d=>{console.log("tax:",d);const v=d.map(g=>({value:g.percentage,label:g.name?`${g.name} ${g.percentage}`:"none",taxlabel:g.percentage,id:g.id}));H(v)}).catch(d=>{console.log(d)})};t.useEffect(()=>{Q()},[]),t.useEffect(()=>{var d,v,g,E;if(l){console.log("selectedProductData",l,` ${(d=l.tax_rate)==null?void 0:d.name} ${(v=l.tax_rate)==null?void 0:v.percentage}`);const M={id:l.id,itemCode:l.itemCode,name:l.name,unit:l.unit,unit_id:l.unit_id,hsn:l.hsn,tax_id:l.tax_rate.id,rate:l.rate,taxApplied:` ${(g=l.tax_rate)==null?void 0:g.name} ${(E=l.tax_rate)==null?void 0:E.percentage}`,qty:1};V(C=>[...C,M])}},[l]),t.useEffect(()=>{const d=m.map(v=>{var te;const g=parseInt(v.qty)||0,E=parseInt(v.rate)||0,M=parseFloat(v.discount)||0,C=parseFloat((te=v.taxApplied)==null?void 0:te.split("@")[1].replace("%",""))||0,T=g*E;let p=T;g>0&&M>0&&(p-=T*M/100);const D=p+p*C/100;return{...v,total:v.amountafterdescount?v.amountafterdescount:D}});V(d),d.reduce((v,g)=>v+g.amountafterdescount?g.amountafterdescount:g.total,0)},[]);const J=d=>{console.log(d);const v={...d,isNew:!1};return V(m.map(g=>g.id===d.id?v:g)),v},se=d=>{_(d)},G=(d,v,g)=>{const E=m.map(M=>{const C=parseInt(M.qty)||0,T=parseInt(M.rate)||0,p=C*T;if(M.id===d){let D={...M,[v]:g};return v==="descountvalue"?(console.log(p-p*g/100),D.amountafterdescount=p*g/100):v==="amountafterdescount"&&(D.descountvalue=100-g/p*100),D}return M});V(E)},re=[{field:"id",headerName:"Slno",flex:.5,editable:!1},{field:"name",headerName:"Item Name",type:"number",flex:1,editable:!1},{field:"qty",headerName:"Qty",flex:.5,editable:!0,type:"number"},{field:"unit",headerName:"Unit",flex:.75,editable:!1,type:"number"},{field:"rate",headerName:"rate",flex:1,editable:!1,type:"number"},{field:"price",headerName:"price (without tax)",flex:1,editable:!1,type:"number",renderHeader:()=>e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("p",{children:"price"})}),e.jsx("hr",{style:{width:"100%"}}),e.jsx("div",{style:{fontWeight:"bold"},children:"(without tax)"})]}),renderCell:d=>{const v=parseInt(d.row.qty)||0,g=parseInt(d.row.rate)||0;parseFloat(d.row.discount);const E=d.row.taxApplied;return typeof E=="string"&&parseInt(E.split("@")[1].replace("%","")),v*g-(d.row.amountafterdescount||0)}},{field:"discount",headerName:"Discount %",flex:1.5,editable:!1,hideable:!1,sortable:!1,filterable:!1,type:"number",renderHeader:()=>e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{margin:"auto"},children:"Discount %"}),e.jsx("hr",{style:{width:"100%"}}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx("div",{style:{flex:"1",textAlign:"center"},children:"%"}),e.jsx("div",{style:{height:"23px",width:"2px",backgroundColor:"#e6e6e6"}}),e.jsx("div",{style:{flex:"1",textAlign:"center"},children:"Amount"})]})]}),renderCell:d=>e.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"space-evenly"},children:[e.jsx("div",{style:{flex:"1",textAlign:"center"},children:e.jsx("input",{style:{width:"100%",bgcolor:"transparent",outline:"none",border:"none",paddingBottom:"20px",paddingTop:"20px"},type:"text",value:d.row.descountvalue,onChange:v=>G(d.row.id,"descountvalue",v.target.value)})}),e.jsx("div",{style:{height:"300px",width:"2px",backgroundColor:"#e6e6e6"}}),e.jsx("div",{style:{flex:"1",textAlign:"center"},children:e.jsx("input",{style:{width:"100%",bgcolor:"transparent",outline:"none",border:"none",paddingBottom:"20px",paddingTop:"20px"},type:"text",value:d.row.amountafterdescount,onChange:v=>G(d.row.id,"amountafterdescount",v.target.value)})})]})},{field:"taxApplied",headerName:"Tax Applied",flex:2,type:"text",renderHeader:()=>e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{margin:"auto"},children:"Tax %"}),e.jsx("hr",{style:{width:"100%"}}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx("div",{style:{flex:"1",textAlign:"center"},children:"%"}),e.jsx("div",{style:{height:"23px",width:"2px",backgroundColor:"#e6e6e6"}}),e.jsx("div",{style:{flex:"1",textAlign:"center"},children:"Amount"})]})]}),renderCell:d=>{const v=E=>{const M=X.find(p=>p.value===E.target.value),C={...d.row,taxApplied:M?`${M.label}`:"",taxId:M?M.id:"0"},T=m.map(p=>p.id===d.row.id?C:p);V(T)},g=()=>{var p,D,te,xe;const E=d.row.taxApplied?d.row.taxAppliedamount?parseInt((p=d.row.taxAppliedamount)==null?void 0:p.replace("%"," ")):parseFloat((te=(D=d.row)==null?void 0:D.taxApplied)==null?void 0:te.split("@")[1].replace("%","")):parseInt((xe=d.row.taxAppliedamount)==null?void 0:xe.replace("%"," "));return(d.row.qty*d.row.rate-(d.row.quantity||0)*(d.row.rate||0)-(d.row.amountafterdescount||0))*E/100};return e.jsxs("div",{style:{width:"100%",display:"flex"},children:[e.jsx("select",{value:d.row.taxAppliedamount?d.row.taxAppliedamount:d.row.taxApplied.split("GST@ ")[1],onChange:v,style:{width:"100%",padding:"8px",border:"none",backgroundColor:"white",margin:"0px"},children:X.map(E=>e.jsx("option",{value:E.value,children:E.label},E.value))}),e.jsx("div",{style:{height:"50px",width:"2px",backgroundColor:"#e6e6e6"}}),e.jsx("input",{style:{width:"100%",bgcolor:"transparent",outline:"none",border:"none",paddingBottom:"20px",paddingTop:"20px",background:"white"},type:"text",value:g(),disabled:!0})]})}},{field:"total",type:"number",headerName:"Total",flex:1,renderCell:d=>{var T;const v=parseInt(d.row.qty)||0,g=parseInt(d.row.rate)||0;parseFloat(d.row.discount);let E=0;d.row.taxAppliedamount?E=parseFloat(d.row.taxAppliedamount.replace("%",""))||0:(T=d.row.taxApplied)!=null&&T.value?E=parseFloat(d.row.taxApplied.value.replace("%",""))||0:d.row.taxApplied&&(E=parseFloat(d.row.taxApplied.split("@")[1].replace("%",""))||0);const C=v*g-(d.row.amountafterdescount||0);return(C*E/100+C).toFixed(2)}}];return e.jsx(j,{sx:{height:"100%","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary"},background:"var(--bgwhite)","& .MuiDataGrid-columnsContainer .":{borderRight:"1px solid rgba(224, 224, 224, 1)"},"&  .MuiDataGrid-cell":{borderRight:"1px solid rgba(224, 224, 224, 1)"},"&.MuiDataGrid-row":{borderBottomColor:"none"},"& .MuiDataGrid-columnHeader":{borderRight:"1px solid rgba(224, 224, 224, 1)"},"& .css-yrdy0g-MuiDataGrid-columnHeaderRow":{bgcolor:"#f3f6f9 !important"},"& .css-boxz2p-MuiDataGrid-root .MuiDataGrid-columnHeaderTitleContainerContent  ":{width:"100%"}},children:e.jsx(ws,{rows:m,columns:re,editMode:"row",disableColumnMenu:!0,rowModesModel:F,onRowModesModelChange:se,processRowUpdate:J,slotProps:{toolbar:{setRows:V,setRowModesModel:_}},sx:{"& .MuiDataGrid-footerContainer":{display:"none !important"},"& .css-3dzjca-MuiPaper-root-MuiPopover-paper-MuiMenu-paper ":{maxHeightheight:"calc(5% - 96px) !important"},"& .css-74bi4q-MuiDataGrid-overlayWrapper":{height:"60px"},"& .MuiDataGrid-columnHeaderTitleContainerContent":{width:"100%"}}})})}function Dt(l){const a=l.getFullYear()%100,L=String(l.getMonth()+1).padStart(2,"0"),V=String(l.getDate()).padStart(2,"0"),m=String(l.getHours()).padStart(2,"0"),F=String(l.getMinutes()).padStart(2,"0"),_=String(l.getSeconds()).padStart(2,"0"),X=`${a}${L}${V}${m}${F}${_}`,Q=parseInt(X)%1e6,J=Math.floor(Math.random()*Q);return String(J).padStart(6,"0")}const Gl={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",borderRadius:"10px",boxShadow:24,p:4};function Hl(){var ut,jt;const l=t.useRef(null),[a,L]=t.useState([]),[V,m]=t.useState(null),[F,_]=t.useState(0),[X,H]=t.useState(0),[Q,J]=t.useState(null),[se,G]=t.useState([]),[re,d]=t.useState(""),[v,g]=t.useState(!1),[E,M]=t.useState([]),[C,T]=t.useState("none"),[p,D]=t.useState("none"),[te,xe]=t.useState([]),[Ne,he]=t.useState(!0),[ke,de]=t.useState({name:"",quantity:"",rate:0,hsn:""}),[Oe,ge]=t.useState([]),[S,y]=t.useState([]),[ne,be]=t.useState([]),[we,ue]=t.useState({}),[Ge,De]=t.useState(""),[We,Ee]=t.useState({right:!1}),[Me,Pe]=t.useState(""),[qe,z]=t.useState(null),[A,h]=t.useState([]),[N,W]=t.useState({}),[Re,k]=t.useState(!0),O=(b=>{const K=b.reduce((w,ye)=>{var nt,rt,dt,it,at;console.log("firstcurr.taxRate",parseInt((nt=ye.taxApplied)==null?void 0:nt.split("@")[1].replace("%",""))||0),w[ye.hsn]||(w[ye.hsn]={hsn:ye.hsn,total:0,cgstRate:(parseInt((rt=ye.taxApplied)==null?void 0:rt.split("@")[1].replace("%",""))||0)/2,sgstRate:(parseInt((dt=ye.taxApplied)==null?void 0:dt.split("@")[1].replace("%",""))||0)/2,cgstAmount:0,sgstAmount:0});const Te=ye.qty*ye.rate;return w[ye.hsn].total+=Te,w[ye.hsn].cgstAmount+=Te*((parseInt((it=ye.taxApplied)==null?void 0:it.split("@")[1].replace("%",""))||0)/100)/2,w[ye.hsn].sgstAmount+=Te*((parseInt((at=ye.taxApplied)==null?void 0:at.split("@")[1].replace("%",""))||0)/100)/2,w},{});return Object.values(K)})(te),ve=()=>{yt().then(b=>{console.log("tax:",b);const K=b.map(w=>({value:w.percentage,label:w.name?`${w.name} ${w.percentage}`:"none",taxlabel:w.percentage,id:w.id}));console.log(K),h(K)}).catch(b=>{console.log(b)})},je=()=>{Vt().then(b=>{console.log("category:",b);const K=b==null?void 0:b.responseData.map(w=>({value:w.id,label:`${w.name}`}));K.unshift({value:0,label:"None"}),console.log("categoryOptions",K),ge(K)}).catch(b=>{console.log(b)})},Ce=()=>{ft().then(b=>{console.log("projects:",b);const K=b==null?void 0:b.responseData.map(w=>({value:w.id,label:`${w.name} ( ${w.client_name} )`}));K.unshift({value:0,label:"None"}),console.log("projectdData",K),y(K)}).catch(b=>{console.log(b)})},Fe=()=>{Tt().then(b=>{console.log("units:",b);const K=b==null?void 0:b.responseData.map(w=>({value:w.id,label:w.name}));K.unshift({value:0,label:"None"}),console.log("unitsdData",K),be(K)}).catch(b=>{console.log(b)})},Be=()=>g(!1);t.useEffect(()=>{ve(),Fe(),Ce(),je(),ms().then(b=>{const K=b.responseData.map(w=>({value:w.id,label:`${w.project_name} ( ${w.name} )`,address1:w.entry,phonenumber:w.phonenumber}));console.log("clientData:",K),console.log(K),M(K)}).catch(b=>{console.log(b)})},[]),t.useEffect(()=>{const K=te.map(w=>{var at;const ye=parseInt(w.qty)||0,Te=parseInt(w.rate)||0,rt=ye*Te-(w.amountafterdescount||0);let dt=0;w.taxAppliedamount?dt=parseFloat(w.taxAppliedamount.replace("%",""))||0:(at=w.taxApplied)!=null&&at.value?dt=parseFloat(w.taxApplied.value.replace("%",""))||0:w.taxApplied&&(dt=parseFloat(w.taxApplied.split("@")[1].replace("%",""))||0);const it=(rt*dt/100+rt).toFixed(2);return{...w,total:it}}).reduce((w,ye)=>w+parseFloat(ye.total),0);_(K)},[te]);const Y=b=>{if(console.log(b.target.value),console.log(b.target),b.target.value==="addNew")g(!0),l.current.value="select";else{g(!1);const w=E.find(ye=>ye.value==b.target.value);W(w),console.log(w),D(b.target.value)}},Xe=b=>{d(b.target.value)},fe=async()=>{const ye=(await lt()).responseData.map(Te=>Te.name).map((Te,nt)=>({value:`option${nt+1}`,label:Te}));ye.unshift({value:-2,label:"Add"}),L(ye)};t.useEffect(()=>{fe(),L([{value:-2,label:"Add"}])},[]);const et=async(b,K)=>{if(K&&(J(K),K))if(K.value===-2)console.log(K.value===-2),ee("right",!0)(),J();else{const w=await lt();console.log(w);const Te=w.responseData.find(rt=>rt.name===(K==null?void 0:K.label));console.log("selectedProductData",Te),m(Te),console.log(Te);const nt={id:1,itemName:Te.name,qty:1,unit:Te.unit,price:Te.price,discount:0,taxApplied:Te.tax_rate,total:Te.price};J(),G([...se,nt])}},ht=b=>{H(b.target.value)},P=async()=>{k(!1),console.log("salesVoucher",te);const b=await te.map(w=>({product_id:w.id,quantity:w.qty,Price:w.rate,unit:w.unit_id,discount:parseFloat((w==null?void 0:w.descountvalue)||0),tax_rate:{id:w!=null&&w.taxId?w==null?void 0:w.taxId:w==null?void 0:w.tax_id}})),K={credit_sale:!1,payment_type:C==="cash"?5:10,billing_address:"",customer:parseInt(p),total:parseFloat(F),product_details:b};console.log(K),jl(K).then(w=>{alert("Bill created"),Je(),console.log(w),T({}),D({}),xe([]),k(!0)}).catch(w=>{console.log(w),k(!0)})},Z=b=>{De(b.target.value),console.log(b.target.value)},pe=b=>{const{name:K,value:w}=b.target;de(ye=>({...ye,[K]:w}))},ee=(b,K)=>w=>{console.log(w),console.log("Toggle Drawer:",b,K),!(w&&w.type==="keydown"&&(w.key==="Tab"||w.key==="Shift"))&&Ee({...We,[b]:K})},me=b=>{const K=b.target.files[0];z(K)},He=b=>{console.log(b.target.value);const K=A.find(w=>w.taxlabel==b.target.value);console.log(K),ue(K)},Ke=b=>{De(b.target.value),console.log(b.target.value)},tt=b=>{Pe(b.target.value),console.log(b.target.value)},_e=()=>{const b=new FormData;b.append("name",ke.name),b.append("hsn",ke.hsn),b.append("rate",parseInt(ke.rate)),b.append("quantity",parseInt(ke.quantity)),b.append("unit",Ge),b.append("projectid",parseInt(Me)),b.append("is_master_product",Ne),b.append("tax_rate",we.id),b.append("image",qe),Pt(b).then(K=>{fe(),K.status===200&&(de({name:"",qate:"",quantity:"",rate:"",taxvalue:"",hsn:""}),De(""),ue(""),alert("Product added successfully"))}).catch(K=>{console.log(K),alert("Problem in adding product")})},st=[{handleChange:pe,intputName:"name",label:" Product Name",type:"text"},{handleChange:pe,intputName:"rate",label:"Rate",type:"number"},{handleChange:pe,intputName:"quantity",label:"Quantity",type:"number"},{handleChange:He,intputName:"taxrate",label:"Tax Rate",inputOrSelect:"select",options:A},{intputName:"taxvalue",label:" Tax Value",value:parseFloat(ke.rate||0)*parseFloat(ke.quantity||0)*(parseFloat((ut=we.value)==null?void 0:ut.replace("%",""))||0)/100,disabled:"disabled"},{handleChange:pe,intputName:"hsn",label:"HSN",type:"text"},{handleChange:Ke,intputName:"unit",label:"Unit",inputOrSelect:"select",options:ne},{handleChange:tt,intputName:"project",label:"Projects",inputOrSelect:"select",options:S}],Je=()=>{const b=document.querySelector("#pagedatatoshow"),K=new mt("p","pt","a4",!0);K.html(b,{callback:()=>{const w=K.output("bloburl");window.open(w,"_blank")}})};return e.jsxs("div",{className:"sales-table-container",children:[e.jsxs(j,{sx:{width:"75%",mx:1},children:[e.jsxs(j,{sx:{width:"100%",marginBottom:"10px"},children:[e.jsx("p",{className:"product-name",children:"products"}),e.jsx(Ze,{sx:{display:"inline-block","& input":{width:"100%",border:"none",bgcolor:"var(--inputbg-color)",color:b=>b.palette.getContrastText(b.palette.background.paper)}},id:"custom-input-demo",options:a,value:Q,onChange:et,componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:b=>e.jsx("div",{ref:b.InputProps.ref,children:e.jsx("input",{type:"text",...b.inputProps,style:{height:"10xp"}})})})]}),e.jsx("div",{style:{overflow:"auto"},children:e.jsx(j,{children:e.jsx(ds,{selectedProductData:V,setTotalValues:_,totalValues:F,setRows:xe,rows:te})})})]}),e.jsxs(j,{sx:{border:"1px solid #bbbdbf",mt:4,borderRadius:2},children:[e.jsxs(j,{sx:{margin:"2px",p:"3px",borderRadius:1,border:"1px solid #bbbdbf"},children:[e.jsx("p",{className:"head-p-tag",children:"Customer Details"}),e.jsxs("select",{value:p,ref:l,style:{width:"100%"},onChange:Y,children:[e.jsx("option",{value:"select",children:"Select"}),e.jsx("option",{value:"addNew",children:"Add New"}),E.map((b,K)=>(console.log(b),e.jsx("option",{value:b.value,label:b.label,children:b.label},K)))]})]}),e.jsxs(j,{sx:{margin:"2px",p:"3px",borderRadius:1,border:"1px solid #bbbdbf",height:"55%"},children:[e.jsx("p",{className:"head-p-tag",children:"Bill Details"}),e.jsxs(j,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx("p",{children:"sub Total:"}),e.jsxs("p",{children:[" â‚¹ ",F]})]}),e.jsx("hr",{style:{margin:"8px",color:"#bbbdbf"}}),e.jsxs(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("p",{className:"head-p-tag",children:"Total amount :"}),e.jsxs("p",{children:[" â‚¹ ",F]})]})]}),e.jsxs(j,{sx:{margin:"2px",p:"3px",borderRadius:1,border:"1px solid #bbbdbf"},children:[e.jsx("p",{className:"head-p-tag",children:"Cash/UPI"}),e.jsxs(j,{sx:{display:"flex",justifyContent:"space-between",my:1,alignItems:"center"},children:[e.jsx("p",{children:"Payment Method:"}),e.jsxs("select",{style:{width:"50%"},value:C,onChange:b=>T(event.target.value),children:[e.jsx("option",{value:"none",label:"None"}),e.jsx("option",{value:"cash",label:"Cash"}),e.jsx("option",{value:"upi",label:"UPI"})]})]}),e.jsxs(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",my:1},children:[e.jsx("p",{children:"Amount Received:"}),e.jsx(hs,{sx:{my:1,width:"50%",background:"#F3F6F9",borderRadius:2},children:e.jsx(Ds,{onChange:ht,sx:{p:"0 !important"},id:"standard-adornment-password",endAdornment:e.jsx(Ts,{position:"end",children:e.jsx(Is,{})})})})]}),e.jsxs(j,{sx:{display:"flex",justifyContent:"space-between",my:1},children:[e.jsx("p",{children:"Change to Return:"}),e.jsxs("p",{children:["â‚¹",X-F]})]})]}),e.jsx(j,{sx:{display:"flex",justifyContent:"center",mt:1},children:e.jsx(ae,{type:"submit",variant:"contained",color:"primary",sx:{fontWeight:"bold",textTransform:"none",bgcolor:"var(--black-button)","&:hover":{background:"var(--button-hover)"},"&:disabled":{bgcolor:"var(--black-button)",color:"white"}},onClick:P,disabled:!Re,children:Re?"Save and Print Bill":e.jsx(bt,{style:{color:"white",marginBottom:"5px",marginTop:"5px",marginLeft:"35px",marginRight:"35px"},size:15})})})]}),e.jsx("div",{children:e.jsx(Wt,{open:v,onClose:Be,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(j,{sx:Gl,children:[e.jsx(j,{sx:{display:"flex",justifyContent:"center",mb:4},children:e.jsx("h4",{children:" Customer Details"})}),e.jsx(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",my:1},children:e.jsx(le,{label:"Add new ",value:re,handleChange:Xe})})]})})}),e.jsx(qt,{handleSelectChange:Z,arrOfInputs:st,toggleDrawer:ee,state:We,ProductFormData:ke,handleImageChange:me,handleAdd:_e,setToggle:he,toggle:Ne}),e.jsxs("div",{id:"pagedatatoshow",className:"offscreen",style:{margin:"8px",width:"580px"},children:[e.jsx("h6",{style:{textAlign:"center",marginBottom:"10px"},children:"Tax Invoice"}),e.jsxs("div",{style:{border:"1px solid"},children:[e.jsxs("div",{className:"topsection",style:{display:"flex"},children:[e.jsxs("div",{className:"left",style:{display:"flex",flexDirection:"column",width:"50%"},children:[e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid"},children:[e.jsx("div",{style:{width:"100px",height:"100px"},children:e.jsx("img",{src:"https://res.cloudinary.com/dczou8g32/image/upload/v1714668042/DEV/jw8j76cgw2ogtokyoisi.png",alt:"img",width:90,height:90})}),e.jsxs("div",{className:"address",children:[e.jsx("h6",{children:"BILTREE"}),e.jsx("h6",{children:"54/3175"}),e.jsx("h6",{children:"MANGHAT ARCADE"}),e.jsx("h6",{children:"KALOOR-KADAVANTHRA ROAD"}),e.jsx("h6",{children:"KADAVANTHRA,ERNAKULAM"}),e.jsx("h6",{children:"GSTIN/UIN:32AAVFB8613K1Z3"}),e.jsx("h6",{children:"State Name:Kerala, Code : 32"}),e.jsx("h6",{children:"E-Mail:info@biltree.in"})]})]}),e.jsxs("div",{style:{borderBottom:"1px solid",marginLeft:"2px",display:"flex",flexDirection:"column",gap:"3px"},children:[e.jsx("h6",{children:"Consignee (Ship to)"}),e.jsx("h5",{children:N==null?void 0:N.label}),e.jsx("h6",{children:N==null?void 0:N.address1}),e.jsx("h6",{children:N==null?void 0:N.address2}),e.jsx("h6",{children:N==null?void 0:N.phonenumber}),e.jsxs("h6",{style:{display:"flex",gap:"20px",marginBottom:"3px"},children:[e.jsx("span",{children:"GSTIN/UIN"})," ",e.jsx("span",{children:": 32AAFFC5911M2Z1"})]})]}),e.jsxs("div",{style:{marginLeft:"2px",display:"flex",flexDirection:"column",gap:"3px"},children:[e.jsx("h5",{children:N==null?void 0:N.label}),e.jsx("h6",{children:N==null?void 0:N.address1}),e.jsx("h6",{children:N==null?void 0:N.address2}),e.jsx("h6",{children:N==null?void 0:N.phonenumber}),e.jsxs("h6",{style:{display:"flex",gap:"20px"},children:[e.jsx("span",{children:"GSTIN/UIN"})," ",e.jsx("span",{children:": 32AAFFC5911M2Z1"})]})]})]}),e.jsx("div",{className:"right",style:{width:"50%"},children:e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[e.jsx("thead",{style:{borderBottom:"1px solid black"},children:e.jsxs("tr",{children:[e.jsxs("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:[e.jsx("h6",{children:"Invoice No"}),e.jsx("h6",{children:Dt(new Date)})]}),e.jsxs("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:[e.jsx("h6",{children:"Date"}),e.jsx("h6",{children:(jt=new Date)==null?void 0:jt.toLocaleDateString()})]})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Delivery Note"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Mode/Terms of Payment"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Reference No.& Date"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Other References"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Buyer's Order No"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Date"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Dispatch Doc No"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Delivery Note Date"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",borderBottom:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Dispatch throught"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Destination"})})]}),e.jsx("tr",{children:e.jsx("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{style:{marginBottom:"75px"},children:"Terms of Delivery"})})})]})]})})]}),e.jsx("div",{className:"middlesection",children:e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[e.jsx("thead",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("h6",{children:"Sl.No"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:["Description of ",e.jsx("br",{})," Goods and Services"]})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"HSN/SAC"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Quantity"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Per"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Amount"})})]})}),e.jsx("tbody",{children:te.map((b,K)=>(console.log("firstdata",b),e.jsxs("tr",{style:{borderBottom:"1px solid black"},children:[e.jsx("td",{style:{paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:K+1})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:b.name})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:" "})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:b.qty})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsxs("h6",{children:[" ",b.rate]})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsxs("h6",{children:[" ",b.unit]})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:(b.rate||0)*b.qty||0})})]},K)))})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px",marginLeft:"2px"},children:[e.jsx("h6",{children:"Amount Chargeable (in words)"}),e.jsx("h6",{children:"E.&.O.E"})]}),e.jsx("h6",{style:{marginTop:"5px"},children:"INR Sixteen lakh Twenty Eight Thousand Six Hundred Fifty One Only"}),e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%",marginTop:"10px"},children:[e.jsxs("thead",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:[e.jsxs("tr",{children:[e.jsx("th",{style:{borderLeft:"1px solid black"},rowSpan:"2",children:e.jsx("h6",{children:" HSN/SAC"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},rowSpan:"2",children:e.jsx("h6",{children:" Taxable Value"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderBottom:"1px solid black",borderRight:"1px solid black"},colSpan:"2",children:e.jsx("h6",{children:" CGST"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderBottom:"1px solid black"},colSpan:"2",children:e.jsx("h6",{children:" SGST/UTGST"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Total Tax Amount"})})]}),e.jsxs("tr",{children:[e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Amount"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:e.jsx("h6",{children:" Amount"})})]})]}),e.jsx("tbody",{style:{borderBottom:"1px solid black"},children:O==null?void 0:O.map(b=>e.jsxs("tr",{children:[e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",b==null?void 0:b.hsn]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",b==null?void 0:b.total.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",b==null?void 0:b.cgstRate]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",b==null?void 0:b.cgstAmount.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",b==null?void 0:b.sgstRate]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",b==null?void 0:b.sgstAmount.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:((b==null?void 0:b.total)+(b==null?void 0:b.sgstAmount)+(b==null?void 0:b.cgstAmount)).toFixed(2)})})]},b==null?void 0:b.hsn))})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"5px",marginLeft:"2px"},children:[e.jsx("h6",{children:"Tax Amount (in words)"}),e.jsx("h6",{children:"INR Sixteen lakh Twenty Eight Thousand Six Hundred Fifty One Only"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"end",marginTop:"5px",marginLeft:"50%",fontSize:"12px"},children:[e.jsx("h6",{children:"Company's bank details"}),e.jsxs("div",{style:{display:"flex",gap:"16.4px"},children:[e.jsx("h6",{children:"A/c Holder Name"}),e.jsx("h6",{children:": BILTREE"})]}),e.jsxs("div",{style:{display:"flex",gap:"38px"},children:[e.jsx("h6",{children:"Bank Name"}),e.jsx("h6",{children:": ICICI BANK CA - 785236984125"})]}),e.jsxs("div",{style:{display:"flex",gap:"56.6px"},children:[e.jsx("h6",{children:"A/c No"}),e.jsx("h6",{children:": 785236984125"})]}),e.jsxs("div",{style:{display:"flex",gap:"12.4px"},children:[e.jsx("h6",{children:"Branch & IFS Code"}),e.jsx("h6",{children:": PANAMPILLY MAGAR & ICIC0002483"})]}),e.jsx("h6",{children:"SWIFT Code"})]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsxs("div",{className:"leftsection",style:{width:"50%",marginLeft:"2px",marginBottom:"3px"},children:[e.jsx("h6",{style:{borderBottom:"1px solid black",width:"60px"},children:"Declaration"}),e.jsx("h6",{children:"we seclare that this invoice shows the actual price of the goods described and that all particulars are true and currect"})]}),e.jsxs("div",{className:"rightsection",style:{width:"50%",textAlign:"end",borderTop:"1px solid black",borderLeft:"1px solid black"},children:[e.jsx("h6",{style:{marginBottom:"23px",marginRight:"5px"},children:"for BILTREEE"}),e.jsx("h6",{style:{marginRight:"5px"},children:"Authorised Signatory"})]})]})]})]})]})}const zl={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",borderRadius:"10px",boxShadow:24,p:4};function Wl(){var vt,Ct;const[l,a]=t.useState([]),[L,V]=t.useState(null),[m,F]=t.useState([]),[_,X]=t.useState(0),[H,Q]=t.useState([]),[J,se]=t.useState([]),[G,re]=t.useState([]),[d,v]=t.useState(null),[g,E]=t.useState([]);t.useState("");const[M,C]=t.useState(!1),[T,p]=t.useState("none"),[D,te]=t.useState("none"),[xe,Ne]=t.useState("none"),[he,ke]=t.useState([]),[de,Oe]=t.useState(""),[ge,S]=t.useState({name:"",phoneNumber:"",email:"",address1:"",address2:"",postalCode:""}),[y,ne]=t.useState(!0),[be,we]=t.useState({name:"",quantity:"",rate:0,hsn:""}),[ue,Ge]=t.useState([]),[De,We]=t.useState([]),[Ee,Me]=t.useState([]),[Pe,qe]=t.useState({}),[z,A]=t.useState(""),[h,N]=t.useState({right:!1}),[W,Re]=t.useState(""),[k,c]=t.useState(""),[O,ve]=t.useState(null),[je,Ce]=t.useState([]),[Fe,Be]=t.useState(!0),[Y,Xe]=t.useState({}),et=(s=>{const u=s.reduce((x,R)=>{var o,I,q,U,Se;console.log("firstcurr.taxRate",parseInt((o=R.taxApplied)==null?void 0:o.split("@")[1].replace("%",""))||0),x[R.hsn]||(x[R.hsn]={hsn:R.hsn,total:0,cgstRate:(parseInt((I=R.taxApplied)==null?void 0:I.split("@")[1].replace("%",""))||0)/2,sgstRate:(parseInt((q=R.taxApplied)==null?void 0:q.split("@")[1].replace("%",""))||0)/2,cgstAmount:0,sgstAmount:0});const ce=R.qty*R.rate;return x[R.hsn].total+=ce,x[R.hsn].cgstAmount+=ce*((parseInt((U=R.taxApplied)==null?void 0:U.split("@")[1].replace("%",""))||0)/100)/2,x[R.hsn].sgstAmount+=ce*((parseInt((Se=R.taxApplied)==null?void 0:Se.split("@")[1].replace("%",""))||0)/100)/2,x},{});return Object.values(u)})(H),ht=()=>{yt().then(s=>{console.log("tax:",s);const u=s.map(x=>({value:x.percentage,label:x.name?`${x.name} ${x.percentage}`:"none",taxlabel:x.percentage,id:x.id}));console.log(u),Ce(u)}).catch(s=>{console.log(s)})},P=()=>{Vt().then(s=>{console.log("category:",s);const u=s==null?void 0:s.responseData.map(x=>({value:x.id,label:`${x.name}`}));u.unshift({value:0,label:"None"}),console.log("categoryOptions",u),Ge(u)}).catch(s=>{console.log(s)})},Z=()=>{ft().then(s=>{console.log("projects:",s);const u=s==null?void 0:s.responseData.map(x=>({value:x.id,label:`${x.name} ( ${x.client_name} )`}));u.unshift({value:0,label:"None"}),console.log("projectdData",u),We(u)}).catch(s=>{console.log(s)})},pe=()=>{Tt().then(s=>{console.log("units:",s);const u=s==null?void 0:s.responseData.map(x=>({value:x.id,label:x.name}));u.unshift({value:0,label:"None"}),console.log("unitsdData",u),Me(u)}).catch(s=>{console.log(s)})},ee=()=>{Rt().then(s=>{console.log("partyData:",s);const u=s.responseData.map(x=>({value:x.id,label:x.name}));console.log(u),se(u)}).catch(s=>{console.log(s)})};t.useEffect(()=>{ee(),ht(),P(),Z(),pe()},[]);const me=s=>{const{name:u,value:x}=s.target;S({...ge,[u]:x})},He=()=>{const s={name:ge.name,phonenumber:ge.phoneNumber,email:ge.email,address1:ge.address1,address2:ge.address2,country:parseInt(de),postalCode:ge.postalCode};console.log(s),yl(s).then(u=>{console.log(u),alert("Party Added"),ee(),C(!1),S({name:"",phoneNumber:"",email:"",address1:"",address2:"",postalCode:""})}).catch(u=>{console.log(u)})};t.useEffect(()=>{js().then(s=>{const u=s.map(x=>({value:x.id,label:x.name}));ke(u)}).catch(s=>{console.log(s)}),ms().then(s=>{console.log("clientData:",s);const u=s.responseData.map(x=>({value:x.id,label:x.name}));console.log(u),re(u)}).catch(s=>{console.log(s)})},[]);const Ke=s=>{console.log(s.target.value),te(s.target.value)},tt=s=>{if(console.log(s.target.value),s.target.value==="addNew")C(!0);else{C(!1);const x=G.find(R=>R.value==s.target.value);console.log("firstselectedOptionObject",x),Xe(x),Ne(s.target.value)}},_e=async()=>{const R=(await lt()).responseData.map(ce=>ce.name).map((ce,o)=>({value:`option${o+1}`,label:ce}));R.unshift({value:-2,label:"Add"}),a(R)};t.useEffect(()=>{_e(),a([{value:-2,label:"Add"}])},[]),t.useEffect(()=>{const u=H.map(x=>{var Se;const R=parseInt(x.qty)||0,ce=parseInt(x.rate)||0,I=R*ce-(x.amountafterdescount||0);let q=0;x.taxAppliedamount?q=parseFloat(x.taxAppliedamount.replace("%",""))||0:(Se=x.taxApplied)!=null&&Se.value?q=parseFloat(x.taxApplied.value.replace("%",""))||0:x.taxApplied&&(q=parseFloat(x.taxApplied.split("@")[1].replace("%",""))||0);const U=(I*q/100+I).toFixed(2);return{...x,total:U}}).reduce((x,R)=>x+parseFloat(R.total),0);F(u)},[H]);const st=async(s,u)=>{if(u){if(u.value===-2)console.log(u.value===-2),Te("right",!0)(),v();else if(v(u),u){console.log(u.label);const x=await lt();console.log(x);const ce=x.responseData.find(I=>I.name===(u==null?void 0:u.label));console.log(ce),V(ce),console.log(ce);const o={id:1,itemName:ce.name,qty:1,unit:ce.unit,price:ce.price,discount:0,taxApplied:0,total:ce.price};v(),E([...g,o])}}},Je=s=>{X(s.target.value)},ut=()=>C(!1),b=[{handleChange:me,intputName:"name",label:"Name",type:"text"},{handleChange:me,intputName:"phoneNumber",label:"Phone number",type:"text"},{handleChange:me,intputName:"email",label:"Email",type:"text"},{handleChange:me,intputName:"address1",label:"Address1",type:"text"},{handleChange:me,intputName:"address2",label:"Address2",type:"text"},{handleChange:s=>{Oe(s.target.value),console.log(s.target.value)},intputName:"country",label:"country",type:"text",inputOrSelect:"select",option:he},{handleChange:me,intputName:"postalCode",label:"Pin code",type:"text"}],K=async()=>{Be(!1);const s=await H.map(x=>({product_id:x.id,quantity:x.qty,Price:x.rate,unit:x.unit_id,discount:parseFloat((x==null?void 0:x.descountvalue)||0),tax_rate:{id:x!=null&&x.taxId?x==null?void 0:x.taxId:x==null?void 0:x.tax_id}})),u={credit_sale:!1,payment_type:T==="cash"?5:10,billing_address:"",client:parseInt(D),party:parseInt(xe),total:parseFloat(m),product_details:s};console.log("createPurchaseAPI",H),ml(u).then(x=>{console.log(x),alert("Bill created"),Nt(),Q([]),D({}),Ne({}),v(),Be(!0)}).catch(x=>{console.log(x),Be(!0)})},w=s=>{A(s.target.value),console.log(s.target.value)},ye=s=>{const{name:u,value:x}=s.target;we(R=>({...R,[u]:x}))},Te=(s,u)=>x=>{console.log(x),console.log("Toggle Drawer:",s,u),!(x&&x.type==="keydown"&&(x.key==="Tab"||x.key==="Shift"))&&N({...h,[s]:u})},nt=s=>{const u=s.target.files[0];ve(u)},rt=s=>{console.log(s.target.value);const u=je.find(x=>x.taxlabel==s.target.value);console.log(u),qe(u)},dt=s=>{A(s.target.value),console.log(s.target.value)},it=s=>{Re(s.target.value),console.log(s.target.value)},at=()=>{const s=new FormData;s.append("name",be.name),s.append("hsn",be.hsn),s.append("rate",parseInt(be.rate)),s.append("quantity",parseInt(be.quantity)),s.append("unit",z),s.append("projectid",parseInt(W)),s.append("is_master_product",y),s.append("category_id",k),s.append("tax_rate",Pe.id),s.append("image",O),Pt(s).then(u=>{_e(),u.status===200&&(we({name:"",qate:"",quantity:"",rate:"",taxvalue:"",hsn:""}),A(""),qe(""),alert("Product added successfully"),_e())}).catch(u=>{console.log(u),alert("Problem in adding product")})},ct=[{handleChange:ye,intputName:"name",label:" Product Name",type:"text"},{handleChange:ye,intputName:"rate",label:"Rate",type:"number"},{handleChange:ye,intputName:"quantity",label:"Quantity",type:"number"},{handleChange:rt,intputName:"taxrate",label:"Tax Rate",inputOrSelect:"select",options:je},{intputName:"taxvalue",label:" Tax Value",value:parseFloat(be.rate||0)*parseFloat(be.quantity||0)*(parseFloat((vt=Pe.value)==null?void 0:vt.replace("%",""))||0)/100,disabled:"disabled"},{handleChange:ye,intputName:"hsn",label:"HSN",type:"text"},{handleChange:dt,intputName:"unit",label:"Unit",inputOrSelect:"select",options:Ee},{handleChange:it,intputName:"project",label:"Projects",inputOrSelect:"select",options:De}],Nt=()=>{const s=document.querySelector("#pagedatatoshow"),u=new mt("p","pt","a4",!0);u.html(s,{callback:()=>{const x=u.output("bloburl");window.open(x,"_blank")}})};return e.jsxs("div",{className:"sales-table-container",children:[e.jsxs(j,{sx:{width:"75%",mx:1},children:[e.jsxs(j,{sx:{width:"100%",marginBottom:"10px"},children:[e.jsx("p",{className:"product-name",children:"products"}),e.jsx(Ze,{sx:{display:"inline-block","& input":{width:"100%",border:"none",bgcolor:"var(--inputbg-color)",color:s=>s.palette.getContrastText(s.palette.background.paper)}},id:"custom-input-demo",options:l,value:d,onChange:st,componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:s=>e.jsx("div",{ref:s.InputProps.ref,children:e.jsx("input",{type:"text",...s.inputProps,style:{height:"10xp"}})})})]}),e.jsx("div",{style:{overflow:"auto"},children:e.jsxs(j,{children:[e.jsx(ds,{selectedProductData:L,setTotalValues:F,totalValues:m,rows:H,setRows:Q})," "]})})]}),e.jsxs(j,{sx:{border:"1px solid #bbbdbf",width:"30%",mt:4,borderRadius:2},children:[e.jsxs(j,{sx:{margin:"2px",p:"3px",borderRadius:1,border:"1px solid #bbbdbf"},children:[e.jsx("p",{className:"head-p-tag",children:"Clinet Details"}),e.jsxs("select",{value:D,style:{width:"100%"},onChange:Ke,children:[e.jsx("option",{value:"",label:"None",children:"None"}),G.map((s,u)=>e.jsx("option",{value:s.value,label:s.label,children:s.label},u))]})]}),e.jsxs(j,{sx:{margin:"2px",p:"3px",borderRadius:1,border:"1px solid #bbbdbf"},children:[e.jsx("p",{className:"head-p-tag",children:"party Details"}),e.jsxs("select",{style:{width:"100%"},onChange:tt,children:[e.jsx("option",{value:"select",children:"Select"}),e.jsx("option",{value:"addNew",children:"Add New"}),J.map((s,u)=>e.jsx("option",{value:s.value,label:s.label,children:s.label},u))]})]}),e.jsxs(j,{sx:{margin:"2px",p:"3px",borderRadius:1,border:"1px solid #bbbdbf",height:"42%"},children:[e.jsx("p",{className:"head-p-tag",children:"Bill Details"}),e.jsxs(j,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx("p",{children:"sub Total:"}),e.jsxs("p",{children:[" â‚¹ ",m]})]}),e.jsx("hr",{style:{margin:"8px",color:"#bbbdbf"}}),e.jsxs(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("p",{className:"head-p-tag",children:"Total amount :"}),e.jsxs("p",{children:[" â‚¹ ",m]})]})]}),e.jsxs(j,{sx:{margin:"2px",p:"3px",borderRadius:1,border:"1px solid #bbbdbf"},children:[e.jsx("p",{className:"head-p-tag",children:"Cash/UPI"}),e.jsxs(j,{sx:{display:"flex",justifyContent:"space-between",my:1,alignItems:"center"},children:[e.jsx("p",{children:"Payment Method:"}),e.jsxs("select",{style:{width:"50%"},value:T,onChange:s=>p(s.target.value),children:[e.jsx("option",{value:"none",label:"None"}),e.jsx("option",{value:"cash",label:"Cash"}),e.jsx("option",{value:"upi",label:"UPI"})]})]}),e.jsxs(j,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",my:1},children:[e.jsx("p",{children:"Amount Received:"}),e.jsx(hs,{sx:{my:1,width:"50%",background:"#F3F6F9",borderRadius:2},children:e.jsx(Ds,{onChange:Je,sx:{p:"0 !important"},id:"standard-adornment-password",endAdornment:e.jsx(Ts,{position:"end",children:e.jsx(Is,{})})})})]}),e.jsxs(j,{sx:{display:"flex",justifyContent:"space-between",my:1},children:[e.jsx("p",{children:"Change to Return:"}),e.jsxs("p",{children:["â‚¹",_-m]})]})]}),e.jsx(j,{sx:{display:"flex",justifyContent:"center",mt:1},children:e.jsx(ae,{type:"submit",variant:"contained",color:"primary",sx:{fontWeight:"bold",textTransform:"none",bgcolor:"var(--black-button)","&:hover":{background:"var(--button-hover)"},"&:disabled":{bgcolor:"var(--black-button)",color:"white"}},onClick:K,disabled:!Fe,children:Fe?"Save and Print Bill":e.jsx(bt,{style:{color:"white",marginBottom:"5px",marginTop:"5px",marginLeft:"35px",marginRight:"35px"},size:15})})})]}),e.jsx("div",{children:e.jsx(Wt,{open:M,onClose:ut,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(j,{sx:zl,children:[e.jsx(j,{sx:{display:"flex",justifyContent:"center",mb:4},children:e.jsx("h4",{children:" Add new Party"})}),e.jsxs(j,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",my:1,gap:1},children:[b.map((s,u)=>e.jsx(le,{label:s.label,intputName:s.intputName,type:s.type,value:ge[s.intputName],handleChange:s.handleChange,inputOrSelect:s.inputOrSelect,options:s.option},u)),e.jsx(ae,{type:"submit",variant:"contained",color:"primary",sx:{mt:3,fontWeight:"bold",textTransform:"none",bgcolor:"var(--black-button)","&:hover":{background:"var(--button-hover)"}},onClick:He,children:"Add party"})]})]})})}),e.jsx(qt,{handleSelectChange:w,arrOfInputs:ct,toggleDrawer:Te,state:h,ProductFormData:be,handleImageChange:nt,handleAdd:at,setToggle:ne,toggle:y}),e.jsxs("div",{id:"pagedatatoshow",className:"offscreen",style:{margin:"8px",width:"580px"},children:[e.jsx("h6",{style:{textAlign:"center",marginBottom:"10px"},children:"Tax Invoice"}),e.jsxs("div",{style:{border:"1px solid"},children:[e.jsxs("div",{className:"topsection",style:{display:"flex"},children:[e.jsxs("div",{className:"left",style:{display:"flex",flexDirection:"column",width:"50%"},children:[e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid"},children:[e.jsx("div",{style:{width:"100px",height:"100px"},children:e.jsx("img",{src:"https://res.cloudinary.com/dczou8g32/image/upload/v1714668042/DEV/jw8j76cgw2ogtokyoisi.png",alt:"img",width:90,height:90})}),e.jsxs("div",{className:"address",children:[e.jsx("h6",{children:"BILTREE"}),e.jsx("h6",{children:"54/3175"}),e.jsx("h6",{children:"MANGHAT ARCADE"}),e.jsx("h6",{children:"KALOOR-KADAVANTHRA ROAD"}),e.jsx("h6",{children:"KADAVANTHRA,ERNAKULAM"}),e.jsx("h6",{children:"GSTIN/UIN:32AAVFB8613K1Z3"}),e.jsx("h6",{children:"State Name:Kerala, Code : 32"}),e.jsx("h6",{children:"E-Mail:info@biltree.in"})]})]}),e.jsxs("div",{style:{borderBottom:"1px solid",marginLeft:"2px",display:"flex",flexDirection:"column",gap:"3px"},children:[e.jsx("h6",{children:"Consignee (Ship to)"}),e.jsx("h5",{children:Y==null?void 0:Y.label}),e.jsx("h6",{children:Y==null?void 0:Y.address1}),e.jsx("h6",{children:Y==null?void 0:Y.address2}),e.jsx("h6",{children:Y==null?void 0:Y.phonenumber}),e.jsxs("h6",{style:{display:"flex",gap:"20px",marginBottom:"3px"},children:[e.jsx("span",{children:"GSTIN/UIN"})," ",e.jsx("span",{children:": 32AAFFC5911M2Z1"})]})]}),e.jsxs("div",{style:{marginLeft:"2px",display:"flex",flexDirection:"column",gap:"3px"},children:[e.jsx("h5",{children:Y==null?void 0:Y.label}),e.jsx("h6",{children:Y==null?void 0:Y.address1}),e.jsx("h6",{children:Y==null?void 0:Y.address2}),e.jsx("h6",{children:Y==null?void 0:Y.phonenumber}),e.jsxs("h6",{style:{display:"flex",gap:"20px"},children:[e.jsx("span",{children:"GSTIN/UIN"})," ",e.jsx("span",{children:": 32AAFFC5911M2Z1"})]})]})]}),e.jsx("div",{className:"right",style:{width:"50%"},children:e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[e.jsx("thead",{style:{borderBottom:"1px solid black"},children:e.jsxs("tr",{children:[e.jsxs("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:[e.jsx("h6",{children:"Invoice No"}),e.jsx("h6",{children:Dt(new Date)})]}),e.jsxs("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:[e.jsx("h6",{children:"Date"}),e.jsx("h6",{children:(Ct=new Date)==null?void 0:Ct.toLocaleDateString()})]})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Delivery Note"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Mode/Terms of Payment"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Reference No.& Date"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Other References"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Buyer's Order No"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Date"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Dispatch Doc No"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Delivery Note Date"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",borderBottom:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Dispatch throught"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Destination"})})]}),e.jsx("tr",{children:e.jsx("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{style:{marginBottom:"75px"},children:"Terms of Delivery"})})})]})]})})]}),e.jsx("div",{className:"middlesection",children:e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[e.jsx("thead",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("h6",{children:"Sl.No"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:["Description of ",e.jsx("br",{})," Goods and Services"]})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"HSN/SAC"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Quantity"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Per"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Amount"})})]})}),e.jsx("tbody",{children:H.map((s,u)=>(console.log("firstdata",s),e.jsxs("tr",{style:{borderBottom:"1px solid black"},children:[e.jsx("td",{style:{paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:u+1})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:s.name})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:" "})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:s.qty})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsxs("h6",{children:[" ",s.rate]})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsxs("h6",{children:[" ",s.unit]})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:(s.rate||0)*s.qty||0})})]},u)))})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px",marginLeft:"2px"},children:[e.jsx("h6",{children:"Amount Chargeable (in words)"}),e.jsx("h6",{children:"E.&.O.E"})]}),e.jsx("h6",{style:{marginTop:"5px"},children:"INR Sixteen lakh Twenty Eight Thousand Six Hundred Fifty One Only"}),e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%",marginTop:"10px"},children:[e.jsxs("thead",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:[e.jsxs("tr",{children:[e.jsx("th",{style:{borderLeft:"1px solid black"},rowSpan:"2",children:e.jsx("h6",{children:" HSN/SAC"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},rowSpan:"2",children:e.jsx("h6",{children:" Taxable Value"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderBottom:"1px solid black",borderRight:"1px solid black"},colSpan:"2",children:e.jsx("h6",{children:" CGST"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderBottom:"1px solid black"},colSpan:"2",children:e.jsx("h6",{children:" SGST/UTGST"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Total Tax Amount"})})]}),e.jsxs("tr",{children:[e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Amount"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:e.jsx("h6",{children:" Amount"})})]})]}),e.jsx("tbody",{style:{borderBottom:"1px solid black"},children:et==null?void 0:et.map(s=>e.jsxs("tr",{children:[e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",s==null?void 0:s.hsn]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",s==null?void 0:s.total.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",s==null?void 0:s.cgstRate]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",s==null?void 0:s.cgstAmount.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",s==null?void 0:s.sgstRate]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",s==null?void 0:s.sgstAmount.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:((s==null?void 0:s.total)+(s==null?void 0:s.sgstAmount)+(s==null?void 0:s.cgstAmount)).toFixed(2)})})]},s==null?void 0:s.hsn))})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"5px",marginLeft:"2px"},children:[e.jsx("h6",{children:"Tax Amount (in words)"}),e.jsx("h6",{children:"INR Sixteen lakh Twenty Eight Thousand Six Hundred Fifty One Only"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"end",marginTop:"5px",marginLeft:"50%",fontSize:"12px"},children:[e.jsx("h6",{children:"Company's bank details"}),e.jsxs("div",{style:{display:"flex",gap:"16.4px"},children:[e.jsx("h6",{children:"A/c Holder Name"}),e.jsx("h6",{children:": BILTREE"})]}),e.jsxs("div",{style:{display:"flex",gap:"38px"},children:[e.jsx("h6",{children:"Bank Name"}),e.jsx("h6",{children:": ICICI BANK CA - 785236984125"})]}),e.jsxs("div",{style:{display:"flex",gap:"56.6px"},children:[e.jsx("h6",{children:"A/c No"}),e.jsx("h6",{children:": 785236984125"})]}),e.jsxs("div",{style:{display:"flex",gap:"12.4px"},children:[e.jsx("h6",{children:"Branch & IFS Code"}),e.jsx("h6",{children:": PANAMPILLY MAGAR & ICIC0002483"})]}),e.jsx("h6",{children:"SWIFT Code"})]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsxs("div",{className:"leftsection",style:{width:"50%",marginLeft:"2px",marginBottom:"3px"},children:[e.jsx("h6",{style:{borderBottom:"1px solid black",width:"60px"},children:"Declaration"}),e.jsx("h6",{children:"we seclare that this invoice shows the actual price of the goods described and that all particulars are true and currect"})]}),e.jsxs("div",{className:"rightsection",style:{width:"50%",textAlign:"end",borderTop:"1px solid black",borderLeft:"1px solid black"},children:[e.jsx("h6",{style:{marginBottom:"23px",marginRight:"5px"},children:"for BILTREEE"}),e.jsx("h6",{style:{marginRight:"5px"},children:"Authorised Signatory"})]})]})]})]})]})}function Vl(){rs();const[l,a]=t.useState(""),[L,V]=t.useState(null),[m,F]=t.useState([]),[_,X]=t.useState(0),[H,Q]=t.useState(0),[J,se]=t.useState(""),[G,re]=t.useState(""),[d,v]=t.useState(""),[g,E]=t.useState([]),[M,C]=t.useState(!1),[T,p]=t.useState(!0),D=()=>{C(!0),Bs({payment_mode:"IN",project_id:1}).then(y=>{C(!1),console.log("data.data.responseData",y.data.responseData),E(y.data.responseData)}).catch(y=>{C(!1),console.log(y)})};t.useEffect(()=>{const ne=Dt(new Date);console.log(ne),v(ne),D()},[]),t.useEffect(()=>{Rt().then(y=>{console.log("partyData:",y);const ne=y.responseData.map(be=>({value:be.id,label:be.name}));console.log(ne),F(ne)}).catch(y=>{console.log(y)})},[]);const te=y=>{a(y.target.value)},xe=y=>{const ne=y.target.files[0];V(ne)},Ne=(y,ne)=>{X(ne.value)},he=y=>{Q(y.target.value)},Oe=[{intputName:"receiptno",label:"Recipt No",type:"text",value:d,disabled:"disabled"},{handleChange:y=>{console.log(y.target.value),se(y.target.value)},label:"Date",type:"date"},{handleChange:y=>{console.log(y.target.value),re(y.target.value)},intputName:"received",label:"Received",type:"number"}],ge=()=>{p(!1);const y={date:J,payment_type:parseInt(H),party_id:_,project_id:1,amount:parseInt(G),payment_mode:"IN",description:l,ref_no:d};console.log(y),Rs(y).then(ne=>{console.log("paymentInAPI",ne),alert("Receipt added"),D();const we=Dt(new Date);console.log(we),v(we),se(""),Q(""),X(0),re(""),a(""),p(!0)}).catch(ne=>{console.log(ne),p(!0)})},S=y=>{const ne=os(e.jsxs("div",{id:"recept-pdf",children:[e.jsxs("div",{className:"header-of-receipt",style:{display:"flex",marginBottom:"30px",marginTop:"10px"},children:[e.jsx("img",{src:"https://res.cloudinary.com/dczou8g32/image/upload/v1714668042/DEV/jw8j76cgw2ogtokyoisi.png",alt:"logo",style:{height:"50px"}}),e.jsxs("div",{className:"address",style:{textAlign:"center",display:"flex",flexDirection:"column",marginLeft:"25px"},children:[e.jsx("h5",{style:{fontSize:"13px",width:"300px"},children:"BILTREE FY204-25"}),e.jsxs("p",{style:{fontSize:"13px",width:"300px"},children:["54/3175, MANGHAT ARCADE ",e.jsx("br",{})," 1ST FLOOR, KALOOR-KADAVANTHRA ROAD"," ",e.jsx("br",{})," ERANAKLAM"]}),e.jsx("p",{style:{fontSize:"13px",width:"300px"},children:"StateName:Kerala, Code:32"}),e.jsx("p",{style:{fontSize:"13px",width:"300px"},children:"E-Mail:info@biltree.in"})]})]}),e.jsx("h5",{className:"resceipt-text",style:{fontSize:"13px",width:"600px",textAlign:"center"},children:"Receipt voucher"}),e.jsxs("div",{className:"date-no",style:{display:"flex",justifyContent:"space-between",width:"950px"},children:[e.jsxs("p",{style:{fontSize:"13px",width:"600px",marginLeft:"10px"},children:["No:",y==null?void 0:y.ref_no]}),e.jsxs("p",{style:{fontSize:"13px",width:"600px"},children:["Date:",new Date(y==null?void 0:y.date).toLocaleDateString()]})]}),e.jsx("p",{style:{fontSize:"13px",width:"600px",marginTop:"10px",marginLeft:"10px"},children:"Through: ICICI BANK CA-313254897"}),e.jsxs("div",{children:[e.jsxs("div",{style:{marginTop:"20px",width:"950px",marginLeft:"10px",display:"flex"},children:[e.jsxs("div",{style:{width:"40%",borderRight:"1px solid"},children:[e.jsx("hr",{style:{width:"400px"}}),e.jsx("p",{style:{marginLeft:"20px"},children:"Particulars"}),e.jsx("hr",{style:{width:"400px"}}),e.jsx("p",{style:{fontSize:"13px",width:"600px"},children:"Account :"}),e.jsx("p",{style:{marginLeft:"20px",fontSize:"13px",width:"600px"},children:y==null?void 0:y.party_id})]}),e.jsxs("div",{style:{width:"20%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("hr",{style:{width:"190px"}}),e.jsx("p",{style:{marginLeft:"20px",textAlign:"end"},children:"Amount"}),e.jsx("hr",{style:{width:"190px"}}),e.jsx("p",{style:{fontSize:"13px",width:"188px",textAlign:"end",marginTop:"20px"},children:y==null?void 0:y.amount.toLocaleString("en-IN",{style:"decimal",minimumFractionDigits:2})})]}),e.jsxs("div",{children:[e.jsx("hr",{style:{width:"190px"}}),e.jsx("p",{style:{marginLeft:"25px",textAlign:"end"},children:y==null?void 0:y.amount.toLocaleString("en-IN",{style:"decimal",minimumFractionDigits:2})}),e.jsx("hr",{style:{width:"190px"}})]})]})]}),e.jsx("p",{className:"resceipt-text",style:{fontSize:"13px",width:"580px",textAlign:"end",marginTop:"90px"},children:"Authorised Signatory"}),e.jsxs("div",{style:{display:"flex",width:"580px",marginTop:"20px"},children:[e.jsx("p",{style:{marginLeft:"20px",fontSize:"13px",width:"580px"},children:"Prepared by"}),e.jsx("p",{style:{fontSize:"13px",width:"580px",textAlign:"center"},children:"Checked by"}),e.jsx("p",{style:{fontSize:"13px",width:"580px",textAlign:"end"},children:"Verified by"})]})]})]})),be=new mt("p","pt","a4",!0);be.html(ne,{callback:()=>{const we=be.output("bloburl");window.open(we,"_blank")}})};return e.jsxs("div",{className:"payment-in-section",children:[e.jsx("h2",{children:"Receipt"}),e.jsxs("div",{className:"inner-section",children:[e.jsxs("div",{style:{display:"flex",gap:"84px",padding:"20px"},children:[e.jsxs(j,{sx:{width:"50%"},children:[e.jsxs(j,{sx:{width:"100%",marginBottom:"10px"},children:[e.jsx("p",{className:"party-name",children:"Party"}),e.jsx(Ze,{sx:{display:"inline-block","& input":{width:"100%",border:"none",bgcolor:"var(--inputbg-color)",color:y=>y.palette.getContrastText(y.palette.background.paper)}},id:"custom-input-demo",options:m,onChange:Ne,componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:y=>e.jsx("div",{ref:y.InputProps.ref,children:e.jsx("input",{type:"text",...y.inputProps,style:{height:"38px"}})})})]}),e.jsx(j,{sx:{display:"flex",justifyContent:"space-between",my:1,alignItems:"center"},children:e.jsx(le,{intputName:"paymenttype",label:"Payment type",inputOrSelect:"select",handleChange:he,options:[{value:"None",label:"None"},{value:"5",label:"Cash"},{value:"23",label:"UPI"}]})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{htmlFor:"textarea",children:"Description"}),e.jsx("textarea",{id:"textarea",value:l,onChange:te,rows:5,cols:50})]}),e.jsx(ae,{disableRipple:!0,sx:{mt:2,textTransform:"none",color:"var(--black-button)","&:hover":{background:"transparent"}},component:"label",children:e.jsx("input",{type:"file",hidden:!0,onChange:xe})})]}),e.jsxs(j,{sx:{width:"50%",display:"flex",flexDirection:"column",alignItems:"flex-end"},className:"leftsectioninputs",children:[e.jsx(j,{sx:{width:"50%",display:"flex",flexDirection:"column",gap:5},children:Oe.slice(0,2).map((y,ne)=>e.jsx(le,{label:y.label,type:y.type,handleChange:y.handleChange,intputName:y.intputName,inputOrSelect:y.inputOrSelect,value:y.value,disabled:y.disabled},ne))}),e.jsx(j,{sx:{width:"50%",marginTop:10},children:Oe.slice(2).map((y,ne)=>e.jsx(le,{label:y.label,type:y.type,handleChange:y.handleChange,intputName:y.intputName,inputOrSelect:y.inputOrSelect},ne))})]})]}),e.jsx("hr",{}),e.jsx("div",{style:{display:"flex",justifyContent:"end"},children:e.jsx(ae,{variant:"contained",sx:{height:40,my:2,marginRight:2,textTransform:"none",bgcolor:"var(--black-button)","&:disabled":{bgcolor:"var(--black-button)",color:"white"}},onClick:()=>ge(),disabled:!T,children:T?"Save":e.jsx(bt,{style:{color:"white",marginBottom:"15px",marginTop:"15px"},size:20})})})]}),e.jsx("div",{className:"table",children:M?e.jsx(j,{sx:{my:2,mx:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(bt,{color:"inherit"})}):g===null?e.jsxs(j,{sx:{my:2,mx:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(zt,{sx:{mx:"auto"},style:{fontSize:"40px"}}),e.jsx("p",{style:{textAlign:"center"},children:"No receipt available"})]}):e.jsx(es,{component:ts,id:"pdf-content",children:e.jsxs(ss,{children:[e.jsx(ls,{children:e.jsxs(It,{children:[e.jsx(ie,{children:"ID"}),e.jsx(ie,{children:"Data"}),e.jsx(ie,{children:"Description"}),e.jsx(ie,{children:"Amount"}),e.jsx(ie,{children:"Action"})]})}),e.jsx(ns,{children:g==null?void 0:g.map((y,ne)=>(console.log("row",y),e.jsxs(It,{children:[e.jsx(ie,{children:ne+1}),e.jsx(ie,{children:new Date(y==null?void 0:y.date).toLocaleDateString()}),e.jsx(ie,{children:y==null?void 0:y.description}),e.jsxs(ie,{children:[" ",y==null?void 0:y.amount.toLocaleString("en-IN",{style:"decimal",minimumFractionDigits:2})]}),e.jsx(ie,{children:e.jsx(ae,{disableRipple:!0,sx:{textTransform:"none",color:"var(--black-button)",fontWeight:"600","&:hover":{background:"transparent"}},onClick:()=>S(y),children:"View"})})]},ne+1)))})]})})}),e.jsx("div",{})]})}function Ms({selectedProductData:l,totalValues:a,setTotalValues:L,setRows:V,rows:m}){const[F,_]=t.useState({}),[X,H]=t.useState([]),Q=()=>{yt().then(d=>{console.log("tax:",d);const v=d.map(g=>({value:g.percentage,label:g.name?`${g.name} ${g.percentage}`:"none",taxlabel:g.percentage}));H(v)}).catch(d=>{console.log(d)})};t.useEffect(()=>{Q()},[]),t.useEffect(()=>{var d,v;if(l){console.log(l);const g={id:l.id,itemCode:l.itemCode,name:l.name,unit:l.unit,rate:l.rate,taxApplied:` ${(d=l.tax_rate)==null?void 0:d.name} ${(v=l.tax_rate)==null?void 0:v.percentage}`,qty:1};V(E=>[...E,g])}},[l]),t.useEffect(()=>{const d=m.map(v=>{var te;const g=parseInt(v.qty)||0,E=parseInt(v.rate)||0,M=parseFloat(v.discount)||0,C=parseFloat((te=v.taxApplied)==null?void 0:te.split("@")[1].replace("%",""))||0,T=g*E;let p=T;g>0&&M>0&&(p-=T*M/100);const D=p+p*C/100;return{...v,total:v.amountafterdescount?v.amountafterdescount:D}});V(d),d.reduce((v,g)=>v+g.amountafterdescount?g.amountafterdescount:g.total,0)},[]);const J=d=>{console.log(d);const v={...d,isNew:!1};return V(m.map(g=>g.id===d.id?v:g)),v},se=d=>{_(d)},G=(d,v,g)=>{const E=m.map(M=>{const C=parseInt(M.qty)||0,T=parseInt(M.rate)||0,p=C*T;if(M.id===d){let D={...M,[v]:g};return v==="descountvalue"?(console.log(p-p*g/100),D.amountafterdescount=p*g/100):v==="amountafterdescount"&&(D.descountvalue=100-g/p*100),D}return M});V(E)},re=[{field:"id",headerName:"Slno",flex:.5,editable:!1},{field:"name",headerName:"Item Name",type:"number",flex:1,editable:!1},{field:"qty",headerName:"Qty",flex:.5,editable:!0,type:"number"},{field:"unit",headerName:"Unit",flex:.75,editable:!1,type:"number"},{field:"rate",headerName:"rate",flex:1,editable:!1,type:"number"},{field:"price",headerName:"price (without tax)",flex:1,editable:!1,type:"number",renderHeader:()=>e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("p",{children:"price"})}),e.jsx("hr",{style:{width:"100%"}}),e.jsx("div",{style:{fontWeight:"bold"},children:"(without tax)"})]}),renderCell:d=>{const v=parseInt(d.row.qty)||0,g=parseInt(d.row.rate)||0;parseFloat(d.row.discount);const E=d.row.taxApplied;return typeof E=="string"&&parseInt(E.split("@")[1].replace("%","")),v*g-(d.row.amountafterdescount||0)}},{field:"discount",headerName:"Discount %",flex:1.5,editable:!1,hideable:!1,sortable:!1,filterable:!1,type:"number",renderHeader:()=>e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{margin:"auto"},children:"Discount %"}),e.jsx("hr",{style:{width:"100%"}}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx("div",{style:{flex:"1",textAlign:"center"},children:"%"}),e.jsx("div",{style:{height:"23px",width:"2px",backgroundColor:"#e6e6e6"}}),e.jsx("div",{style:{flex:"1",textAlign:"center"},children:"Amount"})]})]}),renderCell:d=>e.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"space-evenly"},children:[e.jsx("div",{style:{flex:"1",textAlign:"center"},children:e.jsx("input",{style:{width:"100%",bgcolor:"transparent",outline:"none",border:"none",paddingBottom:"20px",paddingTop:"20px"},type:"text",value:d.row.descountvalue,onChange:v=>G(d.row.id,"descountvalue",v.target.value)})}),e.jsx("div",{style:{height:"300px",width:"2px",backgroundColor:"#e6e6e6"}}),e.jsx("div",{style:{flex:"1",textAlign:"center"},children:e.jsx("input",{style:{width:"100%",bgcolor:"transparent",outline:"none",border:"none",paddingBottom:"20px",paddingTop:"20px"},type:"text",value:d.row.amountafterdescount,onChange:v=>G(d.row.id,"amountafterdescount",v.target.value)})})]})},{field:"taxApplied",headerName:"Tax Applied",flex:2,type:"text",renderHeader:()=>e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{margin:"auto"},children:"Tax %"}),e.jsx("hr",{style:{width:"100%"}}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx("div",{style:{flex:"1",textAlign:"center"},children:"%"}),e.jsx("div",{style:{height:"23px",width:"2px",backgroundColor:"#e6e6e6"}}),e.jsx("div",{style:{flex:"1",textAlign:"center"},children:"Amount"})]})]}),renderCell:d=>{var E,M;const v=C=>{console.log("newvalue:",C.target.value);const T={...d.row,taxAppliedamount:C.target.value},p=m.map(D=>D.id===d.row.id?T:D);V(p),console.log(p)};console.log("data to show in select",d.row.taxAppliedamount?d.row.taxAppliedamount.length:(E=d.row.taxApplied)==null?void 0:E.split("GST@ ")[1].length);const g=()=>{var te,xe,Ne,he;const C=d.row.taxApplied?d.row.taxAppliedamount?parseInt((te=d.row.taxAppliedamount)==null?void 0:te.replace("%"," ")):parseFloat((Ne=(xe=d.row)==null?void 0:xe.taxApplied)==null?void 0:Ne.split("@")[1].replace("%","")):parseInt((he=d.row.taxAppliedamount)==null?void 0:he.replace("%"," "));return(d.row.qty*d.row.rate-(d.row.quantity||0)*(d.row.rate||0)-(d.row.amountafterdescount||0))*C/100};return e.jsxs("div",{style:{width:"100%",display:"flex"},children:[e.jsx("select",{value:d.row.taxAppliedamount?d.row.taxAppliedamount:(M=d.row.taxApplied)==null?void 0:M.split("GST@ ")[1],onChange:v,style:{width:"100%",padding:"8px",border:"none",backgroundColor:"white",margin:"0px"},children:X.map(C=>(console.log(X,"taxooo"),e.jsx("option",{value:C.value,children:C.label},C.value)))}),e.jsx("div",{style:{height:"50px",width:"2px",backgroundColor:"#e6e6e6"}}),e.jsx("input",{style:{width:"100%",bgcolor:"transparent",outline:"none",border:"none",paddingBottom:"20px",paddingTop:"20px",background:"white"},type:"text",value:g(),disabled:!0})]})}},{field:"total",type:"number",headerName:"Total",flex:1,renderCell:d=>{var T,p;const v=parseInt(d.row.qty)||0,g=parseInt(d.row.rate)||0;parseFloat(d.row.discount);let E=0;d.row.taxAppliedamount?E=parseFloat(d.row.taxAppliedamount.replace("%",""))||0:(T=d.row.taxApplied)!=null&&T.value?E=parseFloat(d.row.taxApplied.value.replace("%",""))||0:d.row.taxApplied&&(E=parseFloat((p=d.row.taxApplied)==null?void 0:p.split("@")[1].replace("%",""))||0);const C=v*g-(d.row.amountafterdescount||0);return(C*E/100+C).toFixed(2)}}];return e.jsx(j,{sx:{height:"100%","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary"},background:"var(--bgwhite)","& .MuiDataGrid-columnsContainer .":{borderRight:"1px solid rgba(224, 224, 224, 1)"},"&  .MuiDataGrid-cell":{borderRight:"1px solid rgba(224, 224, 224, 1)"},"&.MuiDataGrid-row":{borderBottomColor:"none"},"& .MuiDataGrid-columnHeader":{borderRight:"1px solid rgba(224, 224, 224, 1)"},"& .css-yrdy0g-MuiDataGrid-columnHeaderRow":{bgcolor:"#f3f6f9 !important"},"& .css-boxz2p-MuiDataGrid-root .MuiDataGrid-columnHeaderTitleContainerContent  ":{width:"100%"}},children:e.jsx(ws,{rows:m,columns:re,editMode:"row",disableColumnMenu:!0,rowModesModel:F,onRowModesModelChange:se,processRowUpdate:J,slotProps:{toolbar:{setRows:V,setRowModesModel:_}},sx:{"& .MuiDataGrid-footerContainer":{display:"none !important"},"& .css-3dzjca-MuiPaper-root-MuiPopover-paper-MuiMenu-paper ":{maxHeightheight:"calc(5% - 96px) !important"},"& .css-74bi4q-MuiDataGrid-overlayWrapper":{height:"60px"},"& .MuiDataGrid-columnHeaderTitleContainerContent":{width:"100%"}}})})}function Ul(){var St,At;const[l,a]=t.useState([]),[L,V]=t.useState(""),[m,F]=t.useState(""),[_,X]=t.useState(null),[H,Q]=t.useState([]),[J,se]=t.useState([]),[G,re]=t.useState([]),[d,v]=t.useState(null),[g,E]=t.useState([]),[M,C]=t.useState({right:!1}),[T,p]=t.useState(""),[D,te]=t.useState([]),[xe,Ne]=t.useState([]),[he,ke]=t.useState([]),[de,Oe]=t.useState({}),[ge,S]=t.useState({name:"",quantity:"",rate:0,hsn:""}),[y,ne]=t.useState("");t.useState("");const[be,we]=t.useState(null),[ue,Ge]=t.useState([]),[De,We]=t.useState(!0),[Ee,Me]=t.useState(),[Pe,qe]=t.useState(0),[z,A]=t.useState(""),[h,N]=t.useState(""),[W,Re]=t.useState(""),[k,c]=t.useState(""),[O,ve]=t.useState(""),[je,Ce]=t.useState(),[Fe,Be]=t.useState(0),[Y,Xe]=t.useState(null),[fe,et]=t.useState(!1),[ht,P]=t.useState(0),[Z,pe]=t.useState(!0),[ee,me]=t.useState({}),Ke=(r=>{const B=r.reduce(($,oe)=>{var kt,Lt,Ot,wt,Bt;console.log("firstcurr.taxRate",parseInt((kt=oe.taxApplied)==null?void 0:kt.split("@")[1].replace("%",""))||0),$[oe.hsn]||($[oe.hsn]={hsn:oe.hsn,total:0,cgstRate:(parseInt((Lt=oe.taxApplied)==null?void 0:Lt.split("@")[1].replace("%",""))||0)/2,sgstRate:(parseInt((Ot=oe.taxApplied)==null?void 0:Ot.split("@")[1].replace("%",""))||0)/2,cgstAmount:0,sgstAmount:0});const Ue=oe.qty*oe.rate;return $[oe.hsn].total+=Ue,$[oe.hsn].cgstAmount+=Ue*((parseInt((wt=oe.taxApplied)==null?void 0:wt.split("@")[1].replace("%",""))||0)/100)/2,$[oe.hsn].sgstAmount+=Ue*((parseInt((Bt=oe.taxApplied)==null?void 0:Bt.split("@")[1].replace("%",""))||0)/100)/2,$},{});return Object.values(B)})(J),tt=()=>{const r=document.querySelector("#pagedatatoshow"),B=new mt("p","pt","a4",!0);B.html(r,{callback:()=>{const $=B.output("bloburl");window.open($,"_blank")}})},_e=r=>{const B=r.target.files[0];Xe(B)},st=r=>{Be(r.target.value)},Je=r=>{et(r.target.checked)},ut=r=>{const B=r.target.files[0];we(B)},jt=r=>{console.log(r.target.value);const B=ue.find($=>$.taxlabel==r.target.value);console.log(B),Oe(B)},b=r=>{p(r.target.value),console.log(r.target.value)},K=r=>{ne(r.target.value),console.log(r.target.value)};t.useEffect(()=>{const B=J.map(oe=>{var Ut;const Ue=parseInt(oe.qty)||0,kt=parseInt(oe.rate)||0,Ot=Ue*kt-(oe.amountafterdescount||0);let wt=0;oe.taxAppliedamount?wt=parseFloat(oe.taxAppliedamount.replace("%",""))||0:(Ut=oe.taxApplied)!=null&&Ut.value?wt=parseFloat(oe.taxApplied.value.replace("%",""))||0:oe.taxApplied&&(wt=parseFloat(oe.taxApplied.split("@")[1].replace("%",""))||0);const Bt=(Ot*wt/100+Ot).toFixed(2);return{...oe,total:Bt}}).reduce((oe,Ue)=>oe+parseFloat(Ue.total),0),$=Math.round(B);P(fe?(B-$).toFixed(2):0),Q(fe?$:B)},[J,fe]);const w=()=>{const r=new FormData;r.append("name",ge.name),r.append("hsn",ge.hsn),r.append("rate",parseInt(ge.rate)),r.append("quantity",parseInt(ge.quantity)),r.append("unit",T),r.append("projectid",parseInt(y)),r.append("is_master_product",De),r.append("tax_rate",de.id),r.append("image",be),Pt(r).then(B=>{it(),B.status===200&&(S({name:"",qate:"",quantity:"",rate:"",taxvalue:"",hsn:""}),p(""),Oe(""),alert("Product added successfully"))}).catch(B=>{console.log(B),alert("Problem in adding product")})},ye=()=>{yt().then(r=>{console.log("tax:",r);const B=r.map($=>({value:$.percentage,label:$.name?`${$.name} ${$.percentage}`:"none",taxlabel:$.percentage,id:$.id}));console.log(B),Ge(B)}).catch(r=>{console.log(r)})},Te=()=>{Vt().then(r=>{console.log("category:",r);const B=r==null?void 0:r.responseData.map($=>({value:$.id,label:`${$.name}`}));B.unshift({value:0,label:"None"}),console.log("categoryOptions",B),te(B)}).catch(r=>{console.log(r)})},nt=()=>{ft().then(r=>{console.log("projects:",r);const B=r==null?void 0:r.responseData.map($=>({value:$.id,label:`${$.name} ( ${$.client_name} )`}));B.unshift({value:0,label:"None"}),console.log("projectdData",B),Ne(B)}).catch(r=>{console.log(r)})},rt=()=>{Tt().then(r=>{console.log("units:",r);const B=r==null?void 0:r.responseData.map($=>({value:$.id,label:$.name}));B.unshift({value:0,label:"None"}),console.log("unitsdData",B),ke(B)}).catch(r=>{console.log(r)})},dt=()=>{Rt().then(r=>{console.log("partyData:",r);const B=r.responseData.map($=>({value:$.id,label:$.name,address1:$.address1,address2:$.address2,phonenumber:$.phonenumber}));console.log("partyData",B),a(B)}).catch(r=>{console.log(r)})},it=async()=>{const oe=(await lt()).responseData.map(Ue=>Ue.name).map((Ue,kt)=>({value:`option${kt+1}`,label:Ue}));oe.unshift({value:-2,label:"Add"}),re(oe)};t.useEffect(()=>{_s().then(r=>{console.log("stateData",r.data.responseData);const B=r.data.responseData.map($=>({value:$.id,label:$.name}));B.unshift({value:-2,label:"Select"}),Ce(B)}).catch(r=>{console.log(r)}),dt(),it(),re([{value:-2,label:"Add"}]),ye(),Te(),nt(),rt()},[]);const at=(r,B)=>$=>{console.log($),console.log("Toggle Drawer:",r,B),!($&&$.type==="keydown"&&($.key==="Tab"||$.key==="Shift"))&&C({...M,[r]:B})},ct=r=>{V(r.target.value)},Nt=r=>{F(r.target.value)},R=[{handleChange:r=>{A(r.target.value)},intputName:"receiptno",label:"Recipes No",type:"number",value:z},{handleChange:r=>{N(r.target.value)},intputName:"invoiceno",label:"Invoice Number",type:"number",value:h},{handleChange:r=>{Re(r.target.value)},intputName:"invoicedate",label:"Invoice Date",type:"date",value:W},{handleChange:r=>{c(r.target.value)},intputName:"data",label:"Date",type:"date",value:k},{handleChange:r=>{console.log("firste.target.value",r.target.value),ve(r.target.value)},intputName:"statusofsupply",label:"State of supply",inputOrSelect:"select",options:je,value:O}],ce=r=>{const{name:B,value:$}=r.target;S(oe=>({...oe,[B]:$}))},o=[{handleChange:ce,intputName:"name",label:" Product Name",type:"text"},{handleChange:ce,intputName:"rate",label:"Rate",type:"number"},{handleChange:ce,intputName:"quantity",label:"Quantity",type:"number"},{handleChange:jt,intputName:"taxrate",label:"Tax Rate",inputOrSelect:"select",options:ue},{intputName:"taxvalue",label:" Tax Value",value:parseFloat(ge.rate||0)*parseFloat(ge.quantity||0)*(parseFloat((St=de.value)==null?void 0:St.replace("%",""))||0)/100,disabled:"disabled"},{handleChange:ce,intputName:"hsn",label:"HSN",type:"text"},{handleChange:b,intputName:"unit",label:"Unit",inputOrSelect:"select",options:he},{handleChange:K,intputName:"project",label:"Projects",inputOrSelect:"select",options:xe}],I=async(r,B)=>{if(B){if(B.value===-2)console.log(B.value===-2),at("right",!0)();else if(v(B),B){console.log(B.label);const $=await lt();console.log($);const Ue=$.responseData.find(Lt=>Lt.name===(B==null?void 0:B.label));console.log(Ue),X(Ue),console.log(Ue);const kt={id:1,itemName:Ue.name,qty:1,unit:Ue.unit,price:Ue.price,discount:0,taxApplied:0,total:Ue.price};E([...g,kt])}}},q=r=>{p(r.target.value),console.log(r.target.value)},U=(r,B)=>{console.log("firstnewValue",B),me(B),Me(B)},Se=r=>{console.log(r.target.value),qe(r.target.value)},ot=async()=>{pe(!1);const r=await J.map(oe=>({product_id:oe.id,quantity:oe.qty,Price:oe.qty*oe.rate,discount:parseFloat((oe==null?void 0:oe.descountvalue)||0),tax_rate_id:oe.taxId||1})),B={party:Ee.value,billing_address:m,date:k,invoice_date:W,invoice_no:h,total_amount:"",payment_type:Fe,description:L,state_id:O,product_details:r},$=new FormData;$.append("party",B.party),$.append("billing_address",B.billing_address),$.append("date",B.date),$.append("invoice_date",B.invoice_date),$.append("invoice_no",B.invoice_no),$.append("total_amount",B.total_amount),$.append("payment_type",B.payment_type),$.append("description",B.description),$.append("state",B.state_id),$.append("phone",Pe),$.append("image",Y),$.append("product_details",JSON.stringify(B.product_details)),wl($).then(oe=>{console.log(oe),alert("creditnote added"),qe(""),A(""),N(""),Re(""),c(""),se([]),V(""),F(""),pe(!0)}).catch(oe=>{console.log(oe),pe(!0)})};return e.jsxs("div",{className:"creaditnotepage",children:[e.jsx("h2",{children:"Creadit Note"}),e.jsxs("div",{className:"inner-section",children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10,padding:"20px"},children:[e.jsxs("div",{className:"top-section",style:{width:"100%",display:"flex",justifyContent:"space-between",gap:10},children:[e.jsxs("div",{className:"right",children:[e.jsxs("div",{style:{display:"flex"},children:[e.jsxs("div",{style:{width:"100%",marginBottom:"10px"},children:[e.jsx("p",{className:"party-name",children:"Party"}),e.jsx(Ze,{style:{display:"inline-block","& input":{width:"100%",border:"none",bgcolor:"var(--inputbg-color) !important",color:r=>r.palette.getContrastText(r.palette.background.paper)}},id:"custom-input-demo",options:l,value:Ee,onChange:U,componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:r=>e.jsx("div",{ref:r.InputProps.ref,children:e.jsx("input",{type:"text",...r.inputProps,style:{height:"41px"}})})})]}),e.jsx(le,{label:"Phone No",type:"tel",intputName:"phoneno",value:Pe,handleChange:Se})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{style:{fontSize:"12px"},htmlFor:"textarea",children:"Billing Address"}),e.jsx("textarea",{id:"textarea",value:m,onChange:Nt,rows:5,cols:30})]})]}),e.jsxs("div",{className:"left",style:{display:"flex",flexDirection:"column",gap:10},children:[e.jsx("div",{style:{display:"flex",gap:10},children:R.slice(0,2).map((r,B)=>e.jsx(le,{handleChange:r.handleChange,label:r.label,type:r.type,intputName:r.intputName,inputOrSelect:r.inputOrSelect,options:r.options,value:r.value},B))}),e.jsx("div",{style:{display:"flex",gap:10},children:R.slice(2,4).map((r,B)=>e.jsx(le,{handleChange:r.handleChange,label:r.label,type:r.type,intputName:r.intputName,inputOrSelect:r.inputOrSelect,options:r.options,value:r.value},B))}),e.jsx(le,{handleChange:R[4].handleChange,state:R[4].state,label:R[4].label,type:R[4].type,intputName:R[4].intputName,inputOrSelect:R[4].inputOrSelect,options:R[4].options})]})]}),e.jsxs("div",{className:"center-section",children:[e.jsxs(j,{sx:{width:"100%",marginBottom:"10px","& .css-g6k71e-MuiAutocomplete-root":{width:"100% !important",paddingTop:"10px"},"& .css-6oxs1k-MuiAutocomplete-root":{width:"100% !important"}},children:[e.jsx("p",{className:"party-name",children:"products"}),e.jsx(Ze,{sx:{display:"inline-block","& input":{width:"100% !important ",height:"41px",border:"none",bgcolor:"var(--inputbg-color)",color:r=>r.palette.getContrastText(r.palette.background.paper)}},id:"custom-input-demo",options:G,value:d,onChange:I,componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:r=>e.jsx("div",{ref:r.InputProps.ref,children:e.jsx("input",{type:"text",...r.inputProps,style:{height:"10xp"}})})})]}),e.jsx(Ms,{selectedProductData:_,totalValues:H,rows:J,setRows:se})]}),e.jsxs("div",{className:"bottom-section",style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{className:"left",style:{display:"flex",flexDirection:"column",width:"50%",gap:1,alignItems:"flex-start"},children:[e.jsx("div",{children:e.jsx(le,{intputName:"paymenttype",label:"Payment type",inputOrSelect:"select",handleChange:st,options:[{value:"None",label:"None"},{value:"Cash",label:"Cash"},{value:"UPI",label:"UPI"}]})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{style:{fontSize:"12px"},htmlFor:"textarea",children:"Description"}),e.jsx("textarea",{id:"descriptiontextarea",value:L,onChange:ct,rows:2,cols:50})]}),e.jsxs(ae,{disableRipple:!0,style:{textTransform:"none",color:"var(--black-button)","&:hover":{background:"transparent"}},component:"label",children:[e.jsx("img",{src:xt,alt:"add img"}),e.jsx(Ve,{variant:"string",style:{pl:1},children:"Add Photo"}),e.jsx("input",{type:"file",hidden:!0,onChange:_e})]})]}),e.jsx("div",{className:"right",style:{display:"flex",flexDirection:"column",alignItems:"end",gap:1},children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:5},children:[e.jsx(le,{type:"checkbox",handleChange:Je}),e.jsx(le,{label:"Round off",type:"number",intputName:"roundoff",value:ht,disabled:"disabled"}),e.jsx(le,{label:"total",type:"number",intputName:"total",value:H,disabled:"disabled"})]})})]})]}),e.jsx("hr",{}),e.jsxs("div",{style:{display:"flex",justifyContent:"end"},children:[e.jsx(ae,{variant:"contained",sx:{height:40,my:2,marginRight:2,textTransform:"none",bgcolor:"var(--black-button)"},onClick:tt,children:"Print"}),e.jsx(ae,{variant:"contained",sx:{height:40,my:2,marginRight:2,textTransform:"none",bgcolor:"var(--black-button)","&:disabled":{bgcolor:"var(--black-button)",color:"white"}},onClick:ot,disabled:!Z,children:Z?"Save":e.jsx(bt,{style:{color:"white",marginBottom:"15px",marginTop:"15px"},size:20})})]})]}),e.jsx(qt,{handleSelectChange:q,arrOfInputs:o,toggleDrawer:at,state:M,ProductFormData:ge,handleImageChange:ut,handleAdd:w,setToggle:We,toggle:De}),e.jsxs("div",{id:"pagedatatoshow",className:"offscreen",style:{margin:"8px",width:"580px"},children:[e.jsx("h6",{style:{textAlign:"center",marginBottom:"10px"},children:"Tax Invoice"}),e.jsxs("div",{style:{border:"1px solid"},children:[e.jsxs("div",{className:"topsection",style:{display:"flex"},children:[e.jsxs("div",{className:"left",style:{display:"flex",flexDirection:"column",width:"50%"},children:[e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid"},children:[e.jsx("div",{style:{width:"100px",height:"100px"},children:e.jsx("img",{src:"https://res.cloudinary.com/dczou8g32/image/upload/v1714668042/DEV/jw8j76cgw2ogtokyoisi.png",alt:"img",width:90,height:90})}),e.jsxs("div",{className:"address",children:[e.jsx("h6",{children:"BILTREE"}),e.jsx("h6",{children:"54/3175"}),e.jsx("h6",{children:"MANGHAT ARCADE"}),e.jsx("h6",{children:"KALOOR-KADAVANTHRA ROAD"}),e.jsx("h6",{children:"KADAVANTHRA,ERNAKULAM"}),e.jsx("h6",{children:"GSTIN/UIN:32AAVFB8613K1Z3"}),e.jsx("h6",{children:"State Name:Kerala, Code : 32"}),e.jsx("h6",{children:"E-Mail:info@biltree.in"})]})]}),e.jsxs("div",{style:{borderBottom:"1px solid",marginLeft:"2px",display:"flex",flexDirection:"column",gap:"3px"},children:[e.jsx("h6",{children:"Consignee (Ship to)"}),e.jsx("h5",{children:ee==null?void 0:ee.label}),e.jsx("h6",{children:ee==null?void 0:ee.address1}),e.jsx("h6",{children:ee==null?void 0:ee.address2}),e.jsx("h6",{children:ee==null?void 0:ee.phonenumber}),e.jsxs("h6",{style:{display:"flex",gap:"20px",marginBottom:"3px"},children:[e.jsx("span",{children:"GSTIN/UIN"})," ",e.jsx("span",{children:": 32AAFFC5911M2Z1"})]})]}),e.jsxs("div",{style:{marginLeft:"2px",display:"flex",flexDirection:"column",gap:"3px"},children:[e.jsx("h5",{children:ee==null?void 0:ee.label}),e.jsx("h6",{children:ee==null?void 0:ee.address1}),e.jsx("h6",{children:ee==null?void 0:ee.address2}),e.jsx("h6",{children:ee==null?void 0:ee.phonenumber}),e.jsxs("h6",{style:{display:"flex",gap:"20px"},children:[e.jsx("span",{children:"GSTIN/UIN"})," ",e.jsx("span",{children:": 32AAFFC5911M2Z1"})]})]})]}),e.jsx("div",{className:"right",style:{width:"50%"},children:e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[e.jsx("thead",{style:{borderBottom:"1px solid black"},children:e.jsxs("tr",{children:[e.jsxs("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:[e.jsx("h6",{children:"Invoice No"}),e.jsx("h6",{children:h})]}),e.jsxs("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:[e.jsx("h6",{children:"Date"}),k&&e.jsx("h6",{children:(At=new Date(k))==null?void 0:At.toLocaleDateString()})]})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Delivery Note"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Mode/Terms of Payment"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Reference No.& Date"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Other References"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Buyer's Order No"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Date"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Dispatch Doc No"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Delivery Note Date"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",borderBottom:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Dispatch throught"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Destination"})})]}),e.jsx("tr",{children:e.jsx("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{style:{marginBottom:"75px"},children:"Terms of Delivery"})})})]})]})})]}),e.jsx("div",{className:"middlesection",children:e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[e.jsx("thead",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("h6",{children:"Sl.No"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:["Description of ",e.jsx("br",{})," Goods and Services"]})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"HSN/SAC"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Quantity"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Per"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Amount"})})]})}),e.jsx("tbody",{children:J.map((r,B)=>(console.log("firstdata",r),e.jsxs("tr",{style:{borderBottom:"1px solid black"},children:[e.jsx("td",{style:{paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:B+1})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:r.name})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:" "})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:r.qty})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsxs("h6",{children:[" ",r.rate]})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsxs("h6",{children:[" ",r.unit]})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:(r.rate||0)*r.qty||0})})]},B)))})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px",marginLeft:"2px"},children:[e.jsx("h6",{children:"Amount Chargeable (in words)"}),e.jsx("h6",{children:"E.&.O.E"})]}),e.jsx("h6",{style:{marginTop:"5px"},children:"INR Sixteen lakh Twenty Eight Thousand Six Hundred Fifty One Only"}),e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%",marginTop:"10px"},children:[e.jsxs("thead",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:[e.jsxs("tr",{children:[e.jsx("th",{style:{borderLeft:"1px solid black"},rowSpan:"2",children:e.jsx("h6",{children:" HSN/SAC"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},rowSpan:"2",children:e.jsx("h6",{children:" Taxable Value"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderBottom:"1px solid black",borderRight:"1px solid black"},colSpan:"2",children:e.jsx("h6",{children:" CGST"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderBottom:"1px solid black"},colSpan:"2",children:e.jsx("h6",{children:" SGST/UTGST"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Total Tax Amount"})})]}),e.jsxs("tr",{children:[e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Amount"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:e.jsx("h6",{children:" Amount"})})]})]}),e.jsx("tbody",{style:{borderBottom:"1px solid black"},children:Ke==null?void 0:Ke.map(r=>e.jsxs("tr",{children:[e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",r==null?void 0:r.hsn]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",r==null?void 0:r.total.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",r==null?void 0:r.cgstRate]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",r==null?void 0:r.cgstAmount.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",r==null?void 0:r.sgstRate]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",r==null?void 0:r.sgstAmount.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:((r==null?void 0:r.total)+(r==null?void 0:r.sgstAmount)+(r==null?void 0:r.cgstAmount)).toFixed(2)})})]},r==null?void 0:r.hsn))})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"5px",marginLeft:"2px"},children:[e.jsx("h6",{children:"Tax Amount (in words)"}),e.jsx("h6",{children:"INR Sixteen lakh Twenty Eight Thousand Six Hundred Fifty One Only"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"end",marginTop:"5px",marginLeft:"50%",fontSize:"12px"},children:[e.jsx("h6",{children:"Company's bank details"}),e.jsxs("div",{style:{display:"flex",gap:"16.4px"},children:[e.jsx("h6",{children:"A/c Holder Name"}),e.jsx("h6",{children:": BILTREE"})]}),e.jsxs("div",{style:{display:"flex",gap:"38px"},children:[e.jsx("h6",{children:"Bank Name"}),e.jsx("h6",{children:": ICICI BANK CA - 785236984125"})]}),e.jsxs("div",{style:{display:"flex",gap:"56.6px"},children:[e.jsx("h6",{children:"A/c No"}),e.jsx("h6",{children:": 785236984125"})]}),e.jsxs("div",{style:{display:"flex",gap:"12.4px"},children:[e.jsx("h6",{children:"Branch & IFS Code"}),e.jsx("h6",{children:": PANAMPILLY MAGAR & ICIC0002483"})]}),e.jsx("h6",{children:"SWIFT Code"})]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsxs("div",{className:"leftsection",style:{width:"50%",marginLeft:"2px",marginBottom:"3px"},children:[e.jsx("h6",{style:{borderBottom:"1px solid black",width:"60px"},children:"Declaration"}),e.jsx("h6",{children:"we seclare that this invoice shows the actual price of the goods described and that all particulars are true and currect"})]}),e.jsxs("div",{className:"rightsection",style:{width:"50%",textAlign:"end",borderTop:"1px solid black",borderLeft:"1px solid black"},children:[e.jsx("h6",{style:{marginBottom:"23px",marginRight:"5px"},children:"for BILTREEE"}),e.jsx("h6",{style:{marginRight:"5px"},children:"Authorised Signatory"})]})]})]})]})]})}const $l={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:900,bgcolor:"background.paper",border:"0px solid #000",borderRadius:"10px",boxShadow:24,p:4};function Kl(){var Ee,Me,Pe,qe,z,A,h,N,W,Re,k;const l=t.useRef(),a=l.current,[L,V]=t.useState(!0),[m,F]=t.useState({}),[_,X]=t.useState(0),[H,Q]=t.useState(),[J,se]=t.useState(!1),[G,re]=t.useState({}),d=()=>se(!0),v=()=>se(!1),g=rs(),E=Mt();t.useEffect(()=>{Cl({id:g==null?void 0:g.state}).then(c=>{console.log("projectDataByIdAPI",c.data.responseData),Q(c.data.responseData)}).catch(c=>{console.log(c)}),fl({id:g==null?void 0:g.state}).then(c=>{var je,Ce;console.log("projectDataByIdAPI",c.data.responseData),F(c.data.responseData);const O=(je=c.data.responseData)==null?void 0:je.transaction.reduce((Fe,Be)=>Fe+(Be.amount-(Be.igst+Be.cgst+Be.sgst)),0),ve=(Ce=c.data.responseData)==null?void 0:Ce.transaction.reduce((Fe,Be)=>Fe+Be.amount,0);X(L?ve:O)}).catch(c=>{console.log(c)})},[g,L]);const M="BILTREE -1ST FLOOR MANGHAT ARCADE,  ",C="PHONE: +91 9447519770 ",T=405,p=20,D=T-2*p,te=1e3-2*p,xe=()=>{const c=new mt("p","pt","a4",!0);c.addImage("https://res.cloudinary.com/dczou8g32/image/upload/v1714668042/DEV/jw8j76cgw2ogtokyoisi.png",15,0,200,100),c.setFontSize(10),c.text(M,333,50,{locmaxWidth:te,lineHeightFactor:1.5}),c.text("KALOOR KADAVANTRA ROAD, ",390,65,{locmaxWidth:te,lineHeightFactor:1.5}),c.text(" KADAVANTRA -20",448,80,{locmaxWidth:te,lineHeightFactor:1.5}),c.text(C,420,100,{maxWidth:D,lineHeightFactor:1.5}),c.autoTable({head:[["ID","Data","particular",L&&"IGST",L&&"CGST",L&&"SGST","Total"]],body:m==null?void 0:m.transaction.map((Ce,Fe)=>[Fe+1,new Date(Ce.date).toLocaleDateString(),Ce.particular,L?Ce.igst:"0",L?Ce.cgst:"0",L?Ce.sgst:"0",L?Ce.amount:Ce.amount-(Ce.igst+Ce.cgst+Ce.sgst)]),columnStyles:{0:{cellWidth:100},1:{cellWidth:100},2:{cellWidth:100},3:{cellWidth:50},4:{cellWidth:50},5:{cellWidth:50},6:{cellWidth:50}},theme:"grid",headStyles:{fillColor:"black",textColor:"white",halign:"center"},margin:{top:120,left:40}});const je=c.output("bloburl");window.open(je,"_blank")},Ne=()=>{let c=[],O=["ID","Date","Particular","IGST","CGST","SGST","Total"];return c.push(O.join(",")),m==null||m.transaction.forEach((ve,je)=>{let Ce=new Date(ve.date),Fe=`${Ce.getFullYear()}-${(Ce.getMonth()+1).toString().padStart(2,"0")}-${Ce.getDate().toString().padStart(2,"0")}`,Be=[je+1,Fe,ve.particular,L?ve.igst:0,L?ve.cgst:0,L?ve.sgst:0,L?ve.amount:ve.amount-(ve.igst+ve.cgst+ve.sgst)];c.push(Be.join(","))}),c.join(`
`)},he=()=>{const c=Ne(),O=new Blob([c],{type:"text/csv"}),ve=window.URL.createObjectURL(O),je=document.createElement("a");je.href=ve,je.setAttribute("download","project_data.csv"),document.body.appendChild(je),je.click(),document.body.removeChild(je)},ke=()=>{document.querySelector("#pagedatatoshow");const c=new mt("p","pt","a4",!0);c.html(a,{callback:()=>{const O=c.output("bloburl");window.open(O,"_blank")}})},de=async c=>{alert(c),await re(H[c]),ke()},Oe=Array(54).fill(),ge=[],S=20;for(let c=0;c<Oe.length;c+=S)ge.push(Oe.slice(c,c+S));const y=(Ee=G==null?void 0:G.product_info)==null?void 0:Ee.reduce((c,O)=>c+O.amount*O.quantity,0),ne=H==null?void 0:H.flatMap(c=>(c==null?void 0:c.product_info)||[]),be=(c,O)=>{const je=parseFloat(c)*(O/100);return{cgstRate:O/2,cgstAmount:je/2,sgstRate:O/2,sgstAmount:je/2}},we=ne?ne.reduce((c,O)=>{console.log("dataquotationGetData,",O);const ve=c.findIndex(je=>je.hsn===O.hsn);if(ve!==-1){const je=c[ve];je.total+=parseFloat(O.amount);const Ce=be(O.amount,parseFloat(O.tax_rate.percentage));je.cgstAmount+=Ce.cgstAmount,je.sgstAmount+=Ce.sgstAmount}else{const{cgstRate:je,cgstAmount:Ce,sgstRate:Fe,sgstAmount:Be}=be(O.amount,parseFloat(O.tax_rate.percentage));c.push({hsn:O.hsn,total:parseFloat(O.amount),cgstRate:je,cgstAmount:Ce,sgstRate:Fe,sgstAmount:Be})}return c},[]):[],ue=H==null?void 0:H.find(c=>c.approved),Ge=(ue==null?void 0:ue.quote_amount)||0,De=ue&&(m==null?void 0:m.total_expenses)||0,We=Ge-De;return e.jsxs("div",{className:"projectDatapage-section",children:[e.jsxs("div",{className:"top-section",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[e.jsxs("div",{className:"data_show_card",children:[e.jsx("h6",{children:"Quotation Value"}),e.jsxs("h6",{children:[Ge," "]})]}),e.jsxs("div",{className:"data_show_card",children:[e.jsx("h6",{children:"Purchase / Expence"}),e.jsxs("h6",{children:[" ",De]})]}),e.jsxs("div",{className:"data_show_card",children:[e.jsx("h6",{children:"Margin"}),e.jsx("h6",{children:ue?We:0})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px",paddingRight:"60px"},children:[e.jsxs("div",{className:"toggle_button ",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("h4",{children:"With Tax"}),e.jsx("p",{children:"|"}),e.jsx("h4",{children:"Without Tax"})]}),e.jsxs(gs,{value:L?"true":"false",exclusive:!0,onChange:(c,O)=>V(O==="true"),"aria-label":"text alignment",children:[e.jsx(Et,{value:"true","aria-label":"left aligned",sx:{fontSize:"12px",borderRadius:"35px",width:"90px",height:"35px",textAlign:"center",marginTop:"5px",marginLeft:"10px","&.Mui-selected, &.Mui-selected:hover":{color:"white",backgroundColor:"#8cdb7e"}},children:e.jsx("p",{children:"yes"})}),e.jsx(Et,{value:"false","aria-label":"centered",sx:{fontSize:"12px",borderRadius:"35px",width:"90px",height:"35px",textAlign:"center",marginTop:"5px",marginLeft:"10px","&.Mui-selected, &.Mui-selected:hover":{color:"white",backgroundColor:"#8cdb7e"}},children:e.jsx("p",{children:"no"})})]})]}),e.jsx("button",{style:{border:"none",cursor:"pointer",backgroundColor:"white"},onClick:()=>xe(),children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"10px"},children:[e.jsx(Ss,{style:{fontSize:"40px"}}),e.jsx("h6",{children:"Download"})]})}),e.jsx("button",{style:{border:"none",cursor:"pointer",backgroundColor:"white"},onClick:he,children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"10px"},children:[e.jsx(Ss,{style:{fontSize:"40px"}}),e.jsx("h6",{children:"Download CSV"})]})}),e.jsx("button",{style:{border:"none",cursor:"pointer",backgroundColor:"white"},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"10px",fontSize:"20px"},onClick:d,children:e.jsx("h5",{children:"View quotation"})})})]})]}),m!=null&&m.transaction?e.jsx("div",{className:"table",children:e.jsx(es,{component:ts,id:"pdf-content",children:e.jsxs(ss,{children:[e.jsx(ls,{children:e.jsxs(It,{children:[e.jsx(ie,{children:"ID"}),e.jsx(ie,{children:"Data"}),e.jsx(ie,{children:"particular"}),L&&e.jsx(ie,{children:"IGST"}),L&&e.jsx(ie,{children:"CGST"}),L&&e.jsx(ie,{children:"SGST"}),e.jsx(ie,{children:"Total"})]})}),e.jsx(ns,{children:m==null?void 0:m.transaction.map((c,O)=>e.jsxs(It,{children:[e.jsx(ie,{children:O+1}),e.jsx(ie,{children:new Date(c.date).toLocaleDateString()}),e.jsx(ie,{children:c.particular}),L&&e.jsx(ie,{children:L?c.igst:0}),L&&e.jsx(ie,{children:L?c.cgst:0}),L&&e.jsx(ie,{children:L?c.sgst:0}),e.jsx(ie,{children:L?c.amount:c.amount-(c.igst+c.cgst+c.sgst)})]},O+1))})]})})}):e.jsx("div",{style:{textAlign:"center",padding:"10px"},children:e.jsx("p",{children:"NO DATA"})}),e.jsx(Wt,{open:J,onClose:v,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(j,{sx:$l,children:[e.jsx(j,{sx:{display:"flex",justifyContent:"center",mb:4},children:e.jsx("h4",{children:"Quotation"})}),e.jsx(j,{sx:{display:"flex",flexDirection:"column",gap:2,justifyContent:"space-between",alignItems:"center"},children:e.jsx(es,{component:ts,id:"pdf-content",children:e.jsxs(ss,{children:[e.jsx(ls,{children:e.jsxs(It,{children:[e.jsx(ie,{children:"ID"}),e.jsx(ie,{children:"Project"}),e.jsx(ie,{children:"Start Date"}),e.jsx(ie,{children:"Completion Time"}),e.jsx(ie,{children:"Status"}),e.jsx(ie,{children:"View"}),e.jsx(ie,{children:"Download"})]})}),e.jsx(ns,{children:H==null?void 0:H.map((c,O)=>(console.log(c),e.jsxs(It,{children:[e.jsx(ie,{children:O+1}),e.jsx(ie,{children:c.project}),e.jsx(ie,{children:new Date(c.start_date).toLocaleDateString()}),e.jsx(ie,{children:new Date(c.completation_time).toLocaleDateString()}),e.jsx(ie,{children:c.approved?"Approved":"Not Approved"}),e.jsx(ie,{children:e.jsx(sl,{onClick:()=>E("/admin/Quotation-View",{state:{projectData:m,pdfData:G,subtotal:y,transformedData:we,quotationGetData:H}})})}),e.jsx(ie,{children:e.jsx(ll,{onClick:()=>de(O)})})]},O+1)))})]})})})]})}),e.jsxs("div",{ref:l,id:"pagedatatoshow",className:"offscreen",style:{margin:"8px",width:"580px"},children:[e.jsx("h6",{style:{textAlign:"center",marginBottom:"10px"},children:"Tax Invoice"}),e.jsxs("div",{style:{border:"1px solid"},children:[e.jsxs("div",{className:"topsection",style:{display:"flex"},children:[e.jsxs("div",{className:"left",style:{display:"flex",flexDirection:"column",width:"50%"},children:[e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid"},children:[e.jsx("div",{style:{width:"100px",height:"100px"},children:e.jsx("img",{src:"https://res.cloudinary.com/dczou8g32/image/upload/v1714668042/DEV/jw8j76cgw2ogtokyoisi.png",alt:"img",width:90,height:90})}),e.jsxs("div",{className:"address",children:[e.jsx("h6",{children:"BILTREE"}),e.jsx("h6",{children:"54/3175"}),e.jsx("h6",{children:"MANGHAT ARCADE"}),e.jsx("h6",{children:"KALOOR-KADAVANTHRA ROAD"}),e.jsx("h6",{children:"KADAVANTHRA,ERNAKULAM"}),e.jsx("h6",{children:"GSTIN/UIN:32AAVFB8613K1Z3"}),e.jsx("h6",{children:"State Name:Kerala, Code : 32"}),e.jsx("h6",{children:"E-Mail:info@biltree.in"})]})]}),e.jsxs("div",{style:{borderBottom:"1px solid",marginLeft:"2px",display:"flex",flexDirection:"column",gap:"3px"},children:[e.jsx("h6",{children:"Consignee (Ship to)"}),e.jsx("h5",{children:(Me=m==null?void 0:m.project)==null?void 0:Me.client_name}),e.jsx("h6",{children:(Pe=m==null?void 0:m.project)==null?void 0:Pe.address1}),e.jsx("h6",{children:(qe=m==null?void 0:m.project)==null?void 0:qe.address2}),e.jsx("h6",{children:(z=m==null?void 0:m.project)==null?void 0:z.phonenumber}),e.jsxs("h6",{style:{display:"flex",gap:"20px",marginBottom:"3px"},children:[e.jsx("span",{children:"GSTIN/UIN"})," ",e.jsx("span",{children:": 32AAFFC5911M2Z1"})]})]}),e.jsxs("div",{style:{marginLeft:"2px",display:"flex",flexDirection:"column",gap:"3px"},children:[e.jsx("h6",{children:"Buyer (Bill to)"}),e.jsx("h5",{children:(A=m==null?void 0:m.project)==null?void 0:A.client_name}),e.jsx("h6",{children:(h=m==null?void 0:m.project)==null?void 0:h.address1}),e.jsx("h6",{children:(N=m==null?void 0:m.project)==null?void 0:N.address2}),e.jsx("h6",{children:(W=m==null?void 0:m.project)==null?void 0:W.phonenumber}),e.jsxs("h6",{style:{display:"flex",gap:"20px"},children:[e.jsx("span",{children:"GSTIN/UIN"})," ",e.jsx("span",{children:": 32AAFFC5911M2Z1"})]})]})]}),e.jsx("div",{className:"right",style:{width:"50%"},children:e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[e.jsx("thead",{style:{borderBottom:"1px solid black"},children:e.jsxs("tr",{children:[e.jsxs("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:[e.jsx("h6",{children:"Invoice No"}),e.jsx("h6",{children:Dt(new Date)})]}),e.jsxs("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:[e.jsx("h6",{children:"Date"}),e.jsx("h6",{children:new Date().toLocaleDateString()})]})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Delivery Note"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Mode/Terms of Payment"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Reference No.& Date"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Other References"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Buyer's Order No"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Date"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Dispatch Doc No"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Delivery Note Date"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",borderBottom:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Dispatch throught"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Destination"})})]}),e.jsx("tr",{children:e.jsx("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{style:{marginBottom:"75px"},children:"Terms of Delivery"})})})]})]})})]}),e.jsx("div",{className:"middlesection",children:e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[e.jsx("thead",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("h6",{children:"Sl.No"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:["Description of ",e.jsx("br",{})," Goods and Services"]})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"HSN/SAC"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Quantity"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Per"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Amount"})})]})}),e.jsxs("tbody",{children:[(Re=G==null?void 0:G.product_info)==null?void 0:Re.map((c,O)=>e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:O+1})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:c.product})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:" "})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:c.quantity})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsxs("h6",{children:[" ",c.amount]})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:" nos"})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:c.amount||0})})]},O)),e.jsxs("tr",{style:{borderTop:"1px solid black",borderBottom:"1px solid black"},children:[e.jsx("td",{children:" "}),e.jsx("td",{style:{textAlign:"end",borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"1px"},children:e.jsx("h6",{children:" Total"})}),e.jsx("td",{style:{textAlign:"end",borderLeft:"1px solid black"}}),e.jsx("td",{style:{textAlign:"end",borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"1px"},children:e.jsxs("h6",{children:[(k=G==null?void 0:G.product_info)==null?void 0:k.length," Nos"]})}),e.jsx("td",{style:{textAlign:"end",borderLeft:"1px solid black"}}),e.jsx("td",{style:{textAlign:"end",borderLeft:"1px solid black"}}),e.jsx("td",{style:{textAlign:"end",borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"1px"},children:e.jsxs("h6",{children:[" ",y]})})]})]})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px",marginLeft:"2px"},children:[e.jsx("h6",{children:"Amount Chargeable (in words)"}),e.jsx("h6",{children:"E.&.O.E"})]}),e.jsx("h6",{style:{marginTop:"5px"},children:"INR Sixteen lakh Twenty Eight Thousand Six Hundred Fifty One Only"}),e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%",marginTop:"10px"},children:[e.jsxs("thead",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:[e.jsxs("tr",{children:[e.jsx("th",{style:{borderLeft:"1px solid black"},rowSpan:"2",children:e.jsx("h6",{children:" HSN/SAC"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},rowSpan:"2",children:e.jsx("h6",{children:" Taxable Value"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderBottom:"1px solid black",borderRight:"1px solid black"},colSpan:"2",children:e.jsx("h6",{children:" CGST"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderBottom:"1px solid black"},colSpan:"2",children:e.jsx("h6",{children:" SGST/UTGST"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Total Tax Amount"})})]}),e.jsxs("tr",{children:[e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Amount"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:e.jsx("h6",{children:" Amount"})})]})]}),e.jsx("tbody",{style:{borderBottom:"1px solid black"},children:we==null?void 0:we.map(c=>e.jsxs("tr",{children:[e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",c==null?void 0:c.hsn]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",c==null?void 0:c.total.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",c==null?void 0:c.cgstRate]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",c==null?void 0:c.cgstAmount.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",c==null?void 0:c.sgstRate]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",c==null?void 0:c.sgstAmount.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:((c==null?void 0:c.total)+(c==null?void 0:c.sgstAmount)+(c==null?void 0:c.cgstAmount)).toFixed(2)})})]},c==null?void 0:c.hsn))})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"5px",marginLeft:"2px"},children:[e.jsx("h6",{children:"Tax Amount (in words)"}),e.jsx("h6",{children:"INR Sixteen lakh Twenty Eight Thousand Six Hundred Fifty One Only"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"end",marginTop:"5px",marginLeft:"50%",fontSize:"12px"},children:[e.jsx("h6",{children:"Company's bank details"}),e.jsxs("div",{style:{display:"flex",gap:"16.4px"},children:[e.jsx("h6",{children:"A/c Holder Name"}),e.jsx("h6",{children:": BILTREE"})]}),e.jsxs("div",{style:{display:"flex",gap:"38px"},children:[e.jsx("h6",{children:"Bank Name"}),e.jsx("h6",{children:": ICICI BANK CA - 785236984125"})]}),e.jsxs("div",{style:{display:"flex",gap:"56.6px"},children:[e.jsx("h6",{children:"A/c No"}),e.jsx("h6",{children:": 785236984125"})]}),e.jsxs("div",{style:{display:"flex",gap:"12.4px"},children:[e.jsx("h6",{children:"Branch & IFS Code"}),e.jsx("h6",{children:": PANAMPILLY MAGAR & ICIC0002483"})]}),e.jsx("h6",{children:"SWIFT Code"})]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsxs("div",{className:"leftsection",style:{width:"50%",marginLeft:"2px",marginBottom:"3px"},children:[e.jsx("h6",{style:{borderBottom:"1px solid black",width:"60px"},children:"Declaration"}),e.jsx("h6",{children:"we seclare that this invoice shows the actual price of the goods described and that all particulars are true and currect"})]}),e.jsxs("div",{className:"rightsection",style:{width:"50%",textAlign:"end",borderTop:"1px solid black",borderLeft:"1px solid black"},children:[e.jsx("h6",{style:{marginBottom:"23px",marginRight:"5px"},children:"for BILTREEE"}),e.jsx("h6",{style:{marginRight:"5px"},children:"Authorised Signatory"})]})]})]})]})]})}function Ql(){const l=rs(),[a,L]=t.useState(""),[V,m]=t.useState(null),[F,_]=t.useState([]),[X,H]=t.useState(0),[Q,J]=t.useState(0),[se,G]=t.useState(""),[re,d]=t.useState(""),[v,g]=t.useState(""),[E,M]=t.useState([]),[C,T]=t.useState(!0),p=()=>{Bs({payment_mode:"OUT",project_id:1}).then(S=>{console.log(S.data.responseData),M(S.data.responseData)}).catch(S=>{console.log(S)})};t.useEffect(()=>{const y=Dt(new Date);console.log(y),g(y),p()},[]),t.useEffect(()=>{Rt().then(S=>{console.log("partyData:",S);const y=S.responseData.map(ne=>({value:ne.id,label:ne.name}));console.log(y),_(y)}).catch(S=>{console.log(S)})},[]),t.useEffect(()=>{const y=Dt(new Date);console.log(y),g(y)},[]);const D=S=>{L(S.target.value)},te=S=>{const y=S.target.files[0];m(y)},xe=(S,y)=>{H(y.value)},Ne=S=>{J(S.target.value)},de=[{intputName:"receiptno",label:"Recipes No",type:"text",value:v,disabled:"disabled"},{handleChange:S=>{console.log(S.target.value),G(S.target.value)},label:"Date",type:"date"},{handleChange:S=>{console.log(S.target.value),d(S.target.value)},intputName:"received",label:"Received",type:"number"}],Oe=()=>{T(!1);const S={date:se,payment_type:parseInt(Q),party_id:X,project_id:1,amount:parseInt(re),payment_mode:"OUT",description:a,ref_no:v};console.log(S),Rs(S).then(y=>{console.log(y),alert("Payment added"),p();const be=Dt(new Date);console.log(be),g(be),G(""),J(""),H(0),d(""),L(""),L(""),T(!0)}).catch(y=>{console.log(y),T(!0)})},ge=S=>{const y=os(e.jsxs("div",{id:"recept-pdf",children:[e.jsxs("div",{className:"header-of-receipt",style:{display:"flex",marginBottom:"30px",marginTop:"10px"},children:[e.jsx("img",{src:"https://res.cloudinary.com/dczou8g32/image/upload/v1714668042/DEV/jw8j76cgw2ogtokyoisi.png",alt:"logo",style:{height:"50px"}}),e.jsxs("div",{className:"address",style:{textAlign:"center",display:"flex",flexDirection:"column",marginLeft:"25px"},children:[e.jsx("h5",{style:{fontSize:"13px",width:"300px"},children:"BILTREE FY204-25"}),e.jsxs("p",{style:{fontSize:"13px",width:"300px"},children:["54/3175, MANGHAT ARCADE ",e.jsx("br",{})," 1ST FLOOR, KALOOR-KADAVANTHRA ROAD"," ",e.jsx("br",{})," ERANAKLAM"]}),e.jsx("p",{style:{fontSize:"13px",width:"300px"},children:"StateName:Kerala, Code:32"}),e.jsx("p",{style:{fontSize:"13px",width:"300px"},children:"E-Mail:info@biltree.in"})]})]}),e.jsx("h5",{className:"resceipt-text",style:{fontSize:"13px",width:"600px",textAlign:"center"},children:"Payment voucher"}),e.jsxs("div",{className:"date-no",style:{display:"flex",justifyContent:"space-between",width:"950px"},children:[e.jsxs("p",{style:{fontSize:"13px",width:"600px",marginLeft:"10px"},children:["No:",S==null?void 0:S.ref_no]}),e.jsxs("p",{style:{fontSize:"13px",width:"600px"},children:["Date:",new Date(S==null?void 0:S.date).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{marginTop:"20px",width:"950px",marginLeft:"10px",display:"flex"},children:[e.jsxs("div",{style:{width:"40%",borderRight:"1px solid"},children:[e.jsx("hr",{style:{width:"400px"}}),e.jsx("p",{style:{marginLeft:"20px"},children:"Particulars"}),e.jsx("hr",{style:{width:"400px"}}),e.jsx("p",{style:{fontSize:"13px",width:"600px"},children:"Account :"}),e.jsx("p",{style:{marginLeft:"20px",fontSize:"13px",width:"600px"},children:S==null?void 0:S.party_id}),e.jsx("p",{style:{marginLeft:"20px",fontSize:"13px",width:"600px",marginTop:"40px"},children:"Through :"}),e.jsx("p",{style:{marginLeft:"20px",fontSize:"13px",width:"600px"},children:"Cash"})]}),e.jsxs("div",{style:{width:"20%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("hr",{style:{width:"190px"}}),e.jsx("p",{style:{marginLeft:"20px",textAlign:"end"},children:"Amount"}),e.jsx("hr",{style:{width:"190px"}}),e.jsx("p",{style:{fontSize:"13px",width:"188px",textAlign:"end",marginTop:"20px"},children:S==null?void 0:S.amount.toLocaleString("en-IN",{style:"decimal",minimumFractionDigits:2})})]}),e.jsxs("div",{children:[e.jsx("hr",{style:{width:"190px"}}),e.jsx("p",{style:{marginLeft:"20px",textAlign:"end"},children:S==null?void 0:S.amount.toLocaleString("en-IN",{style:"decimal",minimumFractionDigits:2})}),e.jsx("hr",{style:{width:"190px"}})]})]})]}),e.jsxs("div",{style:{display:"flex",width:"580px"},children:[e.jsx("p",{className:"resceipt-text",style:{fontSize:"13px",width:"580px",marginTop:"90px",marginLeft:"20px"},children:"Receiver's Signatory"}),e.jsx("p",{className:"resceipt-text",style:{fontSize:"13px",width:"580px",textAlign:"end",marginTop:"90px"},children:"Authorised Signatory"})]}),e.jsxs("div",{style:{display:"flex",width:"580px",marginTop:"20px"},children:[e.jsx("p",{style:{marginLeft:"20px",fontSize:"13px",width:"580px"},children:"Prepared by"}),e.jsx("p",{style:{fontSize:"13px",width:"580px",textAlign:"center"},children:"Checked by"}),e.jsx("p",{style:{fontSize:"13px",width:"580px",textAlign:"end"},children:"Verified by"})]})]})]})),ne=new mt("p","pt","a4",!0);ne.html(y,{callback:()=>{const be=ne.output("bloburl");window.open(be,"_blank")}})};return e.jsxs("div",{className:"payment-in-section",children:[l.pathname==="/admin/payment-in"?e.jsx("h2",{children:"Payment In"}):e.jsx("h2",{children:"Payment Out"}),e.jsxs("div",{className:"inner-section",children:[e.jsxs("div",{style:{display:"flex",gap:"84px",padding:"20px"},children:[e.jsxs(j,{sx:{width:"50%"},children:[e.jsxs(j,{sx:{width:"100%",marginBottom:"10px"},children:[e.jsx("p",{className:"party-name",children:"Party"}),e.jsx(Ze,{sx:{display:"inline-block","& input":{width:"100%",border:"none",bgcolor:"var(--inputbg-color)",color:S=>S.palette.getContrastText(S.palette.background.paper)}},id:"custom-input-demo",options:F,onChange:xe,componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:S=>e.jsx("div",{ref:S.InputProps.ref,children:e.jsx("input",{type:"text",...S.inputProps,style:{height:"38px"}})})})]}),e.jsx(j,{sx:{display:"flex",justifyContent:"space-between",my:1,alignItems:"center"},children:e.jsx(le,{intputName:"paymenttype",label:"Payment type",inputOrSelect:"select",handleChange:Ne,options:[{value:"None",label:"None"},{value:"5",label:"Cash"},{value:"23",label:"UPI"}]})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{htmlFor:"textarea",children:"Description"}),e.jsx("textarea",{id:"textarea",value:a,onChange:D,rows:5,cols:50})]}),e.jsx(ae,{disableRipple:!0,sx:{mt:2,textTransform:"none",color:"var(--black-button)","&:hover":{background:"transparent"}},component:"label",children:e.jsx("input",{type:"file",hidden:!0,onChange:te})})]}),e.jsxs(j,{sx:{width:"50%",display:"flex",flexDirection:"column",alignItems:"flex-end"},className:"leftsectioninputs",children:[e.jsx(j,{sx:{width:"50%",display:"flex",flexDirection:"column",gap:5},children:de.slice(0,2).map((S,y)=>e.jsx(le,{label:S.label,type:S.type,handleChange:S.handleChange,intputName:S.intputName,inputOrSelect:S.inputOrSelect,value:S.value,disabled:S.disabled},y))}),e.jsx(j,{sx:{width:"50%",marginTop:10},children:de.slice(2).map((S,y)=>e.jsx(le,{label:S.label,type:S.type,handleChange:S.handleChange,intputName:S.intputName,inputOrSelect:S.inputOrSelect},y))})]})]}),e.jsx("hr",{}),e.jsx("div",{style:{display:"flex",justifyContent:"end"},children:e.jsx(ae,{variant:"contained",sx:{height:40,my:2,marginRight:2,textTransform:"none",bgcolor:"var(--black-button)","&:disabled":{bgcolor:"var(--black-button)",color:"white"}},onClick:()=>Oe(),disabled:!C,children:C?"Save":e.jsx(bt,{style:{color:"white",marginBottom:"15px",marginTop:"15px"},size:20})})})]}),e.jsx("div",{className:"table",children:e.jsx(es,{component:ts,id:"pdf-content",children:e.jsxs(ss,{children:[e.jsx(ls,{children:e.jsxs(It,{children:[e.jsx(ie,{children:"ID"}),e.jsx(ie,{children:"Data"}),e.jsx(ie,{children:"Description"}),e.jsx(ie,{children:"Amount"}),e.jsx(ie,{children:"Action"})]})}),e.jsx(ns,{children:E==null?void 0:E.map((S,y)=>e.jsxs(It,{children:[e.jsx(ie,{children:y+1}),e.jsx(ie,{children:new Date(S==null?void 0:S.date).toLocaleDateString()}),e.jsx(ie,{children:S==null?void 0:S.description}),e.jsxs(ie,{children:[" ",S==null?void 0:S.amount.toLocaleString("en-IN",{style:"decimal",minimumFractionDigits:2})]}),e.jsx(ie,{children:e.jsx(ae,{disableRipple:!0,sx:{textTransform:"none",color:"var(--black-button)",fontWeight:"600","&:hover":{background:"transparent"}},onClick:()=>ge(S),children:"View"})})]},y+1))})]})})})]})}function Zl(){var Q,J,se,G,re,d,v,g,E,M;const l=rs();console.log("location",l.state);const[a,L]=t.useState(),[V,m]=t.useState(),[F,_]=t.useState(),[X,H]=t.useState();return t.useEffect(()=>{L(l.state.projectData),m(l.state.transformedData),H(l.state.subtotal),_(l.state.pdfData)},[]),e.jsx("div",{children:e.jsxs("div",{id:"pagedatatoshow",className:"offscreen",style:{margin:"8px",width:"100%"},children:[e.jsx("h6",{style:{textAlign:"center",marginBottom:"10px"},children:"Tax Invoice"}),e.jsxs("div",{style:{border:"1px solid"},children:[e.jsxs("div",{className:"topsection",style:{display:"flex"},children:[e.jsxs("div",{className:"left",style:{display:"flex",flexDirection:"column",width:"50%"},children:[e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid"},children:[e.jsx("div",{style:{width:"100%",height:"100px"},children:e.jsx("img",{src:"https://res.cloudinary.com/dczou8g32/image/upload/v1714668042/DEV/jw8j76cgw2ogtokyoisi.png",alt:"img",width:90,height:90})}),e.jsxs("div",{className:"address",children:[e.jsx("h6",{children:"BILTREE"}),e.jsx("h6",{children:"54/3175"}),e.jsx("h6",{children:"MANGHAT ARCADE"}),e.jsx("h6",{children:"KALOOR-KADAVANTHRA ROAD"}),e.jsx("h6",{children:"KADAVANTHRA,ERNAKULAM"}),e.jsx("h6",{children:"GSTIN/UIN:32AAVFB8613K1Z3"}),e.jsx("h6",{children:"State Name:Kerala, Code : 32"}),e.jsx("h6",{children:"E-Mail:info@biltree.in"})]})]}),e.jsxs("div",{style:{borderBottom:"1px solid",marginLeft:"2px",display:"flex",flexDirection:"column",gap:"3px"},children:[e.jsx("h6",{children:"Consignee (Ship to)"}),e.jsx("h5",{children:(Q=a==null?void 0:a.project)==null?void 0:Q.client_name}),e.jsx("h6",{children:(J=a==null?void 0:a.project)==null?void 0:J.address1}),e.jsx("h6",{children:(se=a==null?void 0:a.project)==null?void 0:se.address2}),e.jsx("h6",{children:(G=a==null?void 0:a.project)==null?void 0:G.phonenumber}),e.jsxs("h6",{style:{display:"flex",gap:"20px",marginBottom:"3px"},children:[e.jsx("span",{children:"GSTIN/UIN"})," ",e.jsx("span",{children:": 32AAFFC5911M2Z1"})]})]}),e.jsxs("div",{style:{marginLeft:"2px",display:"flex",flexDirection:"column",gap:"3px"},children:[e.jsx("h6",{children:"Buyer (Bill to)"}),e.jsx("h5",{children:(re=a==null?void 0:a.project)==null?void 0:re.client_name}),e.jsx("h6",{children:(d=a==null?void 0:a.project)==null?void 0:d.address1}),e.jsx("h6",{children:(v=a==null?void 0:a.project)==null?void 0:v.address2}),e.jsx("h6",{children:(g=a==null?void 0:a.project)==null?void 0:g.phonenumber}),e.jsxs("h6",{style:{display:"flex",gap:"20px"},children:[e.jsx("span",{children:"GSTIN/UIN"})," ",e.jsx("span",{children:": 32AAFFC5911M2Z1"})]})]})]}),e.jsx("div",{className:"right",style:{width:"50%"},children:e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[e.jsx("thead",{style:{borderBottom:"1px solid black"},children:e.jsxs("tr",{children:[e.jsxs("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:[e.jsx("h6",{children:"Invoice No"}),e.jsx("h6",{children:Dt(new Date)})]}),e.jsxs("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:[e.jsx("h6",{children:"Date"}),e.jsx("h6",{children:new Date().toLocaleDateString()})]})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Delivery Note"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Mode/Terms of Payment"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Reference No.& Date"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Other References"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Buyer's Order No"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Date"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Dispatch Doc No"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Delivery Note Date"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",borderBottom:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Dispatch throught"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Destination"})})]}),e.jsx("tr",{children:e.jsx("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{style:{marginBottom:"75px"},children:"Terms of Delivery"})})})]})]})})]}),e.jsx("div",{className:"middlesection",children:e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[e.jsx("thead",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("h6",{children:"Sl.No"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:["Description of ",e.jsx("br",{})," Goods and Services"]})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"HSN/SAC"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Quantity"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Per"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Amount"})})]})}),e.jsxs("tbody",{children:[(E=F==null?void 0:F.product_info)==null?void 0:E.map((C,T)=>e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:T+1})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:C.product})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:" "})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:C.quantity})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsxs("h6",{children:[" ",C.amount]})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:" nos"})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsxs("h6",{children:[C.amount*C.quantity," "]})})]},T)),e.jsxs("tr",{style:{borderTop:"1px solid black",borderBottom:"1px solid black"},children:[e.jsx("td",{children:" "}),e.jsx("td",{style:{textAlign:"end",borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"1px"},children:e.jsx("h6",{children:" Total"})}),e.jsx("td",{style:{textAlign:"end",borderLeft:"1px solid black"}}),e.jsx("td",{style:{textAlign:"end",borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"1px"},children:e.jsxs("h6",{children:[(M=F==null?void 0:F.product_info)==null?void 0:M.length," Nos"]})}),e.jsx("td",{style:{textAlign:"end",borderLeft:"1px solid black"}}),e.jsx("td",{style:{textAlign:"end",borderLeft:"1px solid black"}}),e.jsx("td",{style:{textAlign:"end",borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"1px"},children:e.jsxs("h6",{children:[" ",X]})})]})]})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px",marginLeft:"2px"},children:[e.jsx("h6",{children:"Amount Chargeable (in words)"}),e.jsx("h6",{children:"E.&.O.E"})]}),e.jsx("h6",{style:{marginTop:"5px"},children:"INR Sixteen lakh Twenty Eight Thousand Six Hundred Fifty One Only"}),e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%",marginTop:"10px"},children:[e.jsxs("thead",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:[e.jsxs("tr",{children:[e.jsx("th",{style:{borderLeft:"1px solid black"},rowSpan:"2",children:e.jsx("h6",{children:" HSN/SAC"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},rowSpan:"2",children:e.jsx("h6",{children:" Taxable Value"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderBottom:"1px solid black",borderRight:"1px solid black"},colSpan:"2",children:e.jsx("h6",{children:" CGST"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderBottom:"1px solid black"},colSpan:"2",children:e.jsx("h6",{children:" SGST/UTGST"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Total Tax Amount"})})]}),e.jsxs("tr",{children:[e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Amount"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:e.jsx("h6",{children:" Amount"})})]})]}),e.jsx("tbody",{style:{borderBottom:"1px solid black"},children:V==null?void 0:V.map(C=>e.jsxs("tr",{children:[e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",C==null?void 0:C.hsn]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",C==null?void 0:C.total.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",C==null?void 0:C.cgstRate]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",C==null?void 0:C.cgstAmount.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",C==null?void 0:C.sgstRate]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",C==null?void 0:C.sgstAmount.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:((C==null?void 0:C.total)+(C==null?void 0:C.sgstAmount)+(C==null?void 0:C.cgstAmount)).toFixed(2)})})]},C==null?void 0:C.hsn))})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"5px",marginLeft:"2px"},children:[e.jsx("h6",{children:"Tax Amount (in words)"}),e.jsx("h6",{children:"INR Sixteen lakh Twenty Eight Thousand Six Hundred Fifty One Only"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"end",marginTop:"5px",marginLeft:"50%",fontSize:"12px"},children:[e.jsx("h6",{children:"Company's bank details"}),e.jsxs("div",{style:{display:"flex",gap:"16.4px"},children:[e.jsx("h6",{children:"A/c Holder Name"}),e.jsx("h6",{children:": BILTREE"})]}),e.jsxs("div",{style:{display:"flex",gap:"38px"},children:[e.jsx("h6",{children:"Bank Name"}),e.jsx("h6",{children:": ICICI BANK CA - 785236984125"})]}),e.jsxs("div",{style:{display:"flex",gap:"56.6px"},children:[e.jsx("h6",{children:"A/c No"}),e.jsx("h6",{children:": 785236984125"})]}),e.jsxs("div",{style:{display:"flex",gap:"12.4px"},children:[e.jsx("h6",{children:"Branch & IFS Code"}),e.jsx("h6",{children:": PANAMPILLY MAGAR & ICIC0002483"})]}),e.jsx("h6",{children:"SWIFT Code"})]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsxs("div",{className:"leftsection",style:{width:"50%",marginLeft:"2px",marginBottom:"3px"},children:[e.jsx("h6",{style:{borderBottom:"1px solid black",width:"60px"},children:"Declaration"}),e.jsx("h6",{children:"we seclare that this invoice shows the actual price of the goods described and that all particulars are true and currect"})]}),e.jsxs("div",{className:"rightsection",style:{width:"50%",textAlign:"end",borderTop:"1px solid black",borderLeft:"1px solid black"},children:[e.jsx("h6",{style:{marginBottom:"23px",marginRight:"5px"},children:"for BILTREEE"}),e.jsx("h6",{style:{marginRight:"5px"},children:"Authorised Signatory"})]})]})]})]})})}function Jl(){var R,ce;const[l,a]=t.useState([]),[L,V]=t.useState(""),[m,F]=t.useState(null),[_,X]=t.useState([]),[H,Q]=t.useState([]),[J,se]=t.useState([]),[G,re]=t.useState(null),[d,v]=t.useState([]),[g,E]=t.useState({right:!1}),[M,C]=t.useState(""),[T,p]=t.useState([]),[D,te]=t.useState([]),[xe,Ne]=t.useState([]),[he,ke]=t.useState({}),[de,Oe]=t.useState({name:"",quantity:"",rate:0,hsn:""}),[ge,S]=t.useState("");t.useState("");const[y,ne]=t.useState(null),[be,we]=t.useState([]),[ue,Ge]=t.useState(!0),[De,We]=t.useState(),[Ee,Me]=t.useState(""),[Pe,qe]=t.useState(""),[z,A]=t.useState(""),[h,N]=t.useState(""),[W,Re]=t.useState(0),[k,c]=t.useState(0),[O,ve]=t.useState(null),[je,Ce]=t.useState(0),[Fe,Be]=t.useState(!1),[Y,Xe]=t.useState(!0),[fe,et]=t.useState({}),P=(o=>{const I=o.reduce((q,U)=>{var ot,St,At,r,B;console.log("firstcurr.taxRate",parseInt((ot=U.taxApplied)==null?void 0:ot.split("@")[1].replace("%",""))||0),q[U.hsn]||(q[U.hsn]={hsn:U.hsn,total:0,cgstRate:(parseInt((St=U.taxApplied)==null?void 0:St.split("@")[1].replace("%",""))||0)/2,sgstRate:(parseInt((At=U.taxApplied)==null?void 0:At.split("@")[1].replace("%",""))||0)/2,cgstAmount:0,sgstAmount:0});const Se=U.qty*U.rate;return q[U.hsn].total+=Se,q[U.hsn].cgstAmount+=Se*((parseInt((r=U.taxApplied)==null?void 0:r.split("@")[1].replace("%",""))||0)/100)/2,q[U.hsn].sgstAmount+=Se*((parseInt((B=U.taxApplied)==null?void 0:B.split("@")[1].replace("%",""))||0)/100)/2,q},{});return Object.values(I)})(H),Z=()=>{const o=document.querySelector("#pagedatatoshow"),I=new mt("p","pt","a4",!0);I.html(o,{callback:()=>{const q=I.output("bloburl");window.open(q,"_blank")}})},pe=o=>{Be(o.target.checked)};t.useEffect(()=>{const I=H.map(U=>{var $;const Se=parseInt(U.qty)||0,ot=parseInt(U.rate)||0,At=Se*ot-(U.amountafterdescount||0);let r=0;U.taxAppliedamount?r=parseFloat(U.taxAppliedamount.replace("%",""))||0:($=U.taxApplied)!=null&&$.value?r=parseFloat(U.taxApplied.value.replace("%",""))||0:U.taxApplied&&(r=parseFloat(U.taxApplied.split("@")[1].replace("%",""))||0);const B=(At*r/100+At).toFixed(2);return{...U,total:B}}).reduce((U,Se)=>U+parseFloat(Se.total),0),q=Math.round(I);Ce(Fe?(I-q).toFixed(2):0),X(Fe?q:I)},[H,Fe]);const ee=o=>{const I=o.target.files[0];ve(I)},me=()=>{Rt().then(o=>{console.log("partyData:",o);const I=o.responseData.map(q=>({value:q.id,label:q.name,address1:q.address1,address2:q.address2,phonenumber:q.phonenumber}));console.log(I),a(I)}).catch(o=>{console.log(o)})};t.useEffect(()=>{me()},[]);const He=o=>{V(o.target.value)},Ke=o=>{Re(o.target.value)},tt=o=>{const I=o.target.files[0];ne(I)},_e=o=>{console.log(o.target.value);const I=be.find(q=>q.taxlabel==o.target.value);console.log(I),ke(I)},st=o=>{C(o.target.value),console.log(o.target.value)},Je=o=>{S(o.target.value),console.log(o.target.value)},ut=()=>{const o=new FormData;o.append("name",de.name),o.append("hsn",de.hsn),o.append("rate",parseInt(de.rate)),o.append("quantity",parseInt(de.quantity)),o.append("unit",M),o.append("projectid",parseInt(ge)),o.append("is_master_product",ue),o.append("tax_rate",he.id),o.append("image",y),Pt(o).then(I=>{ye(),I.status===200&&(Oe({name:"",qate:"",quantity:"",rate:"",taxvalue:"",hsn:""}),C(""),ke(""),alert("Product added successfully"))}).catch(I=>{console.log(I),alert("Problem in adding product")})},jt=()=>{yt().then(o=>{console.log("tax:",o);const I=o.map(q=>({value:q.percentage,label:q.name?`${q.name} ${q.percentage}`:"none",taxlabel:q.percentage,id:q.id}));console.log(I),we(I)}).catch(o=>{console.log(o)})},b=()=>{Vt().then(o=>{console.log("category:",o);const I=o==null?void 0:o.responseData.map(q=>({value:q.id,label:`${q.name}`}));I.unshift({value:0,label:"None"}),console.log("categoryOptions",I),p(I)}).catch(o=>{console.log(o)})},K=()=>{ft().then(o=>{console.log("projects:",o);const I=o==null?void 0:o.responseData.map(q=>({value:q.id,label:`${q.name} ( ${q.client_name} )`}));I.unshift({value:0,label:"None"}),console.log("projectdData",I),te(I)}).catch(o=>{console.log(o)})},w=()=>{Tt().then(o=>{console.log("units:",o);const I=o==null?void 0:o.responseData.map(q=>({value:q.id,label:q.name}));I.unshift({value:0,label:"None"}),console.log("unitsdData",I),Ne(I)}).catch(o=>{console.log(o)})},ye=async()=>{const U=(await lt()).responseData.map(Se=>Se.name).map((Se,ot)=>({value:`option${ot+1}`,label:Se}));U.unshift({value:-2,label:"Add"}),se(U)};t.useEffect(()=>{ye(),se([{value:-2,label:"Add"}]),jt(),b(),K(),w()},[]);const Te=(o,I)=>q=>{console.log(q),console.log("Toggle Drawer:",o,I),!(q&&q.type==="keydown"&&(q.key==="Tab"||q.key==="Shift"))&&E({...g,[o]:I})},at=[{handleChange:o=>{Me(o.target.value)},intputName:"receiptno",label:"Recipes No",type:"number",value:Ee},{handleChange:o=>{qe(o.target.value)},intputName:"invoiceno",label:"Invoice Number",type:"number",value:Pe},{handleChange:o=>{A(o.target.value)},intputName:"invoicedate",label:"Invoice Date",type:"date",value:z},{handleChange:o=>{N(o.target.value)},intputName:"data",label:"Date",type:"date",value:h}],ct=o=>{const{name:I,value:q}=o.target;Oe(U=>({...U,[I]:q}))},Nt=[{handleChange:ct,intputName:"name",label:" Product Name",type:"text"},{handleChange:ct,intputName:"rate",label:"Rate",type:"number"},{handleChange:ct,intputName:"quantity",label:"Quantity",type:"number"},{handleChange:_e,intputName:"taxrate",label:"Tax Rate",inputOrSelect:"select",options:be},{intputName:"taxvalue",label:" Tax Value",value:parseFloat(de.rate||0)*parseFloat(de.quantity||0)*(parseFloat((R=he.value)==null?void 0:R.replace("%",""))||0)/100,disabled:"disabled"},{handleChange:ct,intputName:"hsn",label:"HSN",type:"text"},{handleChange:st,intputName:"unit",label:"Unit",inputOrSelect:"select",options:xe},{handleChange:Je,intputName:"project",label:"Projects",inputOrSelect:"select",options:D}],vt=async(o,I)=>{if(I){if(I.value===-2)console.log(I.value===-2),Te("right",!0)();else if(re(I),I){console.log(I.label);const q=await lt();console.log(q);const Se=q.responseData.find(St=>St.name===(I==null?void 0:I.label));console.log(Se),F(Se),console.log(Se);const ot={id:1,itemName:Se.name,qty:1,unit:Se.unit,price:Se.price,discount:0,taxApplied:0,total:Se.price};v([...d,ot])}}},Ct=o=>{C(o.target.value),console.log(o.target.value)},s=async()=>{Xe(!1);const o=await H.map(U=>({product_id:U.id,quantity:U.qty,Price:U.qty*U.rate,discount:parseFloat((U==null?void 0:U.descountvalue)||0),tax_rate_id:U.taxId||1})),I={customer:De.value,description:L,payment_type:W,total_amount:"",invoice_no:Pe,recipes_no:Ee,invoice_date:z,date:h,phone:k,product_details:o},q=new FormData;q.append("party",I.customer),q.append("description",I.description),q.append("payment_type",I.payment_type),q.append("total_amount",I.total_amount),q.append("invoice_no",I.invoice_no),q.append("recipes_no",I.recipes_no),q.append("invoice_date",I.invoice_date),q.append("date",I.date),q.append("phone",I.phone),q.append("image",O),q.append("product_details",JSON.stringify(I.product_details));for(let U of q.entries())console.log(U[0]+": "+U[1]);await Dl(q).then(U=>{console.log(U),alert("Debit note data added"),c(""),Me(""),qe(""),A(""),N(""),Q([]),V(""),Xe(!0)}).catch(U=>{console.log(U),alert("Problem in adding debit note data"),Xe(!0)})},u=(o,I)=>{et(I),We(I)},x=o=>{console.log(o.target.value),c(o.target.value)};return e.jsxs("div",{className:"debitnotepage",children:[e.jsx("h2",{children:"Debit Note"}),e.jsxs("div",{className:"inner-section",children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10,padding:"20px"},children:[e.jsxs("div",{className:"top-section",style:{width:"100%",display:"flex",justifyContent:"space-between",gap:10},children:[e.jsx("div",{className:"right",children:e.jsxs("div",{style:{display:"flex"},children:[e.jsxs("div",{style:{width:"100%",marginBottom:"10px"},children:[e.jsx("p",{className:"party-name",children:"Party"}),e.jsx(Ze,{style:{display:"inline-block","& input":{width:"100%",border:"none",bgcolor:"var(--inputbg-color) !important",color:o=>o.palette.getContrastText(o.palette.background.paper)}},id:"custom-input-demo",options:l,value:De,onChange:u,componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:o=>e.jsx("div",{ref:o.InputProps.ref,children:e.jsx("input",{type:"text",...o.inputProps,style:{height:"41px"}})})})]}),e.jsx(le,{label:"Phone No",type:"tel",intputName:"phoneno",value:k,handleChange:x})]})}),e.jsxs("div",{className:"left",style:{display:"flex",flexDirection:"column",gap:10},children:[e.jsx("div",{style:{display:"flex",gap:10},children:at.slice(0,2).map((o,I)=>e.jsx(le,{handleChange:o.handleChange,label:o.label,type:o.type,intputName:o.intputName,inputOrSelect:o.inputOrSelect,options:o.options,value:o.value},I))}),e.jsx("div",{style:{display:"flex",gap:10},children:at.slice(2,4).map((o,I)=>e.jsx(le,{handleChange:o.handleChange,label:o.label,type:o.type,intputName:o.intputName,inputOrSelect:o.inputOrSelect,options:o.options,value:o.value},I))})]})]}),e.jsxs("div",{className:"center-section",children:[e.jsxs(j,{sx:{width:"100%",marginBottom:"10px","& .css-g6k71e-MuiAutocomplete-root":{width:"100% !important",paddingTop:"10px"},"& .css-6oxs1k-MuiAutocomplete-root":{width:"100% !important"}},children:[e.jsx("p",{className:"party-name",children:"products"}),e.jsx(Ze,{sx:{display:"inline-block","& input":{width:"100% !important ",height:"41px",border:"none",bgcolor:"var(--inputbg-color)",color:o=>o.palette.getContrastText(o.palette.background.paper)}},id:"custom-input-demo",options:J,value:G,onChange:vt,componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:o=>e.jsx("div",{ref:o.InputProps.ref,children:e.jsx("input",{type:"text",...o.inputProps,style:{height:"10xp"}})})})]}),e.jsx(Ms,{selectedProductData:m,totalValues:_,rows:H,setRows:Q})]}),e.jsxs("div",{className:"bottom-section",style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{className:"left",style:{display:"flex",flexDirection:"column",width:"50%",gap:1,alignItems:"flex-start"},children:[e.jsx("div",{children:e.jsx(le,{intputName:"paymenttype",label:"Payment type",inputOrSelect:"select",handleChange:Ke,options:[{value:"None",label:"None"},{value:"Cash",label:"Cash"},{value:"UPI",label:"UPI"}]})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{style:{fontSize:"12px"},htmlFor:"textarea",children:"Description"}),e.jsx("textarea",{id:"descriptiontextarea",value:L,onChange:He,rows:2,cols:50})]}),e.jsxs(ae,{disableRipple:!0,style:{textTransform:"none",color:"var(--black-button)","&:hover":{background:"transparent"}},component:"label",children:[e.jsx("img",{src:xt,alt:"add img"}),e.jsx(Ve,{variant:"string",style:{pl:1},children:"Add Photo"}),e.jsx("input",{type:"file",hidden:!0,onChange:ee})]})]}),e.jsx("div",{className:"right",style:{display:"flex",flexDirection:"column",alignItems:"end",gap:1},children:e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:5,width:"80%"},children:[e.jsx(le,{type:"checkbox",handleChange:pe}),e.jsx(le,{label:"Round off",type:"number",intputName:"roundoff",value:je,disabled:"disabled"}),e.jsx(le,{label:"total",type:"number",intputName:"total",value:_,disabled:"disabled"})]})})]})]}),e.jsx("hr",{}),e.jsxs("div",{style:{display:"flex",justifyContent:"end"},children:[e.jsx(ae,{variant:"contained",sx:{height:40,my:2,marginRight:2,textTransform:"none",bgcolor:"var(--black-button)"},onClick:Z,children:"Print"}),e.jsx(ae,{variant:"contained",sx:{height:40,my:2,marginRight:2,textTransform:"none",bgcolor:"var(--black-button)","&:disabled":{bgcolor:"var(--black-button)",color:"white"}},onClick:s,disabled:!Y,children:Y?"Save":e.jsx(bt,{style:{color:"white",marginBottom:"15px",marginTop:"15px"},size:20})})]})]}),e.jsx(qt,{handleSelectChange:Ct,arrOfInputs:Nt,toggleDrawer:Te,state:g,ProductFormData:de,handleImageChange:tt,handleAdd:ut,setToggle:Ge,toggle:ue}),e.jsxs("div",{id:"pagedatatoshow",className:"offscreen",style:{margin:"8px",width:"580px"},children:[e.jsx("h6",{style:{textAlign:"center",marginBottom:"10px"},children:"Tax Invoice"}),e.jsxs("div",{style:{border:"1px solid"},children:[e.jsxs("div",{className:"topsection",style:{display:"flex"},children:[e.jsxs("div",{className:"left",style:{display:"flex",flexDirection:"column",width:"50%"},children:[e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid"},children:[e.jsx("div",{style:{width:"100px",height:"100px"},children:e.jsx("img",{src:"https://res.cloudinary.com/dczou8g32/image/upload/v1714668042/DEV/jw8j76cgw2ogtokyoisi.png",alt:"img",width:90,height:90})}),e.jsxs("div",{className:"address",children:[e.jsx("h6",{children:"BILTREE"}),e.jsx("h6",{children:"54/3175"}),e.jsx("h6",{children:"MANGHAT ARCADE"}),e.jsx("h6",{children:"KALOOR-KADAVANTHRA ROAD"}),e.jsx("h6",{children:"KADAVANTHRA,ERNAKULAM"}),e.jsx("h6",{children:"GSTIN/UIN:32AAVFB8613K1Z3"}),e.jsx("h6",{children:"State Name:Kerala, Code : 32"}),e.jsx("h6",{children:"E-Mail:info@biltree.in"})]})]}),e.jsxs("div",{style:{borderBottom:"1px solid",marginLeft:"2px",display:"flex",flexDirection:"column",gap:"3px"},children:[e.jsx("h6",{children:"Consignee (Ship to)"}),e.jsx("h5",{children:fe==null?void 0:fe.label}),e.jsx("h6",{children:fe==null?void 0:fe.address1}),e.jsx("h6",{children:fe==null?void 0:fe.address2}),e.jsx("h6",{children:fe==null?void 0:fe.phonenumber}),e.jsxs("h6",{style:{display:"flex",gap:"20px",marginBottom:"3px"},children:[e.jsx("span",{children:"GSTIN/UIN"})," ",e.jsx("span",{children:": 32AAFFC5911M2Z1"})]})]}),e.jsxs("div",{style:{marginLeft:"2px",display:"flex",flexDirection:"column",gap:"3px"},children:[e.jsx("h5",{children:fe==null?void 0:fe.label}),e.jsx("h6",{children:fe==null?void 0:fe.address1}),e.jsx("h6",{children:fe==null?void 0:fe.address2}),e.jsx("h6",{children:fe==null?void 0:fe.phonenumber}),e.jsxs("h6",{style:{display:"flex",gap:"20px"},children:[e.jsx("span",{children:"GSTIN/UIN"})," ",e.jsx("span",{children:": 32AAFFC5911M2Z1"})]})]})]}),e.jsx("div",{className:"right",style:{width:"50%"},children:e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[e.jsx("thead",{style:{borderBottom:"1px solid black"},children:e.jsxs("tr",{children:[e.jsxs("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:[e.jsx("h6",{children:"Invoice No"}),e.jsx("h6",{children:Pe})]}),e.jsxs("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:[e.jsx("h6",{children:"Date"}),h&&e.jsx("h6",{children:(ce=new Date(h))==null?void 0:ce.toLocaleDateString()})]})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Delivery Note"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Mode/Terms of Payment"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Reference No.& Date"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Other References"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Buyer's Order No"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Date"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Dispatch Doc No"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Delivery Note Date"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",borderBottom:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Dispatch throught"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Destination"})})]}),e.jsx("tr",{children:e.jsx("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{style:{marginBottom:"75px"},children:"Terms of Delivery"})})})]})]})})]}),e.jsx("div",{className:"middlesection",children:e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[e.jsx("thead",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("h6",{children:"Sl.No"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:["Description of ",e.jsx("br",{})," Goods and Services"]})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"HSN/SAC"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Quantity"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Per"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Amount"})})]})}),e.jsx("tbody",{children:H.map((o,I)=>(console.log("firstdata",o),e.jsxs("tr",{style:{borderBottom:"1px solid black"},children:[e.jsx("td",{style:{paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:I+1})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:o.name})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:" "})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:o.qty})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsxs("h6",{children:[" ",o.rate]})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsxs("h6",{children:[" ",o.unit]})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:(o.rate||0)*o.qty||0})})]},I)))})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px",marginLeft:"2px"},children:[e.jsx("h6",{children:"Amount Chargeable (in words)"}),e.jsx("h6",{children:"E.&.O.E"})]}),e.jsx("h6",{style:{marginTop:"5px"},children:"INR Sixteen lakh Twenty Eight Thousand Six Hundred Fifty One Only"}),e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%",marginTop:"10px"},children:[e.jsxs("thead",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:[e.jsxs("tr",{children:[e.jsx("th",{style:{borderLeft:"1px solid black"},rowSpan:"2",children:e.jsx("h6",{children:" HSN/SAC"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},rowSpan:"2",children:e.jsx("h6",{children:" Taxable Value"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderBottom:"1px solid black",borderRight:"1px solid black"},colSpan:"2",children:e.jsx("h6",{children:" CGST"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderBottom:"1px solid black"},colSpan:"2",children:e.jsx("h6",{children:" SGST/UTGST"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Total Tax Amount"})})]}),e.jsxs("tr",{children:[e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Amount"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:e.jsx("h6",{children:" Amount"})})]})]}),e.jsx("tbody",{style:{borderBottom:"1px solid black"},children:P==null?void 0:P.map(o=>e.jsxs("tr",{children:[e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",o==null?void 0:o.hsn]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",o==null?void 0:o.total.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",o==null?void 0:o.cgstRate]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",o==null?void 0:o.cgstAmount.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",o==null?void 0:o.sgstRate]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",o==null?void 0:o.sgstAmount.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:((o==null?void 0:o.total)+(o==null?void 0:o.sgstAmount)+(o==null?void 0:o.cgstAmount)).toFixed(2)})})]},o==null?void 0:o.hsn))})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"5px",marginLeft:"2px"},children:[e.jsx("h6",{children:"Tax Amount (in words)"}),e.jsx("h6",{children:"INR Sixteen lakh Twenty Eight Thousand Six Hundred Fifty One Only"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"end",marginTop:"5px",marginLeft:"50%",fontSize:"12px"},children:[e.jsx("h6",{children:"Company's bank details"}),e.jsxs("div",{style:{display:"flex",gap:"16.4px"},children:[e.jsx("h6",{children:"A/c Holder Name"}),e.jsx("h6",{children:": BILTREE"})]}),e.jsxs("div",{style:{display:"flex",gap:"38px"},children:[e.jsx("h6",{children:"Bank Name"}),e.jsx("h6",{children:": ICICI BANK CA - 785236984125"})]}),e.jsxs("div",{style:{display:"flex",gap:"56.6px"},children:[e.jsx("h6",{children:"A/c No"}),e.jsx("h6",{children:": 785236984125"})]}),e.jsxs("div",{style:{display:"flex",gap:"12.4px"},children:[e.jsx("h6",{children:"Branch & IFS Code"}),e.jsx("h6",{children:": PANAMPILLY MAGAR & ICIC0002483"})]}),e.jsx("h6",{children:"SWIFT Code"})]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsxs("div",{className:"leftsection",style:{width:"50%",marginLeft:"2px",marginBottom:"3px"},children:[e.jsx("h6",{style:{borderBottom:"1px solid black",width:"60px"},children:"Declaration"}),e.jsx("h6",{children:"we seclare that this invoice shows the actual price of the goods described and that all particulars are true and currect"})]}),e.jsxs("div",{className:"rightsection",style:{width:"50%",textAlign:"end",borderTop:"1px solid black",borderLeft:"1px solid black"},children:[e.jsx("h6",{style:{marginBottom:"23px",marginRight:"5px"},children:"for BILTREEE"}),e.jsx("h6",{style:{marginRight:"5px"},children:"Authorised Signatory"})]})]})]})]})]})}function Yl(){const[l,a]=t.useState([]),[L,V]=t.useState(null),[m,F]=t.useState(""),[_,X]=t.useState(null),[H,Q]=t.useState(0);t.useState(0),t.useState(!1);const[J,se]=t.useState([]),[G,re]=t.useState(null),[d,v]=t.useState({}),[g,E]=t.useState(!1),[M,C]=t.useState(""),[T,p]=t.useState(""),[D,te]=t.useState("None"),[xe,Ne]=t.useState(0),[he,ke]=t.useState(""),[de,Oe]=t.useState([]),[ge,S]=t.useState([]),[y,ne]=t.useState(null),[be,we]=t.useState([]),[ue,Ge]=t.useState(0),[De,We]=t.useState(!1),[Ee,Me]=t.useState(!0),Pe=P=>{We(P.target.checked)};t.useEffect(()=>{const Z=l.map(ee=>{var Je;const me=parseInt(ee.qty)||0,He=parseInt(ee.rate)||0,tt=me*He-(ee.amountafterdescount||0);let _e=0;ee.taxAppliedamount?_e=parseFloat(ee.taxAppliedamount.replace("%",""))||0:(Je=ee.taxApplied)!=null&&Je.value?_e=parseFloat(ee.taxApplied.value.replace("%",""))||0:ee.taxApplied&&(_e=parseFloat(ee.taxApplied.split("@")[1].replace("%",""))||0);const st=(tt*_e/100+tt).toFixed(2);return{...ee,total:st}}).reduce((ee,me)=>ee+parseFloat(me.total),0),pe=Math.round(Z);Q(De?(Z-pe).toFixed(2):0),Ge(De?pe:Z)},[l,De]);const qe=async(P,Z)=>{if(Z&&(V(Z),Z)){const pe=await lt();console.log(pe);const me=pe.responseData.find(Ke=>Ke.name===(Z==null?void 0:Z.label));console.log(me),ne(me),console.log(me);const He={id:1,itemName:me.name,qty:1,unit:me.unit,price:me.price,discount:0,taxApplied:0,total:me.price};we([...be,He])}},z=async()=>{const ee=(await lt()).responseData.map(me=>me.name).map((me,He)=>({value:`option${He+1}`,label:me}));S(ee)};t.useEffect(()=>{z()},[]);const A=P=>{Ne(P.target.value)},h=P=>{p(P.target.value)},N=P=>{te(P.target.value)},W={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"background.paper",border:"0px solid #000",borderRadius:"10px",boxShadow:24,p:4},Re=()=>E(!0),k=()=>E(!1),c=P=>{F(P.target.value)},O=P=>{const Z=P.target.files[0];X(Z)},ve=()=>{Promise.all([Sl(),ft()]).then(([P,Z])=>{console.log("expenceGetAPI",P),console.log("projectGetAPI",Z);const pe=P.responseData.map(He=>({value:He.id,label:He.name,isProjectExpance:!1})),ee=Z.responseData.map(He=>({value:He.id,label:He.name,isProjectExpance:!0})),me=[...pe,...ee];me.unshift({value:-2,label:"Add"}),me.unshift({value:-1,label:"None"}),se(me)}).catch(P=>{console.log(P),se([{value:-1,label:"None"},{value:-2,label:"Add"}])})};t.useEffect(()=>{ve(),Rt().then(P=>{console.log("partyData:",P);const Z=P.responseData.map(pe=>({value:pe.id,label:pe.name}));console.log(Z),Z.unshift({value:-2,label:"None"}),Oe(Z)}).catch(P=>{console.log(P)})},[]);const je=[{handleChange:h,inputName:"expensecategory",label:"Expense Category",type:"text"},{handleChange:N,inputName:"expenetype",label:"Expense Type",inputOrSelect:"select",options:[{value:"None",label:"None"},{value:"Indirect Expense",label:"Indirect Expense"},{value:"Direct Expense",label:"Direct Expense"}]}],Be=[{intputName:"expenseno",label:"Expense No",type:"text",handleChange:P=>{ke(P.target.value)},value:he},{handleChange:P=>{C(P.target.value)},label:"Invoice Date",type:"date",value:M}];Ns(P=>e.jsx(nl,{focusVisibleClassName:".Mui-focusVisible",disableRipple:!0,...P}))(({theme:P})=>({width:42,height:26,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(16px)",color:"#fff","& + .MuiSwitch-track":{backgroundColor:P.palette.mode==="dark"?"#2ECA45":"#65C466",opacity:1,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:"#33cf4d",border:"6px solid #fff"},"&.Mui-disabled .MuiSwitch-thumb":{color:P.palette.mode==="light"?P.palette.grey[100]:P.palette.grey[600]},"&.Mui-disabled + .MuiSwitch-track":{opacity:P.palette.mode==="light"?.7:.3}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:22,height:22},"& .MuiSwitch-track":{borderRadius:26/2,backgroundColor:P.palette.mode==="light"?"#E9E9EA":"#39393D",opacity:1,transition:P.transitions.create(["background-color"],{duration:500})}}));const Y=P=>{console.log("e.target",P.target.value==="-2"),P.target.value==="-2"&&Re();const Z=J.find(pe=>pe.value===event.target.value);re(Z)},Xe=P=>{console.log("e.target",P.target.value==="-2"),console.log("event.target",P.target.value);const Z=de.find(pe=>pe.value==P.target.value);v(Z)},fe=()=>{Al({name:T,type:D}).then(Z=>{console.log(Z),p(""),te("")}).catch(Z=>{console.log(Z)})},et=P=>{var ee,me,He,Ke,tt,_e,st;const Z=os(e.jsxs("div",{id:"recept-pdf",children:[e.jsxs("div",{className:"header-of-receipt",style:{display:"flex",marginBottom:"30px",marginTop:"10px"},children:[e.jsx("img",{src:"https://res.cloudinary.com/dczou8g32/image/upload/v1714668042/DEV/jw8j76cgw2ogtokyoisi.png",alt:"logo",style:{height:"50px"}}),e.jsxs("div",{className:"address",style:{textAlign:"center",display:"flex",flexDirection:"column",marginLeft:"25px"},children:[e.jsx("h5",{style:{fontSize:"13px",width:"300px"},children:"BILTREE FY204-25"}),e.jsxs("p",{style:{fontSize:"13px",width:"300px"},children:["54/3175, MANGHAT ARCADE ",e.jsx("br",{})," 1ST FLOOR, KALOOR-KADAVANTHRA ROAD"," ",e.jsx("br",{})," ERANAKLAM"]}),e.jsx("p",{style:{fontSize:"13px",width:"300px"},children:"StateName:Kerala, Code:32"}),e.jsx("p",{style:{fontSize:"13px",width:"300px"},children:"E-Mail:info@biltree.in"})]})]}),e.jsx("h5",{className:"resceipt-text",style:{fontSize:"13px",width:"600px",textAlign:"center"},children:"Receipt voucher"}),e.jsxs("div",{className:"date-no",style:{display:"flex",justifyContent:"space-between",width:"950px"},children:[e.jsxs("p",{style:{fontSize:"13px",width:"600px",marginLeft:"10px"},children:["No:",he]}),e.jsxs("p",{style:{fontSize:"13px",width:"600px"},children:["Date:",(ee=new Date(M))==null?void 0:ee.toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{marginTop:"20px",width:"950px",marginLeft:"10px",display:"flex"},children:[e.jsxs("div",{style:{width:"300px",borderRight:"1px solid"},children:[e.jsx("hr",{style:{width:"300px"}}),e.jsx("p",{style:{marginLeft:"20px"},children:"Particulars"}),e.jsx("hr",{style:{width:"300px"}}),e.jsx("p",{style:{fontSize:"13px",width:"600px"},children:G.selectedOptionObject.label}),l[0].taxApplied.includes("IGST")?e.jsxs(e.Fragment,{children:[" ",e.jsx("p",{style:{fontSize:"13px",width:"600px"},children:l[0].taxApplied})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{style:{fontSize:"13px",width:"600px"},children:["CGST@",(l[0].taxApplied&&l[0].taxApplied.match(/\d+/)[0])/2," ","%"]}),e.jsxs("p",{style:{fontSize:"13px",width:"600px"},children:["SGST@",(l[0].taxApplied&&l[0].taxApplied.match(/\d+/)[0])/2," ","%"]})]}),e.jsx("p",{style:{fontSize:"13px",width:"600px"},children:d.label}),e.jsx("p",{style:{marginLeft:"20px",fontSize:"13px",width:"600px"},children:P==null?void 0:P.party_id})]}),e.jsxs("div",{style:{width:"40%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex"},children:[e.jsxs("div",{style:{borderRight:"1px solid black"},children:[e.jsx("hr",{style:{width:"135px"}}),e.jsx("p",{style:{marginLeft:"20px",textAlign:"end"},children:"Debit"}),e.jsx("hr",{style:{width:"135px"}})]}),e.jsxs("div",{children:[e.jsx("hr",{style:{width:"135px"}}),e.jsx("p",{style:{marginLeft:"20px",textAlign:"end"},children:"Credit"}),e.jsx("hr",{style:{width:"135px"}})]})]}),e.jsxs("div",{style:{width:"50%",display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",borderRight:"1px solid black",height:"200px",width:"350.5px",textAlign:"end"},children:[e.jsx("p",{children:l[0].qty*l[0].rate-(l[0].amountafterdescount||0)}),l[0].taxApplied.includes("IGST")?e.jsx(e.Fragment,{children:e.jsx("p",{children:(l[0].qty*l[0].rate-(l[0].amountafterdescount||0))*((parseFloat((He=(me=l[0].taxApplied)==null?void 0:me.split("@")[1])==null?void 0:He.replace("%",""))||0)/100)})}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:(l[0].qty*l[0].rate-(l[0].amountafterdescount||0))*((parseFloat((tt=(Ke=l[0].taxApplied)==null?void 0:Ke.split("@")[1])==null?void 0:tt.replace("%",""))/2||0)/100)}),e.jsx("p",{children:(l[0].qty*l[0].rate-(l[0].amountafterdescount||0))*((parseFloat((st=(_e=l[0].taxApplied)==null?void 0:_e.split("@")[1])==null?void 0:st.replace("%",""))/2||0)/100)})]})]}),e.jsx("div",{style:{display:"flex",height:"20px",width:"136.5px"},children:e.jsx("p",{children:ue})})]}),e.jsxs("div",{children:[e.jsx("hr",{style:{width:"270px"}}),e.jsxs("div",{style:{display:"flex",marginLeft:"100px"},children:[l[0].taxApplied.includes("IGST")?e.jsx(e.Fragment,{children:e.jsx("p",{children:ue})}):e.jsx("p",{children:ue}),e.jsx("p",{style:{marginLeft:"100px"},children:ue})]}),e.jsx("hr",{style:{width:"270px",marginTop:"10px"}})]})]})]}),e.jsx("p",{className:"resceipt-text",style:{fontSize:"13px",width:"580px",textAlign:"end",marginTop:"90px"},children:"Authorised Signatory"}),e.jsxs("div",{style:{display:"flex",width:"580px",marginTop:"20px"},children:[e.jsx("p",{style:{marginLeft:"20px",fontSize:"13px",width:"580px"},children:"Prepared by"}),e.jsx("p",{style:{fontSize:"13px",width:"580px",textAlign:"center"},children:"Checked by"}),e.jsx("p",{style:{fontSize:"13px",width:"580px",textAlign:"end"},children:"Verified by"})]})]})]})),pe=new mt("p","pt","a4",!0);pe.html(Z,{callback:()=>{const Je=pe.output("bloburl");window.open(Je,"_blank")}})},ht=async()=>{Me(!1);const P=l.map(pe=>({product_id:pe.id,unit_id:pe.unit_id,quantity:pe.qty,tax_rate_id:pe.taxId,rate:pe.rate,discount:parseInt(pe.descountvalue)}));console.log(l);const Z=new FormData;Z.append("project_id",G.selectedOptionObject.value),Z.append("party_id",d.value),Z.append("expenses_category_id",G.selectedOptionObject.value),Z.append("is_project_expense",G.selectedOptionObject.isProjectExpance),Z.append("date",M),Z.append("payment_type",xe),Z.append("description",m),Z.append("serial_no",he),Z.append("expenses",JSON.stringify(P)),console.log(Z),kl(Z).then(pe=>{console.log(pe),alert("Expense data added"),ke(""),C(""),a([]),F(""),We(!1),Me(!0)}).catch(pe=>{console.log(pe),alert("Expense data Problem"),Me(!0)})};return e.jsxs("div",{className:"expence-page",children:[e.jsx("div",{style:{display:"flex"},children:e.jsx("h2",{children:"Expense"})}),e.jsxs("div",{className:"inner-section",children:[e.jsxs("div",{className:"top-section",children:[e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx(le,{label:"Expense Category",handleChange:Y,inputOrSelect:"select",options:J}),e.jsx(le,{label:"Party",handleChange:Xe,inputOrSelect:"select",options:de})]}),e.jsx("div",{className:"rightinputs",children:Be.map((P,Z)=>e.jsx(le,{label:P.label,type:P.type,handleChange:P.handleChange,intputName:P.intputName,inputOrSelect:P.inputOrSelect,value:P.value,disabled:P.disabled,options:P.options},Z))})]}),e.jsx("div",{className:"middle-section",children:e.jsxs(j,{sx:{mx:1},children:[e.jsxs(j,{sx:{width:"100%",marginBottom:"10px"},children:[e.jsx("p",{className:"product-name",children:"products"}),e.jsx(Ze,{sx:{display:"inline-block","& input":{width:"100%",border:"none",bgcolor:"var(--inputbg-color)",color:P=>P.palette.getContrastText(P.palette.background.paper)}},id:"custom-input-demo",options:ge,value:L,onChange:qe,componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:P=>e.jsx("div",{ref:P.InputProps.ref,children:e.jsx("input",{type:"text",...P.inputProps,style:{height:"10xp"}})})})]}),e.jsx("div",{style:{overflow:"auto"},children:e.jsxs(j,{children:[e.jsx(ds,{selectedProductData:y,setTotalValues:Ge,totalValues:ue,setRows:a,rows:l})," "]})})]})}),e.jsxs("div",{className:"bottom-section",children:[e.jsxs("div",{children:[e.jsx("div",{style:{paddingBottom:"10px"},children:e.jsx(le,{intputName:"paymenttype",label:"Payment type",inputOrSelect:"select",handleChange:A,options:[{value:"None",label:"None"},{value:"Cash",label:"Cash"},{value:"UPI",label:"UPI"}]})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",paddingBottom:"10px"},children:[e.jsx("label",{style:{fontSize:"12px"},htmlFor:"descriptiontextarea",children:"Description"}),e.jsx("textarea",{id:"descriptiontextarea",value:m,onChange:c,rows:2,cols:50})]}),e.jsxs(ae,{disableRipple:!0,style:{textTransform:"none",color:"var(--black-button)","&:hover":{background:"transparent"}},component:"label",children:[e.jsx("img",{src:xt,alt:"add img"}),e.jsx(Ve,{variant:"string",style:{paddingLeft:1},children:"Add Photo"}),e.jsx("input",{type:"file",hidden:!0,onChange:O})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:5,width:"40%"},children:[e.jsx(le,{type:"checkbox",handleChange:Pe}),e.jsx(le,{label:"Round off",type:"number",intputName:"roundoff",value:H,disabled:"disabled"}),e.jsx(le,{label:"total",type:"number",intputName:"total",value:ue,disabled:"disabled"})]})]}),e.jsx("hr",{}),e.jsxs("div",{style:{display:"flex",justifyContent:"end"},children:[e.jsx(ae,{variant:"contained",sx:{height:40,my:2,marginRight:2,textTransform:"none",bgcolor:"var(--black-button)"},onClick:et,children:"Print"}),e.jsx(ae,{variant:"contained",sx:{height:40,my:2,marginRight:2,textTransform:"none",bgcolor:"var(--black-button)","&:disabled":{bgcolor:"var(--black-button)",color:"white"}},onClick:ht,disabled:!Ee,children:Ee?"Save":e.jsx(bt,{style:{color:"white",marginBottom:"15px",marginTop:"15px"},size:20})})]})]}),e.jsx(Wt,{open:g,onClose:k,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(j,{sx:W,children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},children:[e.jsx("h4",{children:"Add Expense Category"}),e.jsx("div",{style:{width:"95%",display:"flex",gap:"20px",flexDirection:"column"},children:je.map((P,Z)=>e.jsx(le,{label:P.label,type:P.type,handleChange:P.handleChange,inputName:P.inputName,inputOrSelect:P.inputOrSelect,options:P.options},Z))}),e.jsxs("div",{style:{display:"flex",justifyContent:"end",width:"100%"},children:[e.jsx(ae,{variant:"contained",sx:{height:40,my:2,marginRight:2,textTransform:"none",bgcolor:"var(--black-button)"},onClick:k,children:"Cancel"}),e.jsx(ae,{variant:"contained",sx:{height:40,my:2,marginRight:2,textTransform:"none",bgcolor:"var(--black-button)"},onClick:()=>{fe(),ve(),k()},children:"Save"})]})]})," "]})})]})}function Xl(){var vt,Ct;const[l,a]=t.useState([]),[L,V]=t.useState(null),[m,F]=t.useState([]),[_,X]=t.useState([]),[H,Q]=t.useState(null),[J,se]=t.useState([]),[G,re]=t.useState({right:!1}),[d,v]=t.useState([]),[g,E]=t.useState(""),[M,C]=t.useState([]),[T,p]=t.useState([]),[D,te]=t.useState([]),[xe,Ne]=t.useState({}),[he,ke]=t.useState({name:"",quantity:"",rate:0,hsn:""}),[de,Oe]=t.useState("");t.useState("");const[ge,S]=t.useState(null),[y,ne]=t.useState([]),[be,we]=t.useState(!0),[ue,Ge]=t.useState(""),[De,We]=t.useState(),[Ee,Me]=t.useState(""),[Pe,qe]=t.useState(""),[z,A]=t.useState(""),[h,N]=t.useState(null),[W,Re]=t.useState(0);t.useState(0);const[k,c]=t.useState(0),[O,ve]=t.useState(),[je,Ce]=t.useState(!1),[Fe,Be]=t.useState(!0),[Y,Xe]=t.useState({}),et=(s=>{const u=s.reduce((x,R)=>{var o,I,q,U,Se;console.log("firstcurr.taxRate",parseInt((o=R.taxApplied)==null?void 0:o.split("@")[1].replace("%",""))||0),x[R.hsn]||(x[R.hsn]={hsn:R.hsn,total:0,cgstRate:(parseInt((I=R.taxApplied)==null?void 0:I.split("@")[1].replace("%",""))||0)/2,sgstRate:(parseInt((q=R.taxApplied)==null?void 0:q.split("@")[1].replace("%",""))||0)/2,cgstAmount:0,sgstAmount:0});const ce=R.qty*R.rate;return x[R.hsn].total+=ce,x[R.hsn].cgstAmount+=ce*((parseInt((U=R.taxApplied)==null?void 0:U.split("@")[1].replace("%",""))||0)/100)/2,x[R.hsn].sgstAmount+=ce*((parseInt((Se=R.taxApplied)==null?void 0:Se.split("@")[1].replace("%",""))||0)/100)/2,x},{});return Object.values(u)})(_),ht=s=>{Ce(s.target.checked)},P=()=>{const s=document.querySelector("#pagedatatoshow"),u=new mt("p","pt","a4",!0);u.html(s,{callback:()=>{const x=u.output("bloburl");window.open(x,"_blank")}})};t.useEffect(()=>{const u=_.map(R=>{var ot;const ce=parseInt(R.qty)||0,o=parseInt(R.rate)||0,q=ce*o-(R.amountafterdescount||0);let U=0;R.taxAppliedamount?U=parseFloat(R.taxAppliedamount.replace("%",""))||0:(ot=R.taxApplied)!=null&&ot.value?U=parseFloat(R.taxApplied.value.replace("%",""))||0:R.taxApplied&&(U=parseFloat(R.taxApplied.split("@")[1].replace("%",""))||0);const Se=(q*U/100+q).toFixed(2);return{...R,total:Se}}).reduce((R,ce)=>R+parseFloat(ce.total),0),x=Math.round(u);Re(je?(u-x).toFixed(2):0),F(je?x:u)},[_,je]),t.useEffect(()=>{_s().then(s=>{console.log("stateData",s.data.responseData);const u=s.data.responseData.map(x=>({value:x.id,label:x.name}));u.unshift({value:-2,label:"Select"}),ve(u)}).catch(s=>{console.log(s)}),Rt().then(s=>{console.log("partyData:",s);const u=s.responseData.map(x=>({value:x.id,label:x.name,address1:x.address1,address2:x.address2,phonenumber:x.phonenumber}));console.log(u),a(u)}).catch(s=>{console.log(s)})},[]);const Z=(s,u)=>{console.log("datadata",u),Xe(u),c(u.value)},pe=s=>{A(s.target.value)},ee=s=>{const u=s.target.files[0];N(u)},me=s=>{const u=s.target.files[0];S(u)},He=s=>{console.log(s.target.value);const u=y.find(x=>x.taxlabel==s.target.value);console.log(u),Ne(u)},Ke=s=>{E(s.target.value),console.log(s.target.value)},tt=s=>{Oe(s.target.value),console.log(s.target.value)},_e=()=>{const s=new FormData;s.append("name",he.name),s.append("hsn",he.hsn),s.append("rate",parseInt(he.rate)),s.append("quantity",parseInt(he.quantity)),s.append("unit",g),s.append("projectid",parseInt(de)),s.append("is_master_product",be),s.append("tax_rate",xe.id),s.append("image",ge),Pt(s).then(u=>{b(),u.status===200&&(ke({name:"",qate:"",quantity:"",rate:"",taxvalue:"",hsn:""}),E(""),Ne(""),alert("Product added successfully"))}).catch(u=>{console.log(u),alert("Problem in adding product")})},st=()=>{yt().then(s=>{console.log("tax:",s);const u=s.map(x=>({value:x.percentage,label:x.name?`${x.name} ${x.percentage}`:"none",taxlabel:x.percentage,id:x.id}));console.log(u),ne(u)}).catch(s=>{console.log(s)})},Je=()=>{Vt().then(s=>{console.log("category:",s);const u=s==null?void 0:s.responseData.map(x=>({value:x.id,label:`${x.name}`}));u.unshift({value:0,label:"None"}),console.log("categoryOptions",u),C(u)}).catch(s=>{console.log(s)})},ut=()=>{ft().then(s=>{console.log("projects:",s);const u=s==null?void 0:s.responseData.map(x=>({value:x.id,label:`${x.name} ( ${x.client_name} )`}));u.unshift({value:0,label:"None"}),console.log("projectdData",u),p(u)}).catch(s=>{console.log(s)})},jt=()=>{Tt().then(s=>{console.log("units:",s);const u=s==null?void 0:s.responseData.map(x=>({value:x.id,label:x.name}));u.unshift({value:0,label:"None"}),console.log("unitsdData",u),te(u)}).catch(s=>{console.log(s)})},b=async()=>{const R=(await lt()).responseData.map(ce=>ce.name).map((ce,o)=>({value:`option${o+1}`,label:ce}));R.unshift({value:-2,label:"Add"}),v(R)};t.useEffect(()=>{b(),v([{value:-2,label:"Add"}]),st(),Je(),ut(),jt()},[]);const K=s=>{E(s.target.value),console.log(s.target.value)},w=s=>{const{name:u,value:x}=s.target;ke(R=>({...R,[u]:x}))},ye=[{handleChange:w,intputName:"name",label:" Product Name",type:"text"},{handleChange:w,intputName:"rate",label:"Rate",type:"number"},{handleChange:w,intputName:"quantity",label:"Quantity",type:"number"},{handleChange:He,intputName:"taxrate",label:"Tax Rate",inputOrSelect:"select",options:y},{intputName:"taxvalue",label:" Tax Value",value:parseFloat(he.rate||0)*parseFloat(he.quantity||0)*(parseFloat((vt=xe.value)==null?void 0:vt.replace("%",""))||0)/100,disabled:"disabled"},{handleChange:w,intputName:"hsn",label:"HSN",type:"text"},{handleChange:Ke,intputName:"unit",label:"Unit",inputOrSelect:"select",options:D},{handleChange:tt,intputName:"project",label:"Projects",inputOrSelect:"select",options:T}],Te=(s,u)=>x=>{console.log(x),console.log("Toggle Drawer:",s,u),!(x&&x.type==="keydown"&&(x.key==="Tab"||x.key==="Shift"))&&re({...G,[s]:u})},nt=async(s,u)=>{if(u){if(u.value===-2)console.log(u.value===-2),Te("right",!0)();else if(Q(u),u){console.log(u.label);const x=await lt();console.log(x);const ce=x.responseData.find(I=>I.name===(u==null?void 0:u.label));console.log(ce),V(ce),console.log(ce);const o={id:1,itemName:ce.name,qty:1,unit:ce.unit,price:ce.price,discount:0,taxApplied:0,total:ce.price};se([...J,o])}}},ct=[{intputName:"challanno",label:"Challan No",type:"text",handleChange:s=>{Ge(s.target.value)},value:ue},{handleChange:s=>{We(s.target.value)},label:"Invoice Date",type:"date",value:De},{handleChange:s=>{Me(s.target.value)},label:"Due Date",type:"date",value:Ee},{handleChange:s=>{console.log("firste.target.value",s.target.value),qe(s.target.value)},intputName:"statusofsupply",label:"State of supply",inputOrSelect:"select",options:O,value:Pe}],Nt=async()=>{Be(!1);const s=await _.map(R=>({product_id:R.id,quantity:R.qty,Price:R.qty*R.rate,discount:parseFloat((R==null?void 0:R.descountvalue)||0),tax_rate_id:R.taxId||1})),u={due_date:Ee,date:De,challan_no:ue,state_id:Pe,party_id:k,description:z,products:s},x=new FormData;x.append("due_date",u.due_date),x.append("date",u.date),x.append("challan_no",u.challan_no),x.append("state_id",u.state_id),x.append("party_id",u.party_id),x.append("description",u.description),x.append("products",JSON.stringify(u.products)),x.append("image",h),Tl(x).then(R=>{console.log(R),alert("Delivery Challan added"),c(),Ge(""),We(""),Me(""),X([]),A(""),qe({}),Be(!0)}).catch(R=>{console.log(R),alert("Delivery Challan adding Problem "),Be(!0)})};return e.jsxs("div",{className:"deliverychallan-page",children:[e.jsx("h2",{children:"Delivery Challan"}),e.jsxs("div",{className:"inner-section",children:[e.jsxs("div",{className:"top-section",children:[e.jsxs(j,{sx:{width:"100%",marginBottom:"10px"},children:[e.jsx("p",{className:"party-name",children:"Party"}),e.jsx(Ze,{sx:{display:"inline-block","& input":{width:"100%",border:"none",bgcolor:"var(--inputbg-color)",color:s=>s.palette.getContrastText(s.palette.background.paper)}},id:"custom-input-demo",options:l,onChange:Z,componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:s=>e.jsx("div",{ref:s.InputProps.ref,children:e.jsx("input",{type:"text",...s.inputProps,style:{height:"38px"}})})})]}),e.jsx("div",{className:"rightinputs",children:ct.map((s,u)=>e.jsx(le,{label:s.label,type:s.type,handleChange:s.handleChange,intputName:s.intputName,inputOrSelect:s.inputOrSelect,value:s.value,disabled:s.disabled,options:s.options},u))})]}),e.jsxs("div",{className:"middle-section",children:[e.jsxs(j,{sx:{width:"100%",marginBottom:"10px","& .css-g6k71e-MuiAutocomplete-root":{width:"100% !important",paddingTop:"10px"},"& .css-6oxs1k-MuiAutocomplete-root":{width:"100% !important"}},children:[e.jsx("p",{className:"products-name",children:"products"}),e.jsx(Ze,{sx:{display:"inline-block","& input":{width:"100% !important ",height:"41px",border:"none",bgcolor:"var(--inputbg-color)",color:s=>s.palette.getContrastText(s.palette.background.paper)}},id:"custom-input-demo",options:d,value:H,onChange:nt,componentsProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-20]}}]}},renderInput:s=>e.jsx("div",{ref:s.InputProps.ref,children:e.jsx("input",{type:"text",...s.inputProps,style:{height:"10xp"}})})})]}),e.jsx(ds,{selectedProductData:L,setTotalValues:F,totalValues:m,setRows:X,rows:_})]}),e.jsxs("div",{className:"bottom-section",children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",paddingBottom:"10px"},children:[e.jsx("label",{style:{fontSize:"12px"},htmlFor:"descriptiontextarea",children:"Description"}),e.jsx("textarea",{id:"descriptiontextarea",value:z,onChange:pe,rows:2,cols:50})]}),e.jsxs(ae,{disableRipple:!0,style:{textTransform:"none",color:"var(--black-button)","&:hover":{background:"transparent"}},component:"label",children:[e.jsx("img",{src:xt,alt:"add img"}),e.jsx(Ve,{variant:"string",style:{paddingLeft:1},children:"Add Photo"}),e.jsx("input",{type:"file",hidden:!0,onChange:ee})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:5,width:"40%"},children:[e.jsx(le,{type:"checkbox",handleChange:ht}),e.jsx(le,{label:"Round off",type:"number",intputName:"roundoff",value:W,disabled:"disabled"}),e.jsx(le,{label:"total",type:"number",intputName:"total",value:m,disabled:"disabled"})]})]}),e.jsx("hr",{}),e.jsxs("div",{style:{display:"flex",justifyContent:"end"},children:[e.jsx(ae,{variant:"contained",sx:{height:40,my:2,marginRight:2,textTransform:"none",bgcolor:"var(--black-button)"},onClick:P,children:"Print"}),e.jsx(ae,{variant:"contained",sx:{height:40,my:2,marginRight:2,textTransform:"none",bgcolor:"var(--black-button)","&:disabled":{bgcolor:"var(--black-button)",color:"white"}},onClick:Nt,disabled:!Fe,children:Fe?"Save":e.jsx(bt,{style:{color:"white",marginBottom:"15px",marginTop:"15px"},size:20})})]})]}),e.jsx(qt,{handleSelectChange:K,arrOfInputs:ye,toggleDrawer:Te,state:G,ProductFormData:he,handleImageChange:me,handleAdd:_e,setToggle:we,toggle:be}),e.jsxs("div",{id:"pagedatatoshow",className:"offscreen",style:{margin:"8px",width:"580px"},children:[e.jsx("h6",{style:{textAlign:"center",marginBottom:"10px"},children:"Tax Invoice"}),e.jsxs("div",{style:{border:"1px solid"},children:[e.jsxs("div",{className:"topsection",style:{display:"flex"},children:[e.jsxs("div",{className:"left",style:{display:"flex",flexDirection:"column",width:"50%"},children:[e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid"},children:[e.jsx("div",{style:{width:"100px",height:"100px"},children:e.jsx("img",{src:"https://res.cloudinary.com/dczou8g32/image/upload/v1714668042/DEV/jw8j76cgw2ogtokyoisi.png",alt:"img",width:90,height:90})}),e.jsxs("div",{className:"address",children:[e.jsx("h6",{children:"BILTREE"}),e.jsx("h6",{children:"54/3175"}),e.jsx("h6",{children:"MANGHAT ARCADE"}),e.jsx("h6",{children:"KALOOR-KADAVANTHRA ROAD"}),e.jsx("h6",{children:"KADAVANTHRA,ERNAKULAM"}),e.jsx("h6",{children:"GSTIN/UIN:32AAVFB8613K1Z3"}),e.jsx("h6",{children:"State Name:Kerala, Code : 32"}),e.jsx("h6",{children:"E-Mail:info@biltree.in"})]})]}),e.jsxs("div",{style:{borderBottom:"1px solid",marginLeft:"2px",display:"flex",flexDirection:"column",gap:"3px"},children:[e.jsx("h6",{children:"Consignee (Ship to)"}),e.jsx("h5",{children:Y==null?void 0:Y.label}),e.jsx("h6",{children:Y==null?void 0:Y.address1}),e.jsx("h6",{children:Y==null?void 0:Y.address2}),e.jsx("h6",{children:Y==null?void 0:Y.phonenumber}),e.jsxs("h6",{style:{display:"flex",gap:"20px",marginBottom:"3px"},children:[e.jsx("span",{children:"GSTIN/UIN"})," ",e.jsx("span",{children:": 32AAFFC5911M2Z1"})]})]}),e.jsxs("div",{style:{marginLeft:"2px",display:"flex",flexDirection:"column",gap:"3px"},children:[e.jsx("h5",{children:Y==null?void 0:Y.label}),e.jsx("h6",{children:Y==null?void 0:Y.address1}),e.jsx("h6",{children:Y==null?void 0:Y.address2}),e.jsx("h6",{children:Y==null?void 0:Y.phonenumber}),e.jsxs("h6",{style:{display:"flex",gap:"20px"},children:[e.jsx("span",{children:"GSTIN/UIN"})," ",e.jsx("span",{children:": 32AAFFC5911M2Z1"})]})]})]}),e.jsx("div",{className:"right",style:{width:"50%"},children:e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[e.jsx("thead",{style:{borderBottom:"1px solid black"},children:e.jsxs("tr",{children:[e.jsxs("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:[e.jsx("h6",{children:"Invoice No"}),e.jsx("h6",{children:ue})]}),e.jsxs("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:[e.jsx("h6",{children:"Date"}),De&&e.jsx("h6",{children:(Ct=new Date(De))==null?void 0:Ct.toLocaleDateString()})]})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Delivery Note"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Mode/Terms of Payment"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Reference No.& Date"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Other References"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Buyer's Order No"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Date"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Dispatch Doc No"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Delivery Note Date"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{borderTop:"1px solid black",borderLeft:"1px solid black",borderBottom:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Dispatch throught"})}),e.jsx("td",{style:{borderBottom:"1px solid black",borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{children:"Destination"})})]}),e.jsx("tr",{children:e.jsx("td",{style:{borderLeft:"1px solid black",padding:"8px"},children:e.jsx("h6",{style:{marginBottom:"75px"},children:"Terms of Delivery"})})})]})]})})]}),e.jsx("div",{className:"middlesection",children:e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%"},children:[e.jsx("thead",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("h6",{children:"Sl.No"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:["Description of ",e.jsx("br",{})," Goods and Services"]})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"HSN/SAC"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Quantity"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Per"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:"Amount"})})]})}),e.jsx("tbody",{children:_.map((s,u)=>(console.log("firstdata",s),e.jsxs("tr",{style:{borderBottom:"1px solid black"},children:[e.jsx("td",{style:{paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:u+1})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:s.name})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:" "})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:s.qty})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsxs("h6",{children:[" ",s.rate]})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsxs("h6",{children:[" ",s.unit]})}),e.jsx("td",{style:{borderLeft:"1px solid black",paddingLeft:"3px",paddingBottom:"5px"},children:e.jsx("h6",{children:(s.rate||0)*s.qty||0})})]},u)))})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px",marginLeft:"2px"},children:[e.jsx("h6",{children:"Amount Chargeable (in words)"}),e.jsx("h6",{children:"E.&.O.E"})]}),e.jsx("h6",{style:{marginTop:"5px"},children:"INR Sixteen lakh Twenty Eight Thousand Six Hundred Fifty One Only"}),e.jsxs("table",{style:{borderCollapse:"collapse",width:"100%",marginTop:"10px"},children:[e.jsxs("thead",{style:{borderBottom:"1px solid black",borderTop:"1px solid black"},children:[e.jsxs("tr",{children:[e.jsx("th",{style:{borderLeft:"1px solid black"},rowSpan:"2",children:e.jsx("h6",{children:" HSN/SAC"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},rowSpan:"2",children:e.jsx("h6",{children:" Taxable Value"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderBottom:"1px solid black",borderRight:"1px solid black"},colSpan:"2",children:e.jsx("h6",{children:" CGST"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderBottom:"1px solid black"},colSpan:"2",children:e.jsx("h6",{children:" SGST/UTGST"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Total Tax Amount"})})]}),e.jsxs("tr",{children:[e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Amount"})}),e.jsx("th",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:" Rate"})}),e.jsx("th",{style:{borderLeft:"1px solid black",borderRight:"1px solid black"},children:e.jsx("h6",{children:" Amount"})})]})]}),e.jsx("tbody",{style:{borderBottom:"1px solid black"},children:et==null?void 0:et.map(s=>e.jsxs("tr",{children:[e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",s==null?void 0:s.hsn]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",s==null?void 0:s.total.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",s==null?void 0:s.cgstRate]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",s==null?void 0:s.cgstAmount.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",s==null?void 0:s.sgstRate]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsxs("h6",{children:[" ",s==null?void 0:s.sgstAmount.toFixed(2)]})}),e.jsx("td",{style:{borderLeft:"1px solid black"},children:e.jsx("h6",{children:((s==null?void 0:s.total)+(s==null?void 0:s.sgstAmount)+(s==null?void 0:s.cgstAmount)).toFixed(2)})})]},s==null?void 0:s.hsn))})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"5px",marginLeft:"2px"},children:[e.jsx("h6",{children:"Tax Amount (in words)"}),e.jsx("h6",{children:"INR Sixteen lakh Twenty Eight Thousand Six Hundred Fifty One Only"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"end",marginTop:"5px",marginLeft:"50%",fontSize:"12px"},children:[e.jsx("h6",{children:"Company's bank details"}),e.jsxs("div",{style:{display:"flex",gap:"16.4px"},children:[e.jsx("h6",{children:"A/c Holder Name"}),e.jsx("h6",{children:": BILTREE"})]}),e.jsxs("div",{style:{display:"flex",gap:"38px"},children:[e.jsx("h6",{children:"Bank Name"}),e.jsx("h6",{children:": ICICI BANK CA - 785236984125"})]}),e.jsxs("div",{style:{display:"flex",gap:"56.6px"},children:[e.jsx("h6",{children:"A/c No"}),e.jsx("h6",{children:": 785236984125"})]}),e.jsxs("div",{style:{display:"flex",gap:"12.4px"},children:[e.jsx("h6",{children:"Branch & IFS Code"}),e.jsx("h6",{children:": PANAMPILLY MAGAR & ICIC0002483"})]}),e.jsx("h6",{children:"SWIFT Code"})]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsxs("div",{className:"leftsection",style:{width:"50%",marginLeft:"2px",marginBottom:"3px"},children:[e.jsx("h6",{style:{borderBottom:"1px solid black",width:"60px"},children:"Declaration"}),e.jsx("h6",{children:"we seclare that this invoice shows the actual price of the goods described and that all particulars are true and currect"})]}),e.jsxs("div",{className:"rightsection",style:{width:"50%",textAlign:"end",borderTop:"1px solid black",borderLeft:"1px solid black"},children:[e.jsx("h6",{style:{marginBottom:"23px",marginRight:"5px"},children:"for BILTREEE"}),e.jsx("h6",{style:{marginRight:"5px"},children:"Authorised Signatory"})]})]})]})]})]})}function en(){return e.jsx(Vs,{children:e.jsx(dl,{children:e.jsx(Qe,{element:e.jsx(cl,{}),children:e.jsxs(Qe,{path:"/admin",element:e.jsx(xl,{}),children:[e.jsx(Qe,{path:"employees",element:e.jsx(Bl,{})}),e.jsx(Qe,{path:"sales",element:e.jsx(Hl,{})}),e.jsx(Qe,{path:"purchase",element:e.jsx(Wl,{})}),e.jsx(Qe,{path:"projects",element:e.jsx(Rl,{})}),e.jsx(Qe,{path:"receipt",element:e.jsx(Vl,{})}),e.jsx(Qe,{path:"payment-out",element:e.jsx(Ql,{})}),e.jsx(Qe,{path:"creadit-note",element:e.jsx(Ul,{})}),e.jsx(Qe,{path:"debit-note",element:e.jsx(Jl,{})}),e.jsx(Qe,{path:"project-data",element:e.jsx(Kl,{})}),e.jsx(Qe,{path:"Quotation-View",element:e.jsx(Zl,{})}),e.jsx(Qe,{path:"expense",element:e.jsx(Yl,{})}),e.jsx(Qe,{path:"delivery-challan",element:e.jsx(Xl,{})}),e.jsx(Qe,{path:"employees/add-employes",element:e.jsx(ul,{})}),e.jsx(Qe,{path:"projects/add-projects",element:e.jsx(Il,{})}),e.jsx(Qe,{path:"stocks",element:e.jsx(Pl,{})}),e.jsx(Qe,{path:"quotation-generator",element:e.jsx(Ml,{})}),e.jsx(Qe,{path:"stock-journal",element:e.jsx(ql,{})})]})})})})}Ws.createRoot(document.getElementById("root")).render(e.jsx(ks.StrictMode,{children:e.jsx(en,{})}));
